From da5125d000a9588af3e7de4ce1c7a31328a2932c Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Mon, 7 Apr 2014 18:19:32 +0100
Subject: [PATCH 01/46] [rbp/omxplayer] When opening a stream don't try to
 update gui so often

---
 xbmc/dialogs/GUIDialogBusy.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/xbmc/dialogs/GUIDialogBusy.cpp b/xbmc/dialogs/GUIDialogBusy.cpp
index 2faceea..889d7a2 100644
--- a/xbmc/dialogs/GUIDialogBusy.cpp
+++ b/xbmc/dialogs/GUIDialogBusy.cpp
@@ -68,7 +68,11 @@ bool CGUIDialogBusy::WaitOnEvent(CEvent &event, unsigned int displaytime /* = 10
     if (dialog)
     {
       dialog->Show();
+#ifdef TARGET_RASPBERRY_PI
+      while(!event.WaitMSec(100))
+#else
       while(!event.WaitMSec(1))
+#endif
       {
         g_windowManager.ProcessRenderLoop(false);
         if (allowCancel && dialog->IsCanceled())

From 8d00e7e2baedef3361b66cdfd9b7d316a9b0017d Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 29 Apr 2014 15:23:22 +0100
Subject: [PATCH 02/46] [ffmpeg] Speed up wtv index creation

The index creation is O(N^2) with number of entries (typically thousands).
On a Pi this can take more than 60 seconds to execute for a recording of a few hours.

By replacing with an O(N) loop, this takes virtually zero time
---
 tools/depends/target/ffmpeg/Makefile               |  3 +-
 .../ffmpeg_Speed_up_wtv_index_creation.patch       | 47 ++++++++++++++++++++++
 2 files changed, 49 insertions(+), 1 deletion(-)
 create mode 100644 tools/depends/target/ffmpeg/ffmpeg_Speed_up_wtv_index_creation.patch

diff --git a/tools/depends/target/ffmpeg/Makefile b/tools/depends/target/ffmpeg/Makefile
index 711182f..6e8364a 100644
--- a/tools/depends/target/ffmpeg/Makefile
+++ b/tools/depends/target/ffmpeg/Makefile
@@ -1,6 +1,6 @@
 include ../../Makefile.include
 include FFMPEG-VERSION
-DEPS= ../../Makefile.include FFMPEG-VERSION Makefile
+DEPS= ../../Makefile.include FFMPEG-VERSION Makefile ffmpeg_Speed_up_wtv_index_creation.patch
 
 # set to "yes" to enable patching
 # we don't apply patches until we move to a vanilla ffmpeg tarball
@@ -68,6 +68,7 @@ $(PLATFORM): $(TARBALLS_LOCATION)/$(ARCHIVE) $(DEPS)
 	rm -rf $(PLATFORM); mkdir -p $(PLATFORM)
 	cd $(PLATFORM); $(ARCHIVE_TOOL) $(ARCHIVE_TOOL_FLAGS) $(TARBALLS_LOCATION)/$(ARCHIVE)
 	cd $(PLATFORM); sed -i".bak" -e "s%pkg_config_default=pkg-config%export PKG_CONFIG_LIBDIR=$(PREFIX)/lib/pkgconfig \&\& pkg_config_default=$(NATIVEPREFIX)/bin/pkg-config%" configure
+	cd $(PLATFORM); patch -p3 < ../ffmpeg_Speed_up_wtv_index_creation.patch
 	cd $(PLATFORM);\
 	CFLAGS="$(CFLAGS)" CXXFLAGS="$(CXXFLAGS)" CPPFLAGS="$(CPPFLAGS)" LDFLAGS="$(LDFLAGS)" \
 	./configure $(ffmpg_config)
diff --git a/tools/depends/target/ffmpeg/ffmpeg_Speed_up_wtv_index_creation.patch b/tools/depends/target/ffmpeg/ffmpeg_Speed_up_wtv_index_creation.patch
new file mode 100644
index 0000000..4ac5636
--- /dev/null
+++ b/tools/depends/target/ffmpeg/ffmpeg_Speed_up_wtv_index_creation.patch
@@ -0,0 +1,47 @@
+commit 0e7427498cb1131671f6fe9d054245ae7e5a36f5
+Author: popcornmix <popcornmix@gmail.com>
+Date:   Tue Mar 25 19:43:07 2014 +0000
+
+    [ffmpeg] Speed up wtv index creation
+
+    The index creation is O(N^2) with number of entries (typically thousands).
+    On a Pi this can take more than 60 seconds to execute for a recording of a few hours.
+
+    By replacing with an O(N) loop, this takes virtually zero time
+
+diff --git a/lib/ffmpeg/libavformat/wtvdec.c b/lib/ffmpeg/libavformat/wtvdec.c
+index e423370..70898bd 100644
+--- a/lib/ffmpeg/libavformat/wtvdec.c
++++ b/lib/ffmpeg/libavformat/wtvdec.c
+@@ -980,21 +980,23 @@ static int read_header(AVFormatContext *s)
+                 pb = wtvfile_open(s, root, root_size, ff_timeline_table_0_entries_Events_le16);
+                 if (pb) {
+                     int i;
++                    AVIndexEntry *e = wtv->index_entries;
++                    AVIndexEntry *e_end = wtv->index_entries + wtv->nb_index_entries - 1;
++                    uint64_t last_position = 0;
+                     while (1) {
+                         uint64_t frame_nb = avio_rl64(pb);
+                         uint64_t position = avio_rl64(pb);
++                        while (frame_nb > e->size && e <= e_end) {
++                           e->pos = last_position;
++                           e++;
++                        }
+                         if (avio_feof(pb))
+                             break;
+-                        for (i = wtv->nb_index_entries - 1; i >= 0; i--) {
+-                            AVIndexEntry *e = wtv->index_entries + i;
+-                            if (frame_nb > e->size)
+-                                break;
+-                            if (position > e->pos)
+-                                e->pos = position;
+-                        }
++                        last_position = position;
+                     }
++                    e_end->pos = last_position;
+                     wtvfile_close(pb);
+-                    st->duration = wtv->index_entries[wtv->nb_index_entries - 1].timestamp;
++                    st->duration = e_end->timestamp;
+                 }
+             }
+         }

From 2090df50f7e9b1f277ce66745e7763bf0dddfd94 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sat, 8 Mar 2014 15:36:06 +0000
Subject: [PATCH 03/46] [hifiberry] Hack: force it to be recognised as IEC958
 capable to enable passthrough options

---
 xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp b/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp
index e22db7a..0120bd5 100644
--- a/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp
+++ b/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp
@@ -1342,6 +1342,10 @@ void CAESinkALSA::EnumerateDevice(AEDeviceInfoList &list, const std::string &dev
     if (snd_card_get_name(cardNr, &cardName) == 0)
       info.m_displayName = cardName;
 
+    // hack: hifiberry digi doesn't correctly report as iec958 device. Needs fixing in kernel driver
+    if (info.m_displayName == "snd_rpi_hifiberry_digi")
+      info.m_deviceType = AE_DEVTYPE_IEC958;
+
     if (info.m_deviceType == AE_DEVTYPE_HDMI && info.m_displayName.size() > 5 &&
         info.m_displayName.substr(info.m_displayName.size()-5) == " HDMI")
     {

From 3cd50925e1ec4d41c804fc85e237259540781a19 Mon Sep 17 00:00:00 2001
From: Ben Avison <bavison@riscosopen.org>
Date: Thu, 1 May 2014 16:28:39 +0100
Subject: [PATCH 04/46] Improved file buffering in CArchive

Even though memcpy is typically inlined by the compiler into byte/word loads
and stores (at least for release builds), the frequency with which 1, 2 and 4
byte loads/stores are encountered in cases where the size is *not*
determinable at compile time is still high enough that it's worth handling
these specially. On the ARM1176JZF-S in the Raspberry Pi, this improves the
total time to open a library (in the case where it's fetched from a CArchive)
by around 4%.

It should be noted that this code uses 16-bit and 32-bit word loads and
stores that are not necessarily aligned to their respective widths. It is
possible that there are some architectures out there which do not support
this, although all ARMs since ARMv6 have supported it (and ARMs earlier than
that are probably not powerful enough to be good targets for XBMC).
---
 xbmc/utils/Archive.h | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

diff --git a/xbmc/utils/Archive.h b/xbmc/utils/Archive.h
index 6ed0f8f..8506d95 100644
--- a/xbmc/utils/Archive.h
+++ b/xbmc/utils/Archive.h
@@ -154,9 +154,17 @@ class CArchive
      * than waiting until we attempt to put more data into an already full buffer */
     if (m_BufferRemain > size)
     {
+      switch (size)
+      {
+      case 1: *m_BufferPos++ = *ptr; m_BufferRemain--; break;
+      case 2: *(uint16_t *) m_BufferPos = *(const uint16_t *) ptr; m_BufferPos += 2; m_BufferRemain -= 2; break;
+      case 4: *(uint32_t *) m_BufferPos = *(const uint32_t *) ptr; m_BufferPos += 4; m_BufferRemain -= 4; break;
+      default:
       memcpy(m_BufferPos, ptr, size);
       m_BufferPos += size;
       m_BufferRemain -= size;
+      break;
+      }
       return *this;
     }
     else
@@ -171,9 +179,17 @@ class CArchive
     /* Note, refilling the buffer is deferred until we know we need to read more from it */
     if (m_BufferRemain >= size)
     {
+      switch (size)
+      {
+      case 1: *ptr = *m_BufferPos++; m_BufferRemain--; break;
+      case 2: *(uint16_t *) ptr = *(const uint16_t *) m_BufferPos; m_BufferPos += 2; m_BufferRemain -= 2; break;
+      case 4: *(uint32_t *) ptr = *(const uint32_t *) m_BufferPos; m_BufferPos += 4; m_BufferRemain -= 4; break;
+      default:
       memcpy(ptr, m_BufferPos, size);
       m_BufferPos += size;
       m_BufferRemain -= size;
+      break;
+      }
       return *this;
     }
     else

From 000f36eb77b8b17829f5b9415b5ca1490730f9ab Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 12 Aug 2014 00:31:36 +0100
Subject: [PATCH 05/46] [omxcodec] Don't force software codec with dvds

---
 xbmc/cores/dvdplayer/DVDPlayer.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/xbmc/cores/dvdplayer/DVDPlayer.cpp b/xbmc/cores/dvdplayer/DVDPlayer.cpp
index 5e0ad2b..b670ed0 100644
--- a/xbmc/cores/dvdplayer/DVDPlayer.cpp
+++ b/xbmc/cores/dvdplayer/DVDPlayer.cpp
@@ -3416,7 +3416,9 @@ bool CDVDPlayer::OpenVideoStream(CDVDStreamInfo& hint, bool reset)
       hint.aspect = aspect;
       hint.forced_aspect = true;
     }
+#ifndef TARGET_RASPBERRY_PI
     hint.software = true;
+#endif
   }
   else if (m_pInputStream && m_pInputStream->IsStreamType(DVDSTREAM_TYPE_PVRMANAGER))
   {

From 463622a739ccca7a9660b8f416a77478fbe3861e Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sun, 10 Aug 2014 16:45:16 +0100
Subject: [PATCH 06/46] filesystem: Make support of browsing into archives
 optional

The ability to browse, scan and play content in archives can cause problems on low powered/low memory devices.
It's quite common to see reports of a large rar file that causes xbmc to crash with an out-of-memory error when browsing or scanning.
It also can be slow as any archive in the directory is opened and extracted.

This causes issues for people who scan library with archives disabled, then subsequently enable it.
The library has the .rar files in which don't play without removing and re-adding.

We'll let people who don't use archives disable it manually
---
 addons/resource.language.en_gb/resources/strings.po | 9 +++++++++
 system/settings/settings.xml                        | 5 +++++
 xbmc/filesystem/FileDirectoryFactory.cpp            | 4 ++++
 3 files changed, 18 insertions(+)

diff --git a/addons/resource.language.en_gb/resources/strings.po b/addons/resource.language.en_gb/resources/strings.po
index 24103f4..c0edab1 100644
--- a/addons/resource.language.en_gb/resources/strings.po
+++ b/addons/resource.language.en_gb/resources/strings.po
@@ -16595,6 +16595,15 @@ msgstr ""
 #: system/settings/rbp.xml
 msgctxt "#38010"
 msgid "GPU accelerated"
+
+#: system/settings/settings.xml
+msgctxt "#38020"
+msgid "Support browsing into archives"
+msgstr ""
+
+#: system/settings/settings.xml
+msgctxt "#38021"
+msgid "Allow viewing and playing files in archives (e.g. zip, rar)"
 msgstr ""
 
 #. Setting #38011 "Videos -> Library -> Show All Items entry"
diff --git a/system/settings/settings.xml b/system/settings/settings.xml
index d1a8e1c..a780a43 100644
--- a/system/settings/settings.xml
+++ b/system/settings/settings.xml
@@ -304,6 +304,11 @@
           <default>false</default>
           <control type="toggle" />
         </setting>
+        <setting id="filelists.browsearchives" type="boolean" label="38020" help="38021">
+          <level>1</level>
+          <default>true</default>
+          <control type="toggle" />
+        </setting>
       </group>
     </category>
     <category id="screensaver" label="360" help="36128">
diff --git a/xbmc/filesystem/FileDirectoryFactory.cpp b/xbmc/filesystem/FileDirectoryFactory.cpp
index 5af92e7..568a1a8 100644
--- a/xbmc/filesystem/FileDirectoryFactory.cpp
+++ b/xbmc/filesystem/FileDirectoryFactory.cpp
@@ -39,6 +39,7 @@
 #include "playlists/PlayListFactory.h"
 #include "Directory.h"
 #include "File.h"
+#include "settings/Settings.h"
 #include "FileItem.h"
 #include "utils/StringUtils.h"
 #include "URL.h"
@@ -112,6 +113,8 @@ IFileDirectory* CFileDirectoryFactory::Create(const CURL& url, CFileItem* pItem,
     return NULL;
   }
 #endif
+  if (CSettings::Get().GetBool("filelists.browsearchives"))
+  {
   if (url.IsFileType("zip"))
   {
     CURL zipURL = URIUtils::CreateArchivePath("zip", url);
@@ -185,6 +188,7 @@ IFileDirectory* CFileDirectoryFactory::Create(const CURL& url, CFileItem* pItem,
     }
     return NULL;
   }
+  }
   if (url.IsFileType("xsp"))
   { // XBMC Smart playlist - just XML renamed to XSP
     // read the name of the playlist in

From 0d3930823920c47d3b83b0e14c9238c9b468b2c3 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sun, 10 Aug 2014 18:58:37 +0100
Subject: [PATCH 07/46] confluence: Remove media-overlay.jpg for when video is
 backgrounded

---
 addons/skin.confluence/720p/IncludesBackgroundBuilding.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/addons/skin.confluence/720p/IncludesBackgroundBuilding.xml b/addons/skin.confluence/720p/IncludesBackgroundBuilding.xml
index df4b303..af4ac86 100644
--- a/addons/skin.confluence/720p/IncludesBackgroundBuilding.xml
+++ b/addons/skin.confluence/720p/IncludesBackgroundBuilding.xml
@@ -41,7 +41,7 @@
 			<top>0</top>
 			<width>1280</width>
 			<height>720</height>
-			<texture>special://skin/backgrounds/media-overlay.jpg</texture>
+			<!--texture>special://skin/backgrounds/media-overlay.jpg</texture-->
 			<visible>[Player.HasVideo + !Skin.HasSetting(ShowBackgroundVideo)] + !Window.IsVisible(TVChannels) + !Window.IsVisible(RadioChannels)</visible>
 			<include>VisibleFadeEffect</include>
 		</control>

From 373639d4aba62c827f0dc8833e35da942a38fd6a Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Mon, 27 Oct 2014 13:06:57 +0000
Subject: [PATCH 08/46] [rbp] Make cachemembuffersize default depend on memory
 size

---
 xbmc/linux/RBP.cpp                 | 10 ++++++++++
 xbmc/linux/RBP.h                   |  1 +
 xbmc/settings/AdvancedSettings.cpp | 12 +++++++++++-
 3 files changed, 22 insertions(+), 1 deletion(-)

diff --git a/xbmc/linux/RBP.cpp b/xbmc/linux/RBP.cpp
index 59dd1da..68d2694 100644
--- a/xbmc/linux/RBP.cpp
+++ b/xbmc/linux/RBP.cpp
@@ -23,6 +23,7 @@
 
 #include <assert.h>
 #include "settings/Settings.h"
+#include "settings/AdvancedSettings.h"
 #include "utils/log.h"
 
 #include "cores/omxplayer/OMXImage.h"
@@ -43,6 +44,12 @@ CRBP::~CRBP()
   delete m_DllBcmHost;
 }
 
+void CRBP::InitializeSettings()
+{
+  if (m_initialized && g_advancedSettings.m_cacheMemBufferSize == ~0U)
+    g_advancedSettings.m_cacheMemBufferSize = m_arm_mem < 256 ? 1024 * 1024 * 2 : 1024 * 1024 * 20;
+}
+
 bool CRBP::Initialize()
 {
   CSingleLock lock (m_critSection);
@@ -82,6 +89,8 @@ bool CRBP::Initialize()
   if (!m_gui_resolution_limit)
     m_gui_resolution_limit = m_gpu_mem < 128 ? 720:1080;
 
+  InitializeSettings();
+
   g_OMXImage.Initialize();
   m_omx_image_init = true;
   return true;
@@ -94,6 +103,7 @@ void CRBP::LogFirmwareVerison()
   response[sizeof(response) - 1] = '\0';
   CLog::Log(LOGNOTICE, "Raspberry PI firmware version: %s", response);
   CLog::Log(LOGNOTICE, "ARM mem: %dMB GPU mem: %dMB MPG2:%d WVC1:%d", m_arm_mem, m_gpu_mem, m_codec_mpg2_enabled, m_codec_wvc1_enabled);
+  CLog::Log(LOGNOTICE, "cacheMemBufferSize: %dMB",  g_advancedSettings.m_cacheMemBufferSize >> 20);
   m_DllBcmHost->vc_gencmd(response, sizeof response, "get_config int");
   response[sizeof(response) - 1] = '\0';
   CLog::Log(LOGNOTICE, "Config:\n%s", response);
diff --git a/xbmc/linux/RBP.h b/xbmc/linux/RBP.h
index 9559914..7fc8b42 100644
--- a/xbmc/linux/RBP.h
+++ b/xbmc/linux/RBP.h
@@ -48,6 +48,7 @@ class CRBP
   ~CRBP();
 
   bool Initialize();
+  void InitializeSettings();
   void LogFirmwareVerison();
   void Deinitialize();
   int GetArmMem() { return m_arm_mem; }
diff --git a/xbmc/settings/AdvancedSettings.cpp b/xbmc/settings/AdvancedSettings.cpp
index 2e3282c..d1606a2 100644
--- a/xbmc/settings/AdvancedSettings.cpp
+++ b/xbmc/settings/AdvancedSettings.cpp
@@ -43,6 +43,9 @@
 #if defined(TARGET_DARWIN_IOS)
 #include "osx/DarwinUtils.h"
 #endif
+#if defined(TARGET_RASPBERRY_PI)
+#include "linux/RBP.h"
+#endif
 
 using namespace ADDON;
 using namespace XFILE;
@@ -350,7 +353,12 @@ void CAdvancedSettings::Initialize()
   m_bPVRAutoScanIconsUserSet       = false;
   m_iPVRNumericChannelSwitchTimeout = 1000;
 
+#ifdef TARGET_RASPBERRY_PI
+  // want default to be memory dependent, but interface to gpu not available yet, so set in RBP.cpp
+  m_cacheMemBufferSize = ~0;
+#else
   m_cacheMemBufferSize = 1024 * 1024 * 20;
+#endif
   m_networkBufferMode = 0; // Default (buffer all internet streams/filesystems)
   // the following setting determines the readRate of a player data
   // as multiply of the default data read rate
@@ -405,7 +413,9 @@ void CAdvancedSettings::Initialize()
   #endif
 
   m_userAgent = g_sysinfo.GetUserAgent();
-
+#ifdef TARGET_RASPBERRY_PI
+  g_RBP.InitializeSettings();
+#endif
   m_initialized = true;
 }
 

From ca75dc7b4ec3bf487520d4087a7d52cffe47cf37 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Mon, 22 Jul 2013 23:19:15 +0100
Subject: [PATCH 09/46] [confluence] Use animated gif as a cheaper working
 spinner

---
 addons/skin.confluence/720p/DialogBusy.xml |   4 ++--
 addons/skin.confluence/media/busy.gif      | Bin 0 -> 3199 bytes
 2 files changed, 2 insertions(+), 2 deletions(-)
 create mode 100644 addons/skin.confluence/media/busy.gif

diff --git a/addons/skin.confluence/720p/DialogBusy.xml b/addons/skin.confluence/720p/DialogBusy.xml
index e0419ed..313c27f 100644
--- a/addons/skin.confluence/720p/DialogBusy.xml
+++ b/addons/skin.confluence/720p/DialogBusy.xml
@@ -25,9 +25,9 @@
 				<top>20</top>
 				<width>32</width>
 				<height>32</height>
-				<texture>busy.png</texture>
+				<texture>busy.gif</texture>
 				<aspectratio>keep</aspectratio>
-				<animation effect="rotate" start="0" end="360" center="36,36" time="900" loop="true" condition="true">conditional</animation>
+				<!--animation effect="rotate" start="0" end="360" center="36,36" time="900" loop="true" condition="true">conditional</animation-->
 			</control>
 			<control type="label">
 				<description>Busy label</description>
diff --git a/addons/skin.confluence/media/busy.gif b/addons/skin.confluence/media/busy.gif
new file mode 100644
index 0000000000000000000000000000000000000000..f856ed0b44fdc7e9b0520c7e39a9bebc04136897
GIT binary patch
literal 3199
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

literal 0
HcmV?d00001


From b00d3cb1b31193ea6a3eb0da6733b2c73c3fb279 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Fri, 30 May 2014 14:58:43 +0100
Subject: [PATCH 10/46] [settings] Experiment: Report DESKTOP resolution in
 video settings

---
 xbmc/settings/DisplaySettings.cpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/xbmc/settings/DisplaySettings.cpp b/xbmc/settings/DisplaySettings.cpp
index 9fb5b8e..25d6ad1 100644
--- a/xbmc/settings/DisplaySettings.cpp
+++ b/xbmc/settings/DisplaySettings.cpp
@@ -674,6 +674,9 @@ void CDisplaySettings::SettingOptionsResolutionsFiller(const CSetting *setting,
     vector<RESOLUTION_WHR> resolutions = g_Windowing.ScreenResolutions(info.iScreen, info.fRefreshRate);
     for (vector<RESOLUTION_WHR>::const_iterator resolution = resolutions.begin(); resolution != resolutions.end(); ++resolution)
     {
+if (resolution->ResInfo_Index == RES_DESKTOP)
+      list.push_back(make_pair(StringUtils::Format("DESKTOP"), resolution->ResInfo_Index));
+else
       list.push_back(make_pair(
         StringUtils::Format("%dx%d%s", resolution->width, resolution->height,
                             ModeFlagsToString(resolution->flags, false).c_str()),

From 2051079256322d54db74b9b3bfc6c55109d9b0da Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 9 Sep 2014 12:04:26 +0100
Subject: [PATCH 11/46] egl: Treat unknown display aspect ratio as square pixel

---
 xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp b/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
index bda7430..68fc647 100644
--- a/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
+++ b/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
@@ -447,7 +447,7 @@ bool CEGLNativeTypeRaspberryPI::ProbeResolutions(std::vector<RESOLUTION_INFO> &r
       m_desktopRes.iScreenWidth = tv_state.display.hdmi.width;
       m_desktopRes.iScreenHeight= tv_state.display.hdmi.height;
       m_desktopRes.dwFlags      = MAKEFLAGS(tv_state.display.hdmi.group, tv_state.display.hdmi.mode, tv_state.display.hdmi.scan_mode);
-      m_desktopRes.fPixelRatio  = get_display_aspect_ratio((HDMI_ASPECT_T)tv_state.display.hdmi.display_options.aspect) / ((float)m_desktopRes.iScreenWidth / (float)m_desktopRes.iScreenHeight);
+      m_desktopRes.fPixelRatio  = tv_state.display.hdmi.display_options.aspect == 0 ? 1.0f : get_display_aspect_ratio((HDMI_ASPECT_T)tv_state.display.hdmi.display_options.aspect) / ((float)m_desktopRes.iScreenWidth / (float)m_desktopRes.iScreenHeight);
       // Also add 3D flags
       if (tv_state.display.hdmi.format_3d == HDMI_3D_FORMAT_SBS_HALF)
       {
@@ -474,7 +474,7 @@ bool CEGLNativeTypeRaspberryPI::ProbeResolutions(std::vector<RESOLUTION_INFO> &r
       m_desktopRes.iScreenHeight= tv_state.display.sdtv.height;
       m_desktopRes.dwFlags      = D3DPRESENTFLAG_INTERLACED;
       m_desktopRes.fRefreshRate = (float)tv_state.display.sdtv.frame_rate;
-      m_desktopRes.fPixelRatio  = get_display_aspect_ratio((SDTV_ASPECT_T)tv_state.display.sdtv.display_options.aspect) / ((float)m_desktopRes.iScreenWidth / (float)m_desktopRes.iScreenHeight);
+      m_desktopRes.fPixelRatio  = tv_state.display.hdmi.display_options.aspect == 0 ? 1.0f : get_display_aspect_ratio((SDTV_ASPECT_T)tv_state.display.sdtv.display_options.aspect) / ((float)m_desktopRes.iScreenWidth / (float)m_desktopRes.iScreenHeight);
     }
 
     SetResolutionString(m_desktopRes);

From d256371c98c50b9f2e1ff666bac878cee430fd9b Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Fri, 19 Sep 2014 11:54:49 +0100
Subject: [PATCH 12/46] [dvdplayer/rbp] Add pi specific option to maintain
 vsync with pll adjustment

New A/V sync option in settings/video/playback to do "Adjust PLL".
This uses video clock (so perfect video syncing) but avoids having to resample
or drop/dupe audio packets which is normally required.

Needed updated firmware

[dvdplayeraudio] Add advancedsetting for configuring max pll adjustment

[dvdplayer] Allow pll adjustment to go higher, but tail off more gradually
---
 .../resource.language.en_gb/resources/strings.po   | 24 ++++++++++++++-
 system/settings/settings.xml                       | 14 +++++++++
 xbmc/cores/AudioEngine/Utils/AEUtil.h              |  3 +-
 xbmc/cores/dvdplayer/DVDPlayerAudio.cpp            | 36 +++++++++++++++++++---
 xbmc/cores/dvdplayer/DVDPlayerAudio.h              |  3 ++
 xbmc/linux/RBP.cpp                                 | 14 +++++++++
 xbmc/linux/RBP.h                                   |  1 +
 xbmc/settings/AdvancedSettings.cpp                 |  2 ++
 xbmc/settings/AdvancedSettings.h                   |  1 +
 9 files changed, 91 insertions(+), 7 deletions(-)

diff --git a/addons/resource.language.en_gb/resources/strings.po b/addons/resource.language.en_gb/resources/strings.po
index c0edab1..0c12fb9 100644
--- a/addons/resource.language.en_gb/resources/strings.po
+++ b/addons/resource.language.en_gb/resources/strings.po
@@ -6337,7 +6337,22 @@ msgctxt "#13459"
 msgid "Use OMXPlayer for decoding of video files."
 msgstr ""
 
-#empty strings from id 13460 to 13504
+#empty strings from id 13460 to 13499
+
+#: system/settings/settings.xml
+msgctxt "#13500"
+msgid "A/V sync method"
+msgstr ""
+
+#: system/settings/settings.xml
+msgctxt "#13503"
+msgid "Resample audio"
+msgstr ""
+
+#: system/settings/settings.xml
+msgctxt "#13504"
+msgid "Adjust PLL"
+msgstr ""
 
 #: system/settings/settings.xml
 msgctxt "#13505"
@@ -16641,3 +16656,10 @@ msgstr ""
 msgctxt "#38016"
 msgid "%d fps"
 msgstr ""
+
+#. Description of setting "Videos -> Playback -> A/V sync method" with label #13500
+#: system/settings/settings.xml
+msgctxt "#38006"
+msgid "Audio has to stay in sync, this can either be done by resampling, or adjusting the PLL"
+msgstr ""
+
diff --git a/system/settings/settings.xml b/system/settings/settings.xml
index a780a43..aff0bf8 100644
--- a/system/settings/settings.xml
+++ b/system/settings/settings.xml
@@ -572,6 +572,20 @@
           <default>false</default>
           <control type="toggle" />
         </setting>
+        <setting id="videoplayer.synctype" type="integer" parent="videoplayer.usedisplayasclock" label="13500" help="38006">
+          <level>2</level>
+          <default>2</default> <!-- SYNC_RESAMPLE -->
+          <constraints>
+            <options>
+              <option label="13503">2</option> <!-- SYNC_RESAMPLE -->
+              <option label="13504">3</option> <!-- SYNC_PLLADJUST -->
+            </options>
+          </constraints>
+          <dependencies>
+            <dependency type="enable" setting="videoplayer.usedisplayasclock" operator="is">true</dependency>
+          </dependencies>
+          <control type="spinner" format="string" />
+        </setting>
         <setting id="videoplayer.errorinaspect" type="integer" label="22021" help="36170">
           <level>2</level>
           <default>0</default>
diff --git a/xbmc/cores/AudioEngine/Utils/AEUtil.h b/xbmc/cores/AudioEngine/Utils/AEUtil.h
index 782a9ba..3e0390c 100644
--- a/xbmc/cores/AudioEngine/Utils/AEUtil.h
+++ b/xbmc/cores/AudioEngine/Utils/AEUtil.h
@@ -57,7 +57,8 @@ enum AVSync
 {
   SYNC_DISCON   = 0,
   SYNC_SKIPDUP,
-  SYNC_RESAMPLE
+  SYNC_RESAMPLE,
+  SYNC_PLLADJUST
 };
 
 struct AEDelayStatus
diff --git a/xbmc/cores/dvdplayer/DVDPlayerAudio.cpp b/xbmc/cores/dvdplayer/DVDPlayerAudio.cpp
index a429e11..2871ae2 100644
--- a/xbmc/cores/dvdplayer/DVDPlayerAudio.cpp
+++ b/xbmc/cores/dvdplayer/DVDPlayerAudio.cpp
@@ -24,6 +24,7 @@
 #include "DVDCodecs/Audio/DVDAudioCodec.h"
 #include "DVDCodecs/DVDFactoryCodec.h"
 #include "settings/Settings.h"
+#include "settings/AdvancedSettings.h"
 #include "video/VideoReferenceClock.h"
 #include "utils/log.h"
 #include "utils/MathUtils.h"
@@ -111,6 +112,9 @@ CDVDPlayerAudio::CDVDPlayerAudio(CDVDClock* pClock, CDVDMessageQueue& parent)
   m_started = false;
   m_silence = false;
   m_resampleratio = 1.0;
+  m_plladjust = 1.0;
+  m_last_plladjust = 1.0;
+  m_last_error = 0.0;
   m_synctype = SYNC_DISCON;
   m_setsynctype = SYNC_DISCON;
   m_prevsynctype = -1;
@@ -184,11 +188,13 @@ void CDVDPlayerAudio::OpenStream( CDVDStreamInfo &hints, CDVDAudioCodec* codec )
   m_synctype = SYNC_DISCON;
   m_setsynctype = SYNC_DISCON;
   if (CSettings::Get().GetBool("videoplayer.usedisplayasclock"))
-    m_setsynctype = SYNC_RESAMPLE;
+    m_setsynctype = CSettings::Get().GetInt("videoplayer.synctype");
   m_prevsynctype = -1;
 
   m_error = 0;
   m_errors.Flush();
+  m_plladjust = 1.0;
+  m_last_plladjust = 1.0;
   m_integral = 0;
   m_prevskipped = false;
   m_syncclock = true;
@@ -231,7 +237,6 @@ void CDVDPlayerAudio::CloseStream(bool bWaitForBuffers)
 
   // uninit queue
   m_messageQueue.End();
-
   CLog::Log(LOGNOTICE, "Deleting audio codec");
   if (m_pAudioCodec)
   {
@@ -484,7 +489,11 @@ void CDVDPlayerAudio::UpdatePlayerInfo()
   //print the inverse of the resample ratio, since that makes more sense
   //if the resample ratio is 0.5, then we're playing twice as fast
   if (m_synctype == SYNC_RESAMPLE)
-    s << ", rr:" << fixed << setprecision(5) << 1.0 / m_resampleratio;
+    s << ", rr:" << fixed << setprecision(5) << 1.0 / m_resampleratio << ", err:" << fixed << setprecision(1) << m_last_error * 1e-3 << "ms";
+  if (m_synctype == SYNC_SKIPDUP)
+    s << ", err:" << fixed << setprecision(1) << m_last_error * 1e-3 << "ms";
+  if (m_synctype == SYNC_PLLADJUST)
+    s << ", pll:" << fixed << setprecision(5) << m_last_plladjust << ", err:" << fixed << setprecision(1) << m_last_error * 1e-3 << "ms";
 
   s << ", att:" << fixed << setprecision(1) << log(GetCurrentAttenuation()) * 20.0f << " dB";
 
@@ -639,8 +648,8 @@ void CDVDPlayerAudio::SetSyncType(bool passthrough)
 
   if (m_synctype != m_prevsynctype)
   {
-    const char *synctypes[] = {"clock feedback", "skip/duplicate", "resample", "invalid"};
-    int synctype = (m_synctype >= 0 && m_synctype <= 2) ? m_synctype : 3;
+    const char *synctypes[] = {"clock feedback", "skip/duplicate", "resample", "pll adjust", "invalid"};
+    int synctype = (m_synctype >= 0 && m_synctype <= 3) ? m_synctype : 4;
     CLog::Log(LOGDEBUG, "CDVDPlayerAudio:: synctype set to %i: %s", m_synctype, synctypes[synctype]);
     m_prevsynctype = m_synctype;
   }
@@ -750,7 +759,19 @@ void CDVDPlayerAudio::HandleSyncError(double duration)
       proportional = m_error / DVD_TIME_BASE / proportionaldiv;
     }
     m_resampleratio = 1.0 / m_pClock->GetClockSpeed() + proportional + m_integral;
+    CLog::Log(LOGDEBUG, "CDVDPlayerAudio::%s rr:%.5f error:%.3fms", __FUNCTION__, m_resampleratio, m_error * 1e-3);
+  }
+  else if (m_synctype == SYNC_PLLADJUST)
+  {
+#if defined(TARGET_RASPBERRY_PI)
+    double e = std::max(std::min(m_error / DVD_MSEC_TO_TIME(50), 1.0), -1.0);
+    double adjust = g_advancedSettings.m_maxPllAdjust * 1e-6;
+    m_plladjust = 1.0 + e * adjust;
+    m_last_plladjust = g_RBP.AdjustHDMIClock(m_plladjust);
+    CLog::Log(LOGDEBUG, "CDVDPlayerAudio::%s pll:%.5f (%.5f) error:%.6f e:%.6f a:%f", __FUNCTION__, m_plladjust, m_last_plladjust, m_error, e * adjust, adjust );
+#endif
   }
+  m_last_error = m_error;
 }
 
 bool CDVDPlayerAudio::OutputPacket(DVDAudioFrame &audioframe)
@@ -803,6 +824,7 @@ bool CDVDPlayerAudio::OutputPacket(DVDAudioFrame &audioframe)
     {
       m_dvdAudio.AddPackets(audioframe);
     }
+    m_plladjust = 1.0;
   }
   else if (m_synctype == SYNC_DISCON)
   {
@@ -837,6 +859,10 @@ bool CDVDPlayerAudio::OutputPacket(DVDAudioFrame &audioframe)
     m_dvdAudio.SetResampleRatio(m_resampleratio);
     m_dvdAudio.AddPackets(audioframe);
   }
+  else if (m_synctype == SYNC_PLLADJUST)
+  {
+    m_dvdAudio.AddPackets(audioframe);
+  }
 
   return true;
 }
diff --git a/xbmc/cores/dvdplayer/DVDPlayerAudio.h b/xbmc/cores/dvdplayer/DVDPlayerAudio.h
index 1122a1d..7389754 100644
--- a/xbmc/cores/dvdplayer/DVDPlayerAudio.h
+++ b/xbmc/cores/dvdplayer/DVDPlayerAudio.h
@@ -228,6 +228,9 @@ class CDVDPlayerAudio : public CThread, public IDVDStreamPlayerAudio
   bool   m_prevskipped;
   double m_maxspeedadjust;
   double m_resampleratio; //resample ratio when using SYNC_RESAMPLE, used for the codec info
+  double m_plladjust;    // for display using SYNC_PLLADJUST
+  double m_last_error;    // for display using SYNC_PLLADJUST
+  double m_last_plladjust;    // for display using SYNC_PLLADJUST
 
   struct SInfo
   {
diff --git a/xbmc/linux/RBP.cpp b/xbmc/linux/RBP.cpp
index 68d2694..096ea18 100644
--- a/xbmc/linux/RBP.cpp
+++ b/xbmc/linux/RBP.cpp
@@ -225,4 +225,18 @@ void CRBP::Deinitialize()
   m_initialized     = false;
   m_omx_initialized = false;
 }
+
+double CRBP::AdjustHDMIClock(double adjust)
+{
+  char response[80];
+  vc_gencmd(response, sizeof response, "hdmi_adjust_clock %f", adjust);
+  float new_adjust = 1.0f;
+  char *p = strchr(response, '=');
+  if (p)
+    new_adjust = atof(p+1);
+  CLog::Log(LOGDEBUG, "CRBP::%s(%.4f) = %.4f", __func__, adjust, new_adjust);
+  return new_adjust;
+}
+
+
 #endif
diff --git a/xbmc/linux/RBP.h b/xbmc/linux/RBP.h
index 7fc8b42..b422c89 100644
--- a/xbmc/linux/RBP.h
+++ b/xbmc/linux/RBP.h
@@ -64,6 +64,7 @@ class CRBP
   unsigned char *CaptureDisplay(int width, int height, int *stride, bool swap_red_blue, bool video_only = true);
   DllOMX *GetDllOMX() { return m_OMX ? m_OMX->GetDll() : NULL; }
   void WaitVsync();
+  double AdjustHDMIClock(double adjust);
 
 private:
   DllBcmHost *m_DllBcmHost;
diff --git a/xbmc/settings/AdvancedSettings.cpp b/xbmc/settings/AdvancedSettings.cpp
index d1606a2..344e91b 100644
--- a/xbmc/settings/AdvancedSettings.cpp
+++ b/xbmc/settings/AdvancedSettings.cpp
@@ -111,6 +111,7 @@ void CAdvancedSettings::Initialize()
   m_audioHeadRoom = 0;
   m_ac3Gain = 12.0f;
   m_audioApplyDrc = -1.0f;
+  m_maxPllAdjust = 1000;
   m_dvdplayerIgnoreDTSinWAV = false;
 
   //default hold time of 25 ms, this allows a 20 hertz sine to pass undistorted
@@ -473,6 +474,7 @@ void CAdvancedSettings::ParseSettingsFile(const std::string &file)
   if (pElement)
   {
     XMLUtils::GetFloat(pElement, "ac3downmixgain", m_ac3Gain, -96.0f, 96.0f);
+    XMLUtils::GetInt(pElement, "maxplladjust", m_maxPllAdjust, 0, 1000000);
     XMLUtils::GetInt(pElement, "headroom", m_audioHeadRoom, 0, 12);
     XMLUtils::GetString(pElement, "defaultplayer", m_audioDefaultPlayer);
     // 101 on purpose - can be used to never automark as watched
diff --git a/xbmc/settings/AdvancedSettings.h b/xbmc/settings/AdvancedSettings.h
index 7df1bf7..732b69d 100644
--- a/xbmc/settings/AdvancedSettings.h
+++ b/xbmc/settings/AdvancedSettings.h
@@ -141,6 +141,7 @@ class CAdvancedSettings : public ISettingCallback, public ISettingsHandler
 
     int m_audioHeadRoom;
     float m_ac3Gain;
+    int m_maxPllAdjust;
     std::string m_audioDefaultPlayer;
     float m_audioPlayCountMinimumPercent;
     bool m_dvdplayerIgnoreDTSinWAV;

From be1290a3c2b25b68ea6596148770a5ca2ad4b383 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sat, 27 Sep 2014 15:32:37 +0100
Subject: [PATCH 13/46] [dvdplayer] exerimental: don't raise priority of audio
 thread

---
 xbmc/cores/dvdplayer/DVDPlayer.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/xbmc/cores/dvdplayer/DVDPlayer.cpp b/xbmc/cores/dvdplayer/DVDPlayer.cpp
index b670ed0..b8716d9 100644
--- a/xbmc/cores/dvdplayer/DVDPlayer.cpp
+++ b/xbmc/cores/dvdplayer/DVDPlayer.cpp
@@ -3401,7 +3401,11 @@ bool CDVDPlayer::OpenAudioStream(CDVDStreamInfo& hint, bool reset)
   m_dvdPlayerAudio->SendMessage(new CDVDMsg(CDVDMsg::PLAYER_STARTED), 1);
 
   /* audio normally won't consume full cpu, so let it have prio */
+#ifdef TARGET_RASPBERRY_PI
+  m_dvdPlayerAudio->SetPriority(GetPriority());
+#else
   m_dvdPlayerAudio->SetPriority(GetPriority()+1);
+#endif
   return true;
 }
 

From e6335a42d1628bcb984969a7d60ff35b00bcd5b2 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Wed, 24 Sep 2014 23:13:52 +0100
Subject: [PATCH 14/46] [audio] Add settings option to boost centre channel
 when downmixing

This allows a dB volume increase to be added to centre channel.
This can help improve dialgue in the presence of background music/effects.
It can go up to 30dB for testing purposes, but value of 6 is probably more reasonable.
It is recommended to ensure "Normalise levels on downmix" is enabled when boosting by large values to avoid clipping.

Should work with Pi Sink (dvdplayer/paplayer) and omxplayer
---
 addons/resource.language.en_gb/resources/strings.po        | 14 ++++++++++++++
 system/settings/settings.xml                               | 12 ++++++++++++
 .../Engines/ActiveAE/ActiveAEResampleFFMPEG.cpp            |  7 +++++++
 .../AudioEngine/Engines/ActiveAE/ActiveAEResamplePi.cpp    |  6 ++++++
 xbmc/cores/omxplayer/OMXAudio.cpp                          |  6 ++++++
 5 files changed, 45 insertions(+)

diff --git a/addons/resource.language.en_gb/resources/strings.po b/addons/resource.language.en_gb/resources/strings.po
index 0c12fb9..809a5ac 100644
--- a/addons/resource.language.en_gb/resources/strings.po
+++ b/addons/resource.language.en_gb/resources/strings.po
@@ -16663,3 +16663,17 @@ msgctxt "#38006"
 msgid "Audio has to stay in sync, this can either be done by resampling, or adjusting the PLL"
 msgstr ""
 
+#: system/settings/settings.xml
+msgctxt "#38007"
+msgid "Boost centre channel when downmixing"
+msgstr ""
+
+#: system/settings/settings.xml
+msgctxt "#38008"
+msgid "Increase this value to make the dialogue louder compared to background sounds when downmixing multichannel audio"
+msgstr ""
+
+#: system/settings/settings.xml
+msgctxt "#38009"
+msgid "%i dB"
+msgstr ""
diff --git a/system/settings/settings.xml b/system/settings/settings.xml
index aff0bf8..f6ad877 100644
--- a/system/settings/settings.xml
+++ b/system/settings/settings.xml
@@ -2597,6 +2597,18 @@
           <default>true</default>
           <control type="toggle" />
         </setting>
+         <setting id="audiooutput.boostcenter" type="integer" label="38007" help="38008">
+          <level>2</level>
+          <default>0</default>
+          <constraints>
+            <minimum>0</minimum>
+            <step>1</step>
+            <maximum>30</maximum>
+          </constraints>
+          <control type="spinner" format="string">
+            <formatlabel>38009</formatlabel>
+          </control>
+        </setting>
         <setting id="audiooutput.processquality" type="integer" label="13505" help="36169">
           <requirement>HAS_AE_QUALITY_LEVELS</requirement>
           <level>2</level>
diff --git a/xbmc/cores/AudioEngine/Engines/ActiveAE/ActiveAEResampleFFMPEG.cpp b/xbmc/cores/AudioEngine/Engines/ActiveAE/ActiveAEResampleFFMPEG.cpp
index e4ddf9e..34d0152 100644
--- a/xbmc/cores/AudioEngine/Engines/ActiveAE/ActiveAEResampleFFMPEG.cpp
+++ b/xbmc/cores/AudioEngine/Engines/ActiveAE/ActiveAEResampleFFMPEG.cpp
@@ -20,6 +20,7 @@
 
 #include "cores/AudioEngine/Utils/AEUtil.h"
 #include "ActiveAEResampleFFMPEG.h"
+#include "settings/Settings.h"
 #include "utils/log.h"
 
 extern "C" {
@@ -105,6 +106,12 @@ bool CActiveAEResampleFFMPEG::Init(uint64_t dst_chan_layout, int dst_channels, i
   {
      av_opt_set_double(m_pContext, "rematrix_maxval", 1.0, 0);
   }
+  int boost_center = CSettings::Get().GetInt("audiooutput.boostcenter");
+  if (boost_center)
+  {
+    float gain = pow(10.0f, ((float)(-3 + boost_center))/20.0f);
+    av_opt_set_double(m_pContext, "center_mix_level", gain, 0);
+  }
 
   if (remapLayout)
   {
diff --git a/xbmc/cores/AudioEngine/Engines/ActiveAE/ActiveAEResamplePi.cpp b/xbmc/cores/AudioEngine/Engines/ActiveAE/ActiveAEResamplePi.cpp
index 7807149..759ba7b 100644
--- a/xbmc/cores/AudioEngine/Engines/ActiveAE/ActiveAEResamplePi.cpp
+++ b/xbmc/cores/AudioEngine/Engines/ActiveAE/ActiveAEResamplePi.cpp
@@ -164,6 +164,12 @@ bool CActiveAEResamplePi::Init(uint64_t dst_chan_layout, int dst_channels, int d
   {
     av_opt_set_double(m_pContext, "rematrix_maxval", 1.0, 0);
   }
+  int boost_center = CSettings::Get().GetInt("audiooutput.boostcenter");
+  if (boost_center)
+  {
+    float gain = pow(10.0f, ((float)(-3 + boost_center))/20.0f);
+    av_opt_set_double(m_pContext, "center_mix_level", gain, 0);
+  }
 
   if (remapLayout)
   {
diff --git a/xbmc/cores/omxplayer/OMXAudio.cpp b/xbmc/cores/omxplayer/OMXAudio.cpp
index f99c0e6..1911189 100644
--- a/xbmc/cores/omxplayer/OMXAudio.cpp
+++ b/xbmc/cores/omxplayer/OMXAudio.cpp
@@ -641,6 +641,12 @@ bool COMXAudio::Initialize(AEAudioFormat format, OMXClock *clock, CDVDStreamInfo
     {
        av_opt_set_double(m_pContext, "rematrix_maxval", 1.0, 0);
     }
+    int boost_center = CSettings::Get().GetInt("audiooutput.boostcenter");
+    if (boost_center)
+    {
+      float gain = pow(10.0f, ((float)(-3 + boost_center))/20.0f);
+      av_opt_set_double(m_pContext, "center_mix_level", gain, 0);
+    }
 
     // stereo upmix
     if (upmix && m_src_channels == 2 && m_dst_channels > 2)

From 13630d90f2e0845aed9a0fdf27f06c2578f739ae Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Mon, 27 Oct 2014 15:23:51 +0000
Subject: [PATCH 15/46] [rbp] Default extract thumbnails to false

It can take 80 seconds for a single file on a Pi. It can cause crashes with out-of-memory errors.
It genereates a lot of support issues. Best to default to disabled and let users enable it if they must
---
 system/settings/rbp.xml | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/system/settings/rbp.xml b/system/settings/rbp.xml
index 50fe36a..a54a4c4 100644
--- a/system/settings/rbp.xml
+++ b/system/settings/rbp.xml
@@ -35,6 +35,16 @@
         </setting>
       </group>
     </category>
+    <category id="myvideos">
+      <group id="1">
+        <setting id="myvideos.extractflags">
+          <default>false</default>
+        </setting>
+        <setting id="myvideos.extractthumb">
+          <default>false</default>
+        </setting>
+      </group>
+    </category>
   </section>
 
   <section id="system">

From 0953628989482938e31620cce126c4414d9c2d61 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 10 Feb 2015 15:29:16 +0000
Subject: [PATCH 16/46] [libcec] Add repeating keypress patch from popcornmix'
 repo

---
 tools/depends/target/libcec/Makefile         |   1 +
 tools/depends/target/libcec/popcornmix.patch | 859 +++++++++++++++++++++++++++
 2 files changed, 860 insertions(+)
 create mode 100644 tools/depends/target/libcec/popcornmix.patch

diff --git a/tools/depends/target/libcec/Makefile b/tools/depends/target/libcec/Makefile
index f54af9e..ddf9963 100644
--- a/tools/depends/target/libcec/Makefile
+++ b/tools/depends/target/libcec/Makefile
@@ -21,6 +21,7 @@ $(TARBALLS_LOCATION)/$(ARCHIVE):
 $(PLATFORM): $(TARBALLS_LOCATION)/$(ARCHIVE) $(DEPS)
 	rm -rf $(PLATFORM); mkdir -p $(PLATFORM)/build
 	cd $(PLATFORM); $(ARCHIVE_TOOL) $(ARCHIVE_TOOL_FLAGS) $(TARBALLS_LOCATION)/$(ARCHIVE)
+	cd $(PLATFORM); patch -p1 < ../popcornmix.patch
 	cd $(PLATFORM)/build; $(CMAKE) -DBUILD_SHARED_LIBS=1 -DSKIP_PYTHON_WRAPPER:STRING=1 -DCMAKE_INSTALL_LIBDIR=$(PREFIX)/lib ..
 
 $(LIBDYLIB): $(PLATFORM)
diff --git a/tools/depends/target/libcec/popcornmix.patch b/tools/depends/target/libcec/popcornmix.patch
new file mode 100644
index 0000000..8366a69
--- /dev/null
+++ b/tools/depends/target/libcec/popcornmix.patch
@@ -0,0 +1,859 @@
+From ec982e9800ae312972d306b67779215a2add6cde Mon Sep 17 00:00:00 2001
+From: popcornmix <popcornmix@gmail.com>
+Date: Fri, 24 Oct 2014 13:45:21 +0100
+Subject: [PATCH 1/6] Make released key polling wait for exact time until key
+ gets released
+
+---
+ src/libcec/CECClient.cpp    | 16 ++++++++++++++--
+ src/libcec/CECClient.h      |  2 +-
+ src/libcec/CECProcessor.cpp |  8 +++++---
+ src/libcec/LibCEC.cpp       | 10 ++++++++--
+ src/libcec/LibCEC.h         |  4 +++-
+ 5 files changed, 31 insertions(+), 9 deletions(-)
+
+diff --git a/src/libcec/CECClient.cpp b/src/libcec/CECClient.cpp
+index 35c2d3e..e307c0e 100644
+--- a/src/libcec/CECClient.cpp
++++ b/src/libcec/CECClient.cpp
+@@ -1067,7 +1067,7 @@ void CCECClient::SetCurrentButton(const cec_user_control_code iButtonCode)
+   AddKey(key);
+ }
+ 
+-void CCECClient::CheckKeypressTimeout(void)
++uint16_t CCECClient::CheckKeypressTimeout(void)
+ {
+   cec_keypress key;
+ 
+@@ -1091,12 +1091,24 @@ void CCECClient::CheckKeypressTimeout(void)
+     }
+     else
+     {
+-      return;
++      // time when this keypress will be released and we'd like to be called again
++      unsigned int timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
++      if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton == comboKey && iTimeoutMs > 0)
++        timeout = iTimeoutMs - (iNow - m_buttontime) + 1;
++      else if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton != comboKey)
++        timeout = CEC_BUTTON_TIMEOUT - (iNow - m_buttontime) + 1;
++      if (timeout > CEC_PROCESSOR_SIGNAL_WAIT_TIME)
++      {
++        LIB_CEC->AddLog(CEC_LOG_ERROR, "Unexpected timeout: %d (%.3f %.3f %.3f) k:%02x", timeout, iNow*1e-3, m_buttontime*1e-3, CEC_BUTTON_TIMEOUT*1e-3, m_iCurrentButton);
++        timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
++      }
++      return timeout;
+     }
+   }
+ 
+   LIB_CEC->AddLog(CEC_LOG_DEBUG, "key auto-released: %s (%1x)", ToString(key.keycode), key.keycode);
+   QueueAddKey(key);
++  return CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+ }
+ 
+ bool CCECClient::EnableCallbacks(void *cbParam, ICECCallbacks *callbacks)
+diff --git a/src/libcec/CECClient.h b/src/libcec/CECClient.h
+index 12f8a3b..c9ce5e3 100644
+--- a/src/libcec/CECClient.h
++++ b/src/libcec/CECClient.h
+@@ -272,7 +272,7 @@ namespace CEC
+     virtual void                  AddKey(bool bSendComboKey = false);
+     virtual void                  AddKey(const cec_keypress &key);
+     virtual void                  SetCurrentButton(const cec_user_control_code iButtonCode);
+-    virtual void                  CheckKeypressTimeout(void);
++    virtual uint16_t              CheckKeypressTimeout(void);
+     virtual void                  SourceActivated(const cec_logical_address logicalAddress);
+     virtual void                  SourceDeactivated(const cec_logical_address logicalAddress);
+ 
+diff --git a/src/libcec/CECProcessor.cpp b/src/libcec/CECProcessor.cpp
+index 99f71aa..604b950 100644
+--- a/src/libcec/CECProcessor.cpp
++++ b/src/libcec/CECProcessor.cpp
+@@ -52,7 +52,6 @@
+ using namespace CEC;
+ using namespace PLATFORM;
+ 
+-#define CEC_PROCESSOR_SIGNAL_WAIT_TIME 1000
+ #define ACTIVE_SOURCE_CHECK_INTERVAL   500
+ #define TV_PRESENT_CHECK_INTERVAL      30000
+ 
+@@ -260,6 +259,7 @@ bool CCECProcessor::OnCommandReceived(const cec_command &command)
+ 
+ void *CCECProcessor::Process(void)
+ {
++  uint16_t timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+   m_libcec->AddLog(CEC_LOG_DEBUG, "processor thread started");
+ 
+   if (!m_connCheck)
+@@ -274,13 +274,13 @@ void *CCECProcessor::Process(void)
+   while (!IsStopped() && m_communication->IsOpen())
+   {
+     // wait for a new incoming command, and process it
+-    if (m_inBuffer.Pop(command, CEC_PROCESSOR_SIGNAL_WAIT_TIME))
++    if (m_inBuffer.Pop(command, timeout))
+       ProcessCommand(command);
+ 
+     if (CECInitialised() && !IsStopped())
+     {
+       // check clients for keypress timeouts
+-      m_libcec->CheckKeypressTimeout();
++      timeout = m_libcec->CheckKeypressTimeout();
+ 
+       // check if we need to replace handlers
+       ReplaceHandlers();
+@@ -311,6 +311,8 @@ void *CCECProcessor::Process(void)
+         tvPresentCheck.Init(TV_PRESENT_CHECK_INTERVAL);
+       }
+     }
++    else
++      timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+   }
+ 
+   return NULL;
+diff --git a/src/libcec/LibCEC.cpp b/src/libcec/LibCEC.cpp
+index af36b79..5ccb8dd 100644
+--- a/src/libcec/LibCEC.cpp
++++ b/src/libcec/LibCEC.cpp
+@@ -361,11 +361,17 @@ bool CLibCEC::IsValidPhysicalAddress(uint16_t iPhysicalAddress)
+          iPhysicalAddress <= CEC_MAX_PHYSICAL_ADDRESS;
+ }
+ 
+-void CLibCEC::CheckKeypressTimeout(void)
++uint16_t CLibCEC::CheckKeypressTimeout(void)
+ {
++  uint16_t timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+   // check all clients
+   for (std::vector<CECClientPtr>::iterator it = m_clients.begin(); it != m_clients.end(); it++)
+-    (*it)->CheckKeypressTimeout();
++  {
++    uint16_t t = (*it)->CheckKeypressTimeout();
++    if (t < timeout)
++      timeout = t;
++  }
++  return timeout;
+ }
+ 
+ void CLibCEC::AddLog(const cec_log_level level, const char *strFormat, ...)
+diff --git a/src/libcec/LibCEC.h b/src/libcec/LibCEC.h
+index 6d9a229..d9d1e7b 100644
+--- a/src/libcec/LibCEC.h
++++ b/src/libcec/LibCEC.h
+@@ -39,6 +39,8 @@
+ #include "CECTypeUtils.h"
+ #include <memory>
+ 
++#define CEC_PROCESSOR_SIGNAL_WAIT_TIME 1000
++
+ namespace CEC
+ {
+   class CAdapterCommunication;
+@@ -125,7 +127,7 @@ namespace CEC
+ 
+       void AddLog(const cec_log_level level, const char *strFormat, ...);
+       void AddCommand(const cec_command &command);
+-      void CheckKeypressTimeout(void);
++      uint16_t CheckKeypressTimeout(void);
+       void Alert(const libcec_alert type, const libcec_parameter &param);
+ 
+       static bool IsValidPhysicalAddress(uint16_t iPhysicalAddress);
+-- 
+1.9.1
+
+
+From 41f0f3ec9ac136da3565c96fd5a7075499f3938d Mon Sep 17 00:00:00 2001
+From: popcornmix <popcornmix@gmail.com>
+Date: Fri, 24 Oct 2014 13:51:34 +0100
+Subject: [PATCH 2/6] Keep track of time since initial button press and last
+ button update
+
+---
+ src/libcec/CECClient.cpp | 44 +++++++++++++++++++++++++++-----------------
+ src/libcec/CECClient.h   |  3 ++-
+ 2 files changed, 29 insertions(+), 18 deletions(-)
+
+diff --git a/src/libcec/CECClient.cpp b/src/libcec/CECClient.cpp
+index e307c0e..e7935b9 100644
+--- a/src/libcec/CECClient.cpp
++++ b/src/libcec/CECClient.cpp
+@@ -54,7 +54,8 @@ CCECClient::CCECClient(CCECProcessor *processor, const libcec_configuration &con
+     m_bInitialised(false),
+     m_bRegistered(false),
+     m_iCurrentButton(CEC_USER_CONTROL_CODE_UNKNOWN),
+-    m_buttontime(0),
++    m_initialButtontime(0),
++    m_updateButtontime(0),
+     m_iPreventForwardingPowerOffCommand(0),
+     m_iLastKeypressTime(0)
+ {
+@@ -981,9 +982,10 @@ void CCECClient::AddKey(bool bSendComboKey /* = false */)
+     CLockObject lock(m_mutex);
+     if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN)
+     {
+-      key.duration = (unsigned int) (GetTimeMs() - m_buttontime);
++      unsigned int duration = (unsigned int) (GetTimeMs() - m_updateButtontime);
++      key.duration = (unsigned int) (GetTimeMs() - m_initialButtontime);
+ 
+-      if (key.duration > m_configuration.iComboKeyTimeoutMs ||
++      if (duration > m_configuration.iComboKeyTimeoutMs ||
+           m_configuration.iComboKeyTimeoutMs == 0 ||
+           m_iCurrentButton != m_configuration.comboKey ||
+           bSendComboKey)
+@@ -991,14 +993,15 @@ void CCECClient::AddKey(bool bSendComboKey /* = false */)
+         key.keycode = m_iCurrentButton;
+ 
+         m_iCurrentButton = CEC_USER_CONTROL_CODE_UNKNOWN;
+-        m_buttontime = 0;
++        m_initialButtontime = 0;
++        m_updateButtontime = 0;
+       }
+     }
+   }
+ 
+   if (key.keycode != CEC_USER_CONTROL_CODE_UNKNOWN)
+   {
+-    LIB_CEC->AddLog(CEC_LOG_DEBUG, "key released: %s (%1x)", ToString(key.keycode), key.keycode);
++    LIB_CEC->AddLog(CEC_LOG_DEBUG, "key released: %s (%1x) D:%dms", ToString(key.keycode), key.keycode, key.duration);
+     QueueAddKey(key);
+   }
+ }
+@@ -1012,7 +1015,7 @@ void CCECClient::AddKey(const cec_keypress &key)
+     AddKey();
+     return;
+   }
+-
++  bool isrepeat = false;
+   cec_keypress transmitKey(key);
+   cec_user_control_code comboKey(m_configuration.clientVersion >= LIBCEC_VERSION_TO_UINT(2, 0, 5) ?
+       m_configuration.comboKey : CEC_USER_CONTROL_CODE_STOP);
+@@ -1035,22 +1038,27 @@ void CCECClient::AddKey(const cec_keypress &key)
+         AddKey(true);
+     }
+ 
++    LIB_CEC->AddLog(CEC_LOG_DEBUG, "key pressed: %s (%1x) current(%lx) duration(%d)", ToString(transmitKey.keycode), transmitKey.keycode, m_iCurrentButton, key.duration);
++
+     if (m_iCurrentButton == key.keycode)
+     {
+-      m_buttontime = GetTimeMs();
++      m_updateButtontime = GetTimeMs();
++      isrepeat = true;
+     }
+     else
+     {
+-      AddKey();
++      if (m_iCurrentButton != transmitKey.keycode)
++        AddKey();
+       if (key.duration == 0)
+       {
+         m_iCurrentButton = transmitKey.keycode;
+-        m_buttontime = m_iCurrentButton == CEC_USER_CONTROL_CODE_UNKNOWN || key.duration > 0 ? 0 : GetTimeMs();
++        m_initialButtontime = m_iCurrentButton == CEC_USER_CONTROL_CODE_UNKNOWN || key.duration > 0 ? 0 : GetTimeMs();
++        m_updateButtontime = m_initialButtontime;
+       }
+     }
+   }
+ 
+-  if (key.keycode != comboKey || key.duration > 0)
++  if (!isrepeat && (key.keycode != comboKey || key.duration > 0))
+   {
+     LIB_CEC->AddLog(CEC_LOG_DEBUG, "key pressed: %s (%1x)", ToString(transmitKey.keycode), transmitKey.keycode);
+     QueueAddKey(transmitKey);
+@@ -1074,32 +1082,34 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+   {
+     CLockObject lock(m_mutex);
+     uint64_t iNow = GetTimeMs();
++    LIB_CEC->AddLog(CEC_LOG_DEBUG, "%s T:%.3f", __FUNCTION__, iNow*1e-3);
+     cec_user_control_code comboKey(m_configuration.clientVersion >= LIBCEC_VERSION_TO_UINT(2, 0, 5) ?
+         m_configuration.comboKey : CEC_USER_CONTROL_CODE_STOP);
+     uint32_t iTimeoutMs(m_configuration.clientVersion >= LIBCEC_VERSION_TO_UINT(2, 0, 5) ?
+         m_configuration.iComboKeyTimeoutMs : CEC_DEFAULT_COMBO_TIMEOUT_MS);
+ 
+     if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN &&
+-          ((m_iCurrentButton == comboKey && iTimeoutMs > 0 && iNow - m_buttontime > iTimeoutMs) ||
+-          (m_iCurrentButton != comboKey && iNow - m_buttontime > CEC_BUTTON_TIMEOUT)))
++          ((m_iCurrentButton == comboKey && iTimeoutMs > 0 && iNow - m_updateButtontime > iTimeoutMs) ||
++          (m_iCurrentButton != comboKey && iNow - m_updateButtontime > CEC_BUTTON_TIMEOUT)))
+     {
+-      key.duration = (unsigned int) (iNow - m_buttontime);
++      key.duration = (unsigned int) (iNow - m_initialButtontime);
+       key.keycode = m_iCurrentButton;
+ 
+       m_iCurrentButton = CEC_USER_CONTROL_CODE_UNKNOWN;
+-      m_buttontime = 0;
++      m_initialButtontime = 0;
++      m_updateButtontime = 0;
+     }
+     else
+     {
+       // time when this keypress will be released and we'd like to be called again
+       unsigned int timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+       if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton == comboKey && iTimeoutMs > 0)
+-        timeout = iTimeoutMs - (iNow - m_buttontime) + 1;
++        timeout = iTimeoutMs - (iNow - m_updateButtontime) + 1;
+       else if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton != comboKey)
+-        timeout = CEC_BUTTON_TIMEOUT - (iNow - m_buttontime) + 1;
++        timeout = CEC_BUTTON_TIMEOUT - (iNow - m_updateButtontime) + 1;
+       if (timeout > CEC_PROCESSOR_SIGNAL_WAIT_TIME)
+       {
+-        LIB_CEC->AddLog(CEC_LOG_ERROR, "Unexpected timeout: %d (%.3f %.3f %.3f) k:%02x", timeout, iNow*1e-3, m_buttontime*1e-3, CEC_BUTTON_TIMEOUT*1e-3, m_iCurrentButton);
++        LIB_CEC->AddLog(CEC_LOG_ERROR, "Unexpected timeout: %d (%.3f %.3f %.3f) k:%02x", timeout, iNow*1e-3, m_updateButtontime*1e-3, CEC_BUTTON_TIMEOUT*1e-3, m_iCurrentButton);
+         timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+       }
+       return timeout;
+diff --git a/src/libcec/CECClient.h b/src/libcec/CECClient.h
+index c9ce5e3..611c68b 100644
+--- a/src/libcec/CECClient.h
++++ b/src/libcec/CECClient.h
+@@ -404,7 +404,8 @@ namespace CEC
+     PLATFORM::CMutex      m_mutex;                             /**< mutex for changes to this instance */
+     PLATFORM::CMutex      m_cbMutex;                           /**< mutex that is held when doing anything with callbacks */
+     cec_user_control_code m_iCurrentButton;                    /**< the control code of the button that's currently held down (if any) */
+-    int64_t               m_buttontime;                        /**< the timestamp when the button was pressed (in seconds since epoch), or 0 if none was pressed. */
++    int64_t               m_initialButtontime;                 /**< the timestamp when the button was initially pressed (in seconds since epoch), or 0 if none was pressed. */
++    int64_t               m_updateButtontime;                  /**< the timestamp when the button was updated (in seconds since epoch), or 0 if none was pressed. */
+     int64_t               m_iPreventForwardingPowerOffCommand; /**< prevent forwarding standby commands until this time */
+     int64_t               m_iLastKeypressTime;                 /**< last time a key press was sent to the client */
+     cec_keypress          m_lastKeypress;                      /**< the last key press that was sent to the client */
+-- 
+1.9.1
+
+
+From 273ead6980b69eddf98810eb1eb33d94a7d74fce Mon Sep 17 00:00:00 2001
+From: popcornmix <popcornmix@gmail.com>
+Date: Tue, 28 Oct 2014 00:09:18 +0000
+Subject: [PATCH 3/6] Support repeating button presses with configurable repeat
+ rate
+
+---
+ include/cectypes.h                               |   6 ++
+ src/libcec/CECClient.cpp                         | 100 +++++++++++++++++++----
+ src/libcec/CECClient.h                           |   6 +-
+ src/libcec/implementations/CECCommandHandler.cpp |   2 +-
+ 4 files changed, 96 insertions(+), 18 deletions(-)
+
+diff --git a/include/cectypes.h b/include/cectypes.h
+index acff259..8f098ef 100644
+--- a/include/cectypes.h
++++ b/include/cectypes.h
+@@ -1493,6 +1493,8 @@ struct libcec_configuration
+                                                    XXX changed meaning in 2.2.0 to not break binary compatibility. next major (3.0) release will fix it in a nicer way */
+   cec_user_control_code comboKey;             /*!< key code that initiates combo keys. defaults to CEC_USER_CONTROL_CODE_F1_BLUE. CEC_USER_CONTROL_CODE_UNKNOWN to disable. added in 2.0.5 */
+   uint32_t              iComboKeyTimeoutMs;   /*!< timeout until the combo key is sent as normal keypress */
++  uint32_t              iButtonRepeatRateMs;  /*!< rate at which buttons autorepeat. 0 means rely on CEC device */
++  uint32_t              iButtonReleaseDelayMs;/*!< duration after last update until a button is considered released */
+ 
+ #ifdef __cplusplus
+    libcec_configuration(void) { Clear(); }
+@@ -1527,6 +1529,8 @@ struct libcec_configuration
+                  cecVersion                == other.cecVersion &&
+                  adapterType               == other.adapterType &&
+                  iDoubleTapTimeout50Ms     == other.iDoubleTapTimeout50Ms &&
++                 iButtonRepeatRateMs       == other.iButtonRepeatRateMs &&
++                 iButtonReleaseDelayMs     == other.iButtonReleaseDelayMs &&
+                  (other.clientVersion <= LIBCEC_VERSION_TO_UINT(2, 0, 4) || comboKey            == other.comboKey) &&
+                  (other.clientVersion <= LIBCEC_VERSION_TO_UINT(2, 0, 4) || iComboKeyTimeoutMs  == other.iComboKeyTimeoutMs) &&
+                  (other.clientVersion <  LIBCEC_VERSION_TO_UINT(2, 1, 0) || bPowerOnScreensaver == other.bPowerOnScreensaver));
+@@ -1567,6 +1571,8 @@ struct libcec_configuration
+     iDoubleTapTimeout50Ms =           CEC_DOUBLE_TAP_TIMEOUT_50_MS;
+     comboKey =                        CEC_USER_CONTROL_CODE_STOP;
+     iComboKeyTimeoutMs =              CEC_DEFAULT_COMBO_TIMEOUT_MS;
++    iButtonRepeatRateMs =             0;
++    iButtonReleaseDelayMs =           CEC_BUTTON_TIMEOUT;
+ 
+     memset(strDeviceName, 0, 13);
+     deviceTypes.Clear();
+diff --git a/src/libcec/CECClient.cpp b/src/libcec/CECClient.cpp
+index e7935b9..598628d 100644
+--- a/src/libcec/CECClient.cpp
++++ b/src/libcec/CECClient.cpp
+@@ -56,6 +56,10 @@ CCECClient::CCECClient(CCECProcessor *processor, const libcec_configuration &con
+     m_iCurrentButton(CEC_USER_CONTROL_CODE_UNKNOWN),
+     m_initialButtontime(0),
+     m_updateButtontime(0),
++    m_repeatButtontime(0),
++    m_releaseButtontime(0),
++    m_pressedButtoncount(0),
++    m_releasedButtoncount(0),
+     m_iPreventForwardingPowerOffCommand(0),
+     m_iLastKeypressTime(0)
+ {
+@@ -851,6 +855,9 @@ bool CCECClient::GetCurrentConfiguration(libcec_configuration &configuration)
+   configuration.bMonitorOnly              = m_configuration.bMonitorOnly;
+   configuration.cecVersion                = m_configuration.cecVersion;
+   configuration.adapterType               = m_configuration.adapterType;
++  configuration.iDoubleTapTimeout50Ms     = m_configuration.iDoubleTapTimeout50Ms;
++  configuration.iButtonRepeatRateMs       = m_configuration.iButtonRepeatRateMs;
++  configuration.iButtonReleaseDelayMs     = m_configuration.iButtonReleaseDelayMs;
+ 
+   return true;
+ }
+@@ -894,6 +901,9 @@ bool CCECClient::SetConfiguration(const libcec_configuration &configuration)
+     m_configuration.cecVersion                 = configuration.cecVersion;
+     m_configuration.adapterType                = configuration.adapterType;
+     m_configuration.iDoubleTapTimeout50Ms      = configuration.iDoubleTapTimeout50Ms;
++    m_configuration.iButtonRepeatRateMs        = configuration.iButtonRepeatRateMs;
++    m_configuration.iButtonReleaseDelayMs      = configuration.iButtonReleaseDelayMs;
++
+     m_configuration.deviceTypes.Add(configuration.deviceTypes[0]);
+ 
+     if (m_configuration.clientVersion >= LIBCEC_VERSION_TO_UINT(2, 0, 5))
+@@ -950,6 +960,7 @@ bool CCECClient::SetConfiguration(const libcec_configuration &configuration)
+     primary->ActivateSource();
+   }
+ 
++  LIB_CEC->AddLog(CEC_LOG_DEBUG, "%s: %d:%d:%d", __FUNCTION__, DoubleTapTimeoutMS(), m_configuration.iButtonRepeatRateMs, m_configuration.iButtonReleaseDelayMs);
+   return true;
+ }
+ 
+@@ -973,11 +984,15 @@ void CCECClient::AddCommand(const cec_command &command)
+   }
+ }
+ 
+-void CCECClient::AddKey(bool bSendComboKey /* = false */)
++void CCECClient::AddKey(bool bSendComboKey /* = false */, bool bButtonRelease /* = false */)
+ {
+   cec_keypress key;
+   key.keycode = CEC_USER_CONTROL_CODE_UNKNOWN;
+ 
++  // we ignore button releases when supporting repeating keys
++  if (bButtonRelease && m_configuration.iButtonRepeatRateMs && m_configuration.iButtonReleaseDelayMs)
++    return;
++
+   {
+     CLockObject lock(m_mutex);
+     if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN)
+@@ -995,6 +1010,10 @@ void CCECClient::AddKey(bool bSendComboKey /* = false */)
+         m_iCurrentButton = CEC_USER_CONTROL_CODE_UNKNOWN;
+         m_initialButtontime = 0;
+         m_updateButtontime = 0;
++        m_repeatButtontime = 0;
++        m_releaseButtontime = 0;
++        m_pressedButtoncount = 0;
++        m_releasedButtoncount = 0;
+       }
+     }
+   }
+@@ -1012,6 +1031,7 @@ void CCECClient::AddKey(const cec_keypress &key)
+       key.keycode < CEC_USER_CONTROL_CODE_SELECT)
+   {
+     // send back the previous key if there is one
++    LIB_CEC->AddLog(CEC_LOG_DEBUG, "Unexpected key %s (%1x) D:%dms", ToString(key.keycode), key.keycode, key.duration);
+     AddKey();
+     return;
+   }
+@@ -1035,7 +1055,10 @@ void CCECClient::AddKey(const cec_keypress &key)
+         transmitKey.keycode = CEC_USER_CONTROL_CODE_DOT;
+       // default, send back the previous key
+       else
++      {
++        LIB_CEC->AddLog(CEC_LOG_DEBUG, "Combo key %s (%1x) D%dms:", ToString(key.keycode), key.keycode, key.duration);
+         AddKey(true);
++      }
+     }
+ 
+     LIB_CEC->AddLog(CEC_LOG_DEBUG, "key pressed: %s (%1x) current(%lx) duration(%d)", ToString(transmitKey.keycode), transmitKey.keycode, m_iCurrentButton, key.duration);
+@@ -1043,17 +1066,44 @@ void CCECClient::AddKey(const cec_keypress &key)
+     if (m_iCurrentButton == key.keycode)
+     {
+       m_updateButtontime = GetTimeMs();
+-      isrepeat = true;
++      m_releaseButtontime = m_updateButtontime + (m_configuration.iButtonReleaseDelayMs ? m_configuration.iButtonReleaseDelayMs : CEC_BUTTON_TIMEOUT);
++      // want to have seen some updated before considering a repeat
++      if (m_configuration.iButtonRepeatRateMs)
++      {
++        if (!m_repeatButtontime && m_pressedButtoncount > 1)
++          m_repeatButtontime = m_initialButtontime + DoubleTapTimeoutMS();
++        isrepeat = true;
++      }
++      m_pressedButtoncount++;
+     }
+     else
+     {
+       if (m_iCurrentButton != transmitKey.keycode)
++      {
++        LIB_CEC->AddLog(CEC_LOG_DEBUG, "Changed key %s (%1x) D:%dms cur:%lx", ToString(transmitKey.keycode), transmitKey.keycode, transmitKey.duration, m_iCurrentButton);
+         AddKey();
++      }
+       if (key.duration == 0)
+       {
+         m_iCurrentButton = transmitKey.keycode;
+-        m_initialButtontime = m_iCurrentButton == CEC_USER_CONTROL_CODE_UNKNOWN || key.duration > 0 ? 0 : GetTimeMs();
+-        m_updateButtontime = m_initialButtontime;
++        if (m_iCurrentButton == CEC_USER_CONTROL_CODE_UNKNOWN)
++        {
++          m_initialButtontime = 0;
++          m_updateButtontime = 0;
++          m_repeatButtontime = 0;
++          m_releaseButtontime = 0;
++          m_pressedButtoncount = 0;
++          m_releasedButtoncount = 0;
++        }
++        else
++        {
++          m_initialButtontime = GetTimeMs();
++          m_updateButtontime = m_initialButtontime;
++          m_repeatButtontime = 0; // set this on next update
++          m_releaseButtontime = m_initialButtontime + (m_configuration.iButtonReleaseDelayMs ? m_configuration.iButtonReleaseDelayMs : CEC_BUTTON_TIMEOUT);
++          m_pressedButtoncount = 1;
++          m_releasedButtoncount = 0;
++        }
+       }
+     }
+   }
+@@ -1072,12 +1122,16 @@ void CCECClient::SetCurrentButton(const cec_user_control_code iButtonCode)
+   key.duration = 0;
+   key.keycode = iButtonCode;
+ 
++  LIB_CEC->AddLog(CEC_LOG_DEBUG, "SetCurrentButton %s (%1x) D:%dms cur:%lx", ToString(key.keycode), key.keycode, key.duration);
+   AddKey(key);
+ }
+ 
+ uint16_t CCECClient::CheckKeypressTimeout(void)
+ {
++  // time when we'd like to be called again
++  unsigned int timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+   cec_keypress key;
++  key.keycode = CEC_USER_CONTROL_CODE_UNKNOWN;
+ 
+   {
+     CLockObject lock(m_mutex);
+@@ -1089,8 +1143,8 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+         m_configuration.iComboKeyTimeoutMs : CEC_DEFAULT_COMBO_TIMEOUT_MS);
+ 
+     if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN &&
+-          ((m_iCurrentButton == comboKey && iTimeoutMs > 0 && iNow - m_updateButtontime > iTimeoutMs) ||
+-          (m_iCurrentButton != comboKey && iNow - m_updateButtontime > CEC_BUTTON_TIMEOUT)))
++          ((m_iCurrentButton == comboKey && iTimeoutMs > 0 && iNow - m_updateButtontime >= iTimeoutMs) ||
++          (m_iCurrentButton != comboKey && m_releaseButtontime && iNow >= (uint64_t)m_releaseButtontime)))
+     {
+       key.duration = (unsigned int) (iNow - m_initialButtontime);
+       key.keycode = m_iCurrentButton;
+@@ -1098,27 +1152,41 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+       m_iCurrentButton = CEC_USER_CONTROL_CODE_UNKNOWN;
+       m_initialButtontime = 0;
+       m_updateButtontime = 0;
++      m_repeatButtontime = 0;
++      m_releaseButtontime = 0;
++      m_pressedButtoncount = 0;
++      m_releasedButtoncount = 0;
++    }
++    else if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN &&
++          (m_iCurrentButton != comboKey && m_repeatButtontime && iNow >= (uint64_t)m_repeatButtontime))
++    {
++      key.duration = 0;
++      key.keycode = m_iCurrentButton;
++      m_repeatButtontime = iNow + m_configuration.iButtonRepeatRateMs;
++      timeout = std::min((uint64_t)timeout, m_repeatButtontime - iNow);
+     }
+     else
+     {
+-      // time when this keypress will be released and we'd like to be called again
+-      unsigned int timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+       if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton == comboKey && iTimeoutMs > 0)
+-        timeout = iTimeoutMs - (iNow - m_updateButtontime) + 1;
+-      else if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton != comboKey)
+-        timeout = CEC_BUTTON_TIMEOUT - (iNow - m_updateButtontime) + 1;
++        timeout = std::min((uint64_t)timeout, m_updateButtontime - iNow + iTimeoutMs);
++      if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton != comboKey && m_releaseButtontime)
++        timeout = std::min((uint64_t)timeout, m_releaseButtontime - iNow);
++      if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton != comboKey && m_repeatButtontime)
++        timeout = std::min((uint64_t)timeout, m_repeatButtontime - iNow);
+       if (timeout > CEC_PROCESSOR_SIGNAL_WAIT_TIME)
+       {
+-        LIB_CEC->AddLog(CEC_LOG_ERROR, "Unexpected timeout: %d (%.3f %.3f %.3f) k:%02x", timeout, iNow*1e-3, m_updateButtontime*1e-3, CEC_BUTTON_TIMEOUT*1e-3, m_iCurrentButton);
++        LIB_CEC->AddLog(CEC_LOG_ERROR, "Unexpected timeout: %d (%.3f %.3f %.3f) k:%02x", timeout, iNow*1e-3, m_updateButtontime*1e-3, m_releaseButtontime*1e-3, m_iCurrentButton);
+         timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+       }
+-      return timeout;
+     }
++    LIB_CEC->AddLog(CEC_LOG_DEBUG, "key %s: %s (%1x) timeout:%dms (rel:%d,rep:%d,prs:%d,rel:%d)", key.keycode == CEC_USER_CONTROL_CODE_UNKNOWN ? "idle" : key.duration ? "released" : "repeated",
++        ToString(m_iCurrentButton), m_iCurrentButton, timeout, (int)(m_releaseButtontime ? m_releaseButtontime - iNow : 0), (int)(m_repeatButtontime ? m_repeatButtontime - iNow : 0), m_pressedButtoncount, m_releasedButtoncount);
+   }
+ 
+-  LIB_CEC->AddLog(CEC_LOG_DEBUG, "key auto-released: %s (%1x)", ToString(key.keycode), key.keycode);
+-  QueueAddKey(key);
+-  return CEC_PROCESSOR_SIGNAL_WAIT_TIME;
++  if (key.keycode != CEC_USER_CONTROL_CODE_UNKNOWN)
++    QueueAddKey(key);
++
++  return timeout;
+ }
+ 
+ bool CCECClient::EnableCallbacks(void *cbParam, ICECCallbacks *callbacks)
+diff --git a/src/libcec/CECClient.h b/src/libcec/CECClient.h
+index 611c68b..adeb5af 100644
+--- a/src/libcec/CECClient.h
++++ b/src/libcec/CECClient.h
+@@ -269,7 +269,7 @@ namespace CEC
+     // callbacks
+     virtual void                  Alert(const libcec_alert type, const libcec_parameter &param) { QueueAlert(type, param); }
+     virtual void                  AddLog(const cec_log_message &message) { QueueAddLog(message); }
+-    virtual void                  AddKey(bool bSendComboKey = false);
++    virtual void                  AddKey(bool bSendComboKey = false, bool bButtonRelease = false);
+     virtual void                  AddKey(const cec_keypress &key);
+     virtual void                  SetCurrentButton(const cec_user_control_code iButtonCode);
+     virtual uint16_t              CheckKeypressTimeout(void);
+@@ -406,6 +406,10 @@ namespace CEC
+     cec_user_control_code m_iCurrentButton;                    /**< the control code of the button that's currently held down (if any) */
+     int64_t               m_initialButtontime;                 /**< the timestamp when the button was initially pressed (in seconds since epoch), or 0 if none was pressed. */
+     int64_t               m_updateButtontime;                  /**< the timestamp when the button was updated (in seconds since epoch), or 0 if none was pressed. */
++    int64_t               m_repeatButtontime;                  /**< the timestamp when the button will next repeat (in seconds since epoch), or 0 if repeat is disabled. */
++    int64_t               m_releaseButtontime;                 /**< the timestamp when the button will be released (in seconds since epoch), or 0 if none was pressed. */
++    int32_t               m_pressedButtoncount;                /**< the number of times a button released message has been seen for this press. */
++    int32_t               m_releasedButtoncount;               /**< the number of times a button pressed message has been seen for this press. */
+     int64_t               m_iPreventForwardingPowerOffCommand; /**< prevent forwarding standby commands until this time */
+     int64_t               m_iLastKeypressTime;                 /**< last time a key press was sent to the client */
+     cec_keypress          m_lastKeypress;                      /**< the last key press that was sent to the client */
+diff --git a/src/libcec/implementations/CECCommandHandler.cpp b/src/libcec/implementations/CECCommandHandler.cpp
+index 6d6244e..d64186f 100644
+--- a/src/libcec/implementations/CECCommandHandler.cpp
++++ b/src/libcec/implementations/CECCommandHandler.cpp
+@@ -770,7 +770,7 @@ int CCECCommandHandler::HandleUserControlRelease(const cec_command &command)
+ 
+   CECClientPtr client = m_processor->GetClient(command.destination);
+   if (client)
+-    client->AddKey();
++    client->AddKey(false, true);
+ 
+   return COMMAND_HANDLED;
+ }
+-- 
+1.9.1
+
+
+From 3336d0827f7fd159430f3431642b07090c06c869 Mon Sep 17 00:00:00 2001
+From: popcornmix <popcornmix@gmail.com>
+Date: Tue, 28 Oct 2014 01:21:35 +0000
+Subject: [PATCH 4/6] Skip double press removal. It is handled through other
+ means.
+
+---
+ src/libcec/CECClient.cpp | 18 +-----------------
+ src/libcec/CECClient.h   |  2 --
+ 2 files changed, 1 insertion(+), 19 deletions(-)
+
+diff --git a/src/libcec/CECClient.cpp b/src/libcec/CECClient.cpp
+index 598628d..dccd874 100644
+--- a/src/libcec/CECClient.cpp
++++ b/src/libcec/CECClient.cpp
+@@ -60,11 +60,8 @@ CCECClient::CCECClient(CCECProcessor *processor, const libcec_configuration &con
+     m_releaseButtontime(0),
+     m_pressedButtoncount(0),
+     m_releasedButtoncount(0),
+-    m_iPreventForwardingPowerOffCommand(0),
+-    m_iLastKeypressTime(0)
++    m_iPreventForwardingPowerOffCommand(0)
+ {
+-  m_lastKeypress.keycode = CEC_USER_CONTROL_CODE_UNKNOWN;
+-  m_lastKeypress.duration = 0;
+   m_configuration.Clear();
+   // set the initial configuration
+   SetConfiguration(configuration);
+@@ -1647,20 +1644,7 @@ void CCECClient::CallbackAddKey(const cec_keypress &key)
+ {
+   CLockObject lock(m_cbMutex);
+   if (m_configuration.callbacks && m_configuration.callbacks->CBCecKeyPress)
+-  {
+-    // prevent double taps
+-    int64_t now = GetTimeMs();
+-    if (m_lastKeypress.keycode != key.keycode ||
+-        key.duration > 0 ||
+-        now - m_iLastKeypressTime >= DoubleTapTimeoutMS())
+-    {
+-      // no double tap
+-      if (key.duration == 0)
+-        m_iLastKeypressTime = now;
+-      m_lastKeypress = key;
+       m_configuration.callbacks->CBCecKeyPress(m_configuration.callbackParam, key);
+-    }
+-  }
+ }
+ 
+ void CCECClient::CallbackAddLog(const cec_log_message &message)
+diff --git a/src/libcec/CECClient.h b/src/libcec/CECClient.h
+index adeb5af..43a713b 100644
+--- a/src/libcec/CECClient.h
++++ b/src/libcec/CECClient.h
+@@ -411,8 +411,6 @@ namespace CEC
+     int32_t               m_pressedButtoncount;                /**< the number of times a button released message has been seen for this press. */
+     int32_t               m_releasedButtoncount;               /**< the number of times a button pressed message has been seen for this press. */
+     int64_t               m_iPreventForwardingPowerOffCommand; /**< prevent forwarding standby commands until this time */
+-    int64_t               m_iLastKeypressTime;                 /**< last time a key press was sent to the client */
+-    cec_keypress          m_lastKeypress;                      /**< the last key press that was sent to the client */
+     PLATFORM::SyncedBuffer<CCallbackWrap*> m_callbackCalls;
+   };
+ }
+-- 
+1.9.1
+
+
+From 0dd0234f620a546bfa843172648383f83d88088c Mon Sep 17 00:00:00 2001
+From: popcornmix <popcornmix@gmail.com>
+Date: Mon, 3 Nov 2014 23:28:04 +0000
+Subject: [PATCH 5/6] Pass through duration on all button repeats
+
+---
+ src/libcec/CECClient.cpp | 34 ++++++++++++++++++++++++----------
+ 1 file changed, 24 insertions(+), 10 deletions(-)
+
+diff --git a/src/libcec/CECClient.cpp b/src/libcec/CECClient.cpp
+index dccd874..1946148 100644
+--- a/src/libcec/CECClient.cpp
++++ b/src/libcec/CECClient.cpp
+@@ -986,10 +986,6 @@ void CCECClient::AddKey(bool bSendComboKey /* = false */, bool bButtonRelease /*
+   cec_keypress key;
+   key.keycode = CEC_USER_CONTROL_CODE_UNKNOWN;
+ 
+-  // we ignore button releases when supporting repeating keys
+-  if (bButtonRelease && m_configuration.iButtonRepeatRateMs && m_configuration.iButtonReleaseDelayMs)
+-    return;
+-
+   {
+     CLockObject lock(m_mutex);
+     if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN)
+@@ -1015,6 +1011,10 @@ void CCECClient::AddKey(bool bSendComboKey /* = false */, bool bButtonRelease /*
+     }
+   }
+ 
++  // we don't forward releases when supporting repeating keys
++  if (bButtonRelease && m_configuration.iButtonRepeatRateMs)
++    return;
++
+   if (key.keycode != CEC_USER_CONTROL_CODE_UNKNOWN)
+   {
+     LIB_CEC->AddLog(CEC_LOG_DEBUG, "key released: %s (%1x) D:%dms", ToString(key.keycode), key.keycode, key.duration);
+@@ -1107,7 +1107,7 @@ void CCECClient::AddKey(const cec_keypress &key)
+ 
+   if (!isrepeat && (key.keycode != comboKey || key.duration > 0))
+   {
+-    LIB_CEC->AddLog(CEC_LOG_DEBUG, "key pressed: %s (%1x)", ToString(transmitKey.keycode), transmitKey.keycode);
++    LIB_CEC->AddLog(CEC_LOG_DEBUG, "key pressed: %s (%1x, %d)", ToString(transmitKey.keycode), transmitKey.keycode, transmitKey.duration);
+     QueueAddKey(transmitKey);
+   }
+ }
+@@ -1129,6 +1129,7 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+   unsigned int timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+   cec_keypress key;
+   key.keycode = CEC_USER_CONTROL_CODE_UNKNOWN;
++  key.duration = 0;
+ 
+   {
+     CLockObject lock(m_mutex);
+@@ -1140,8 +1141,7 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+         m_configuration.iComboKeyTimeoutMs : CEC_DEFAULT_COMBO_TIMEOUT_MS);
+ 
+     if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN &&
+-          ((m_iCurrentButton == comboKey && iTimeoutMs > 0 && iNow - m_updateButtontime >= iTimeoutMs) ||
+-          (m_iCurrentButton != comboKey && m_releaseButtontime && iNow >= (uint64_t)m_releaseButtontime)))
++          m_iCurrentButton == comboKey && iTimeoutMs > 0 && iNow - m_updateButtontime >= iTimeoutMs)
+     {
+       key.duration = (unsigned int) (iNow - m_initialButtontime);
+       key.keycode = m_iCurrentButton;
+@@ -1155,9 +1155,23 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+       m_releasedButtoncount = 0;
+     }
+     else if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN &&
++          m_iCurrentButton != comboKey && m_releaseButtontime && iNow >= (uint64_t)m_releaseButtontime)
++    {
++      key.duration = (unsigned int) (iNow - m_initialButtontime);
++      key.keycode = CEC_USER_CONTROL_CODE_UNKNOWN;
++
++      m_iCurrentButton = CEC_USER_CONTROL_CODE_UNKNOWN;
++      m_initialButtontime = 0;
++      m_updateButtontime = 0;
++      m_repeatButtontime = 0;
++      m_releaseButtontime = 0;
++      m_pressedButtoncount = 0;
++      m_releasedButtoncount = 0;
++    }
++    else if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN &&
+           (m_iCurrentButton != comboKey && m_repeatButtontime && iNow >= (uint64_t)m_repeatButtontime))
+     {
+-      key.duration = 0;
++      key.duration = (unsigned int) (iNow - m_initialButtontime);
+       key.keycode = m_iCurrentButton;
+       m_repeatButtontime = iNow + m_configuration.iButtonRepeatRateMs;
+       timeout = std::min((uint64_t)timeout, m_repeatButtontime - iNow);
+@@ -1176,8 +1190,8 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+         timeout = CEC_PROCESSOR_SIGNAL_WAIT_TIME;
+       }
+     }
+-    LIB_CEC->AddLog(CEC_LOG_DEBUG, "key %s: %s (%1x) timeout:%dms (rel:%d,rep:%d,prs:%d,rel:%d)", key.keycode == CEC_USER_CONTROL_CODE_UNKNOWN ? "idle" : key.duration ? "released" : "repeated",
+-        ToString(m_iCurrentButton), m_iCurrentButton, timeout, (int)(m_releaseButtontime ? m_releaseButtontime - iNow : 0), (int)(m_repeatButtontime ? m_repeatButtontime - iNow : 0), m_pressedButtoncount, m_releasedButtoncount);
++    LIB_CEC->AddLog(CEC_LOG_DEBUG, "Key %s: %s (duration:%d) (%1x) timeout:%dms (rel:%d,rep:%d,prs:%d,rel:%d)", ToString(m_iCurrentButton), key.keycode == CEC_USER_CONTROL_CODE_UNKNOWN ? "idle" : m_repeatButtontime ? "repeated" : "released", key.duration,
++        m_iCurrentButton, timeout, (int)(m_releaseButtontime ? m_releaseButtontime - iNow : 0), (int)(m_repeatButtontime ? m_repeatButtontime - iNow : 0), m_pressedButtoncount, m_releasedButtoncount);
+   }
+ 
+   if (key.keycode != CEC_USER_CONTROL_CODE_UNKNOWN)
+-- 
+1.9.1
+
+
+From 1ea01f59d8186d4d53af41961aaccbbc11651115 Mon Sep 17 00:00:00 2001
+From: popcornmix <popcornmix@gmail.com>
+Date: Wed, 5 Nov 2014 21:04:25 +0000
+Subject: [PATCH 6/6] squash: Fix for stop needing to be pressed twice
+
+---
+ src/libcec/CECClient.cpp | 17 ++++++++---------
+ 1 file changed, 8 insertions(+), 9 deletions(-)
+
+diff --git a/src/libcec/CECClient.cpp b/src/libcec/CECClient.cpp
+index 1946148..f4f114b 100644
+--- a/src/libcec/CECClient.cpp
++++ b/src/libcec/CECClient.cpp
+@@ -1131,6 +1131,8 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+   key.keycode = CEC_USER_CONTROL_CODE_UNKNOWN;
+   key.duration = 0;
+ 
++  if (m_iCurrentButton == CEC_USER_CONTROL_CODE_UNKNOWN)
++    return timeout;
+   {
+     CLockObject lock(m_mutex);
+     uint64_t iNow = GetTimeMs();
+@@ -1140,8 +1142,7 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+     uint32_t iTimeoutMs(m_configuration.clientVersion >= LIBCEC_VERSION_TO_UINT(2, 0, 5) ?
+         m_configuration.iComboKeyTimeoutMs : CEC_DEFAULT_COMBO_TIMEOUT_MS);
+ 
+-    if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN &&
+-          m_iCurrentButton == comboKey && iTimeoutMs > 0 && iNow - m_updateButtontime >= iTimeoutMs)
++    if (m_iCurrentButton == comboKey && iTimeoutMs > 0 && iNow - m_updateButtontime >= iTimeoutMs)
+     {
+       key.duration = (unsigned int) (iNow - m_initialButtontime);
+       key.keycode = m_iCurrentButton;
+@@ -1154,8 +1155,7 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+       m_pressedButtoncount = 0;
+       m_releasedButtoncount = 0;
+     }
+-    else if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN &&
+-          m_iCurrentButton != comboKey && m_releaseButtontime && iNow >= (uint64_t)m_releaseButtontime)
++    else if (m_iCurrentButton != comboKey && m_releaseButtontime && iNow >= (uint64_t)m_releaseButtontime)
+     {
+       key.duration = (unsigned int) (iNow - m_initialButtontime);
+       key.keycode = CEC_USER_CONTROL_CODE_UNKNOWN;
+@@ -1168,8 +1168,7 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+       m_pressedButtoncount = 0;
+       m_releasedButtoncount = 0;
+     }
+-    else if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN &&
+-          (m_iCurrentButton != comboKey && m_repeatButtontime && iNow >= (uint64_t)m_repeatButtontime))
++    else if (m_iCurrentButton != comboKey && m_repeatButtontime && iNow >= (uint64_t)m_repeatButtontime)
+     {
+       key.duration = (unsigned int) (iNow - m_initialButtontime);
+       key.keycode = m_iCurrentButton;
+@@ -1178,11 +1177,11 @@ uint16_t CCECClient::CheckKeypressTimeout(void)
+     }
+     else
+     {
+-      if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton == comboKey && iTimeoutMs > 0)
++      if (m_iCurrentButton == comboKey && iTimeoutMs > 0)
+         timeout = std::min((uint64_t)timeout, m_updateButtontime - iNow + iTimeoutMs);
+-      if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton != comboKey && m_releaseButtontime)
++      if (m_iCurrentButton != comboKey && m_releaseButtontime)
+         timeout = std::min((uint64_t)timeout, m_releaseButtontime - iNow);
+-      if (m_iCurrentButton != CEC_USER_CONTROL_CODE_UNKNOWN && m_iCurrentButton != comboKey && m_repeatButtontime)
++      if (m_iCurrentButton != comboKey && m_repeatButtontime)
+         timeout = std::min((uint64_t)timeout, m_repeatButtontime - iNow);
+       if (timeout > CEC_PROCESSOR_SIGNAL_WAIT_TIME)
+       {
+-- 
+1.9.1
+

From 8d6481a2cdc86d85b649cc74422a98edfe6e6c2c Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 28 Oct 2014 00:19:40 +0000
Subject: [PATCH 17/46] [cec] Add settings for configuring button repeats

---
 addons/resource.language.en_gb/resources/strings.po | 15 +++++++++++++++
 system/peripherals.xml                              |  4 +++-
 xbmc/peripherals/devices/PeripheralCecAdapter.cpp   | 16 ++++++++++++++++
 3 files changed, 34 insertions(+), 1 deletion(-)

diff --git a/addons/resource.language.en_gb/resources/strings.po b/addons/resource.language.en_gb/resources/strings.po
index 809a5ac..e1a4db9 100644
--- a/addons/resource.language.en_gb/resources/strings.po
+++ b/addons/resource.language.en_gb/resources/strings.po
@@ -16677,3 +16677,18 @@ msgstr ""
 msgctxt "#38009"
 msgid "%i dB"
 msgstr ""
+
+#: system/peripherals.xml
+msgctxt "#38050"
+msgid "Remote button press delay before repeating (ms)"
+msgstr ""
+
+#: system/peripherals.xml
+msgctxt "#38051"
+msgid "Remote button press repeat rate (ms)"
+msgstr ""
+
+#: system/peripherals.xml
+msgctxt "#38052"
+msgid "Remote button press release time (ms)"
+msgstr ""
diff --git a/system/peripherals.xml b/system/peripherals.xml
index a67dc2f..6841bda 100644
--- a/system/peripherals.xml
+++ b/system/peripherals.xml
@@ -30,7 +30,9 @@
     <setting key="device_type" type="int" value="1" configurable="0" />
     <setting key="wake_devices_advanced" type="string" value="" configurable="0" />
     <setting key="standby_devices_advanced" type="string" value="" configurable="0" />
-    <setting key="double_tap_timeout_ms" type="int" min="0" value="300" configurable="0" />
+    <setting key="double_tap_timeout_ms" type="int" min="50" max="1000" step="50" value="300" label="38050" order="16" />
+    <setting key="button_repeat_rate_ms" type="int" min="0" max="250" step="10" value="0" label="38051" order="17" />
+    <setting key="button_release_delay_ms" type="int" min="0" max="500" step="50" value="0" label="38052" order="18" />
   </peripheral>
 
   <peripheral vendor_product="2548:1001,2548:1002" bus="usb" name="Pulse-Eight CEC Adapter" mapTo="cec">
diff --git a/xbmc/peripherals/devices/PeripheralCecAdapter.cpp b/xbmc/peripherals/devices/PeripheralCecAdapter.cpp
index 9eb2eb6..205c459 100644
--- a/xbmc/peripherals/devices/PeripheralCecAdapter.cpp
+++ b/xbmc/peripherals/devices/PeripheralCecAdapter.cpp
@@ -1299,6 +1299,20 @@ void CPeripheralCecAdapter::SetConfigurationFromLibCEC(const CEC::libcec_configu
   m_configuration.bSendInactiveSource = config.bSendInactiveSource;
   bChanged |= SetSetting("send_inactive_source", m_configuration.bSendInactiveSource == 1);
 
+#if defined(CEC_DOUBLE_TAP_TIMEOUT_MS_OLD)
+  m_configuration.iDoubleTapTimeout50Ms = config.iDoubleTapTimeout50Ms;
+  bChanged |= SetSetting("double_tap_timeout_ms", (int)m_configuration.iDoubleTapTimeout50Ms * 50);
+#else
+  m_configuration.iDoubleTapTimeoutMs = config.iDoubleTapTimeoutMs;
+  bChanged |= SetSetting("double_tap_timeout_ms", (int)m_configuration.iDoubleTapTimeoutMs;
+#endif
+
+  m_configuration.iButtonRepeatRateMs = config.iButtonRepeatRateMs;
+  bChanged |= SetSetting("button_repeat_rate_ms", (int)m_configuration.iButtonRepeatRateMs);
+
+  m_configuration.iButtonReleaseDelayMs = config.iButtonReleaseDelayMs;
+  bChanged |= SetSetting("button_release_delay_ms", (int)m_configuration.iButtonReleaseDelayMs);
+
   m_configuration.iFirmwareVersion = config.iFirmwareVersion;
   m_configuration.bShutdownOnStandby = config.bShutdownOnStandby;
 
@@ -1403,6 +1417,8 @@ void CPeripheralCecAdapter::SetConfigurationFromSettings(void)
   // backwards compatibility. will be removed once the next major release of libCEC is out
   m_configuration.iDoubleTapTimeoutMs = GetSettingInt("double_tap_timeout_ms");
 #endif
+  m_configuration.iButtonRepeatRateMs = GetSettingInt("button_repeat_rate_ms");
+  m_configuration.iButtonReleaseDelayMs = GetSettingInt("button_release_delay_ms");
 }
 
 void CPeripheralCecAdapter::ReadLogicalAddresses(const std::string &strString, cec_logical_addresses &addresses)

From f430f36dc17c2fdf2e7c0ef79a81ed84a1691400 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Mon, 3 Nov 2014 23:17:46 +0000
Subject: [PATCH 18/46] [cec] Don't discard buttons when repeat mode is enabled

---
 xbmc/peripherals/devices/PeripheralCecAdapter.cpp | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/xbmc/peripherals/devices/PeripheralCecAdapter.cpp b/xbmc/peripherals/devices/PeripheralCecAdapter.cpp
index 205c459..c879d48 100644
--- a/xbmc/peripherals/devices/PeripheralCecAdapter.cpp
+++ b/xbmc/peripherals/devices/PeripheralCecAdapter.cpp
@@ -799,7 +799,10 @@ void CPeripheralCecAdapter::PushCecKeypress(const CecButtonPress &key)
   CLog::Log(LOGDEBUG, "%s - received key %2x duration %d", __FUNCTION__, key.iButton, key.iDuration);
 
   CSingleLock lock(m_critSection);
-  if (key.iDuration > 0)
+  // avoid the queue getting too long
+  if (m_configuration.iButtonRepeatRateMs && m_buttonQueue.size() > 5)
+    return;
+  if (m_configuration.iButtonRepeatRateMs == 0 && key.iDuration > 0)
   {
     if (m_currentButton.iButton == key.iButton && m_currentButton.iDuration == 0)
     {

From 80f9df8a272bb2d5be8bf4dcf7b9c7d86da0fd41 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 4 Nov 2014 18:50:00 +0000
Subject: [PATCH 19/46] [cec] Temp - more logging

---
 xbmc/peripherals/devices/PeripheralCecAdapter.cpp | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/xbmc/peripherals/devices/PeripheralCecAdapter.cpp b/xbmc/peripherals/devices/PeripheralCecAdapter.cpp
index c879d48..f9bf323 100644
--- a/xbmc/peripherals/devices/PeripheralCecAdapter.cpp
+++ b/xbmc/peripherals/devices/PeripheralCecAdapter.cpp
@@ -796,12 +796,15 @@ void CPeripheralCecAdapter::GetNextKey(void)
 
 void CPeripheralCecAdapter::PushCecKeypress(const CecButtonPress &key)
 {
-  CLog::Log(LOGDEBUG, "%s - received key %2x duration %d", __FUNCTION__, key.iButton, key.iDuration);
+  CLog::Log(LOGDEBUG, "%s - received key %2x duration %d (rep:%d size:%d)", __FUNCTION__, key.iButton, key.iDuration, m_configuration.iButtonRepeatRateMs, m_buttonQueue.size());
 
   CSingleLock lock(m_critSection);
   // avoid the queue getting too long
   if (m_configuration.iButtonRepeatRateMs && m_buttonQueue.size() > 5)
+  {
+    CLog::Log(LOGDEBUG, "%s - discarded key %2x", __FUNCTION__, key.iButton);
     return;
+  }
   if (m_configuration.iButtonRepeatRateMs == 0 && key.iDuration > 0)
   {
     if (m_currentButton.iButton == key.iButton && m_currentButton.iDuration == 0)
@@ -810,6 +813,7 @@ void CPeripheralCecAdapter::PushCecKeypress(const CecButtonPress &key)
       if (m_bHasButton)
         m_currentButton.iDuration = key.iDuration;
       // ignore this one, since it's already been handled by xbmc
+      CLog::Log(LOGDEBUG, "%s - ignored key %2x", __FUNCTION__, key.iButton);
       return;
     }
     // if we received a keypress with a duration set, try to find the same one without a duration set, and replace it
@@ -820,6 +824,7 @@ void CPeripheralCecAdapter::PushCecKeypress(const CecButtonPress &key)
         if ((*it).iDuration == 0)
         {
           // replace this entry
+          CLog::Log(LOGDEBUG, "%s - replaced key %2x", __FUNCTION__, key.iButton);
           (*it).iDuration = key.iDuration;
           return;
         }
@@ -829,6 +834,7 @@ void CPeripheralCecAdapter::PushCecKeypress(const CecButtonPress &key)
     }
   }
 
+  CLog::Log(LOGDEBUG, "%s - added key %2x", __FUNCTION__, key.iButton);
   m_buttonQueue.push_back(key);
 }
 

From c851674486e99bfac15e24e061cac9e90c987e3d Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sat, 15 Nov 2014 12:03:34 +0000
Subject: [PATCH 20/46] [dvdplayer] Add lock for player creation

---
 xbmc/cores/dvdplayer/DVDPlayer.cpp | 3 +++
 xbmc/cores/dvdplayer/DVDPlayer.h   | 1 +
 2 files changed, 4 insertions(+)

diff --git a/xbmc/cores/dvdplayer/DVDPlayer.cpp b/xbmc/cores/dvdplayer/DVDPlayer.cpp
index b8716d9..3065311 100644
--- a/xbmc/cores/dvdplayer/DVDPlayer.cpp
+++ b/xbmc/cores/dvdplayer/DVDPlayer.cpp
@@ -517,6 +517,7 @@ int CSelectionStreams::CountSource(StreamType type, StreamSource source) const
 
 void CDVDPlayer::CreatePlayers()
 {
+  CSingleLock lock(m_players_lock);
 #ifdef HAS_OMXPLAYER
   if (m_omxplayer_mode && OMXPlayerUnsuitable(m_HasVideo, m_HasAudio, m_pDemuxer, m_pInputStream, m_SelectionStreams))
   {
@@ -546,6 +547,7 @@ void CDVDPlayer::CreatePlayers()
 
 void CDVDPlayer::DestroyPlayers()
 {
+  CSingleLock lock(m_players_lock);
   if (!m_players_created)
     return;
   delete m_dvdPlayerVideo;
@@ -4268,6 +4270,7 @@ double CDVDPlayer::GetQueueTime()
 
 void CDVDPlayer::GetVideoStreamInfo(SPlayerVideoStreamInfo &info)
 {
+  CSingleLock lock(m_players_lock);
   info.bitrate = m_dvdPlayerVideo->GetVideoBitrate();
 
   std::string retVal;
diff --git a/xbmc/cores/dvdplayer/DVDPlayer.h b/xbmc/cores/dvdplayer/DVDPlayer.h
index 2a4aea5..f74e71d 100644
--- a/xbmc/cores/dvdplayer/DVDPlayer.h
+++ b/xbmc/cores/dvdplayer/DVDPlayer.h
@@ -557,4 +557,5 @@ class CDVDPlayer : public IPlayer, public CThread, public IDVDPlayer
   // omxplayer variables
   struct SOmxPlayerState m_OmxPlayerState;
   bool m_omxplayer_mode;            // using omxplayer acceleration
+  CCriticalSection m_players_lock;
 };

From 60c5ca176e3d998c64d768d5e97d4d4fdf1cfa04 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Mon, 24 Nov 2014 22:07:25 +0000
Subject: [PATCH 21/46] [dvdplayervideo] Prod decoder when in stills mode

An asynchronous hardware decoder doesn't only produce output pictures when new packets arrive.
In dvd stills mode give it a chance to return pictures that weren't ready when frame was decoded.
---
 xbmc/cores/dvdplayer/DVDPlayerVideo.cpp | 46 ++++++++++++++++++++-------------
 1 file changed, 28 insertions(+), 18 deletions(-)

diff --git a/xbmc/cores/dvdplayer/DVDPlayerVideo.cpp b/xbmc/cores/dvdplayer/DVDPlayerVideo.cpp
index a8add39..9f1892b 100644
--- a/xbmc/cores/dvdplayer/DVDPlayerVideo.cpp
+++ b/xbmc/cores/dvdplayer/DVDPlayerVideo.cpp
@@ -314,7 +314,8 @@ void CDVDPlayerVideo::Process()
 
   while (!m_bStop)
   {
-    int iQueueTimeOut = (int)(m_stalled ? frametime / 4 : frametime * 10) / 1000;
+    bool bPictureWaiting = m_hints.stills && (m_pVideoCodec->Decode(NULL, 0, DVD_NOPTS_VALUE, DVD_NOPTS_VALUE) & VC_PICTURE);
+    int iQueueTimeOut = (int)(bPictureWaiting ? 0 : (m_hints.stills || m_stalled) ? frametime / 4 : frametime * 10) / 1000;
     int iPriority = (m_speed == DVD_PLAYSPEED_PAUSE && m_started) ? 1 : 0;
 
     CDVDMsg* pMsg;
@@ -331,27 +332,36 @@ void CDVDPlayerVideo::Process()
       if( iPriority )
         continue;
 
-      //Okey, start rendering at stream fps now instead, we are likely in a stillframe
-      if( !m_stalled )
+      // check for picture waiting
+      if (bPictureWaiting)
       {
-        if(m_started)
-          CLog::Log(LOGINFO, "CDVDPlayerVideo - Stillframe detected, switching to forced %f fps", m_fFrameRate);
-        m_stalled = true;
-        pts+= frametime*4;
+        // create a dummy demuxer packet to prod the decode logic
+        pMsg = new CDVDMsgDemuxerPacket(CDVDDemuxUtils::AllocateDemuxPacket(0), false);
       }
-
-      //Waiting timed out, output last picture
-      if( picture.iFlags & DVP_FLAG_ALLOCATED )
+      else
       {
-        //Remove interlaced flag before outputting
-        //no need to output this as if it was interlaced
-        picture.iFlags &= ~DVP_FLAG_INTERLACED;
-        picture.iFlags |= DVP_FLAG_NOSKIP;
-        OutputPicture(&picture, pts);
-        pts+= frametime;
-      }
+        //Okey, start rendering at stream fps now instead, we are likely in a stillframe
+        if( !m_stalled )
+        {
+          if(m_started)
+            CLog::Log(LOGINFO, "CDVDPlayerVideo - Stillframe detected, switching to forced %f fps", m_fFrameRate);
+          m_stalled = true;
+          pts+= frametime*4;
+        }
 
-      continue;
+        //Waiting timed out, output last picture
+        if( picture.iFlags & DVP_FLAG_ALLOCATED )
+        {
+          //Remove interlaced flag before outputting
+          //no need to output this as if it was interlaced
+          picture.iFlags &= ~DVP_FLAG_INTERLACED;
+          picture.iFlags |= DVP_FLAG_NOSKIP;
+          OutputPicture(&picture, pts);
+          pts+= frametime;
+        }
+
+        continue;
+      }
     }
 
     if (pMsg->IsType(CDVDMsg::GENERAL_SYNCHRONIZE))

From 923a6a60832291067af167db40a93855e942fb51 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Thu, 27 Nov 2014 16:31:56 +0000
Subject: [PATCH 22/46] [languageinvoker] Reduce priority of python threads

---
 xbmc/interfaces/generic/LanguageInvokerThread.cpp | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/xbmc/interfaces/generic/LanguageInvokerThread.cpp b/xbmc/interfaces/generic/LanguageInvokerThread.cpp
index fcdd063..16f0c89 100644
--- a/xbmc/interfaces/generic/LanguageInvokerThread.cpp
+++ b/xbmc/interfaces/generic/LanguageInvokerThread.cpp
@@ -50,6 +50,11 @@ bool CLanguageInvokerThread::execute(const std::string &script, const std::vecto
   m_args = arguments;
 
   Create();
+  #ifdef TARGET_RASPBERRY_PI
+  /* low prio */
+  SetPriority(GetPriority()-1);
+  #endif
+
   return true;
 }
 

From 56df88bddf5c8bbf083f28406be45e3584a2df35 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sat, 14 Dec 2013 16:55:05 +0000
Subject: [PATCH 23/46] logging: Add microsecond timer to log messages

---
 xbmc/utils/log.cpp | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

diff --git a/xbmc/utils/log.cpp b/xbmc/utils/log.cpp
index 3443f12..31c4a99 100644
--- a/xbmc/utils/log.cpp
+++ b/xbmc/utils/log.cpp
@@ -24,6 +24,7 @@
 #include "threads/Thread.h"
 #include "utils/StringUtils.h"
 #include "CompileInfo.h"
+#include "utils/TimeUtils.cpp"
 
 static const char* const levelNames[] =
 {"DEBUG", "INFO", "NOTICE", "WARNING", "ERROR", "SEVERE", "FATAL", "NONE"};
@@ -198,19 +199,31 @@ void CLog::PrintDebugString(const std::string& line)
 
 bool CLog::WriteLogString(int logLevel, const std::string& logString)
 {
+#if defined(TARGET_LINUX)
+  static const char* prefixFormat = "%02.2d:%02.2d:%02.2d %10.6f T:%" PRIu64" %7s: ";
+#else
   static const char* prefixFormat = "%02.2d:%02.2d:%02.2d T:%" PRIu64" %7s: ";
-
+#endif
   std::string strData(logString);
   /* fixup newline alignment, number of spaces should equal prefix length */
   StringUtils::Replace(strData, "\n", "\n                                            ");
 
   int hour, minute, second;
   s_globals.m_platform.GetCurrentLocalTime(hour, minute, second);
-  
+
+#if defined(TARGET_LINUX)
+  struct timespec now;
+  clock_gettime(CLOCK_MONOTONIC, &now);
+  float Now = now.tv_sec + now.tv_nsec * 1e-9;
+#endif
+
   strData = StringUtils::Format(prefixFormat,
                                   hour,
                                   minute,
                                   second,
+#if defined(TARGET_LINUX)
+                                  Now,
+#endif
                                   (uint64_t)CThread::GetCurrentThreadId(),
                                   levelNames[logLevel]) + strData;
 

From 66b46fdac6ec73d2d9b74394f8474f9c758d9f9f Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sat, 29 Nov 2014 15:25:16 +0000
Subject: [PATCH 24/46] [rbp] hack: wait for splash to complete before changing
 hdmi mode

---
 xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp | 49 +++++++++++++++++++++++++
 1 file changed, 49 insertions(+)

diff --git a/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp b/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
index 68fc647..c80114e 100644
--- a/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
+++ b/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
@@ -214,12 +214,61 @@ int CEGLNativeTypeRaspberryPI::AddUniqueResolution(RESOLUTION_INFO &res, std::ve
 }
 #endif
 
+#include <dirent.h>
+
+pid_t proc_find(const char* name)
+{
+    DIR* dir;
+    struct dirent* ent;
+    char buf[512];
+
+    long  pid;
+    char pname[100] = {0,};
+    char state;
+    FILE *fp=NULL;
+
+    if (!(dir = opendir("/proc"))) {
+        perror("can't open /proc");
+        return -1;
+    }
+
+    while((ent = readdir(dir)) != NULL) {
+        long lpid = atol(ent->d_name);
+        if(lpid < 0)
+            continue;
+        snprintf(buf, sizeof(buf), "/proc/%ld/stat", lpid);
+        fp = fopen(buf, "r");
+
+        if (fp) {
+            if ( (fscanf(fp, "%ld (%[^)]) %c", &pid, pname, &state)) != 3 ){
+                printf("fscanf failed \n");
+                fclose(fp);
+                closedir(dir);
+                return -1;
+            }
+            if (!strcmp(pname, name)) {
+                fclose(fp);
+                closedir(dir);
+                return (pid_t)lpid;
+            }
+            fclose(fp);
+        }
+    }
+
+    closedir(dir);
+    return -1;
+}
+
+
 bool CEGLNativeTypeRaspberryPI::SetNativeResolution(const RESOLUTION_INFO &res)
 {
 #if defined(TARGET_RASPBERRY_PI)
   if(!m_DllBcmHost || !m_nativeWindow)
     return false;
 
+  while (proc_find("hello_video.bin") >= 0)
+    Sleep(100);
+
   DestroyDispmaxWindow();
 
   if(!m_fixedMode && GETFLAGS_GROUP(res.dwFlags) && GETFLAGS_MODE(res.dwFlags))

From 370f02bbf5e5ed886e75a77971f309f38744d2ac Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Thu, 11 Dec 2014 17:00:57 +0000
Subject: [PATCH 25/46] Fix for UI not showing both extractflags and
 extractthumb

---
 addons/resource.language.en_gb/resources/strings.po | 11 ++++++++---
 system/settings/settings.xml                        |  4 ++--
 2 files changed, 10 insertions(+), 5 deletions(-)

diff --git a/addons/resource.language.en_gb/resources/strings.po b/addons/resource.language.en_gb/resources/strings.po
index e1a4db9..bce0e20 100644
--- a/addons/resource.language.en_gb/resources/strings.po
+++ b/addons/resource.language.en_gb/resources/strings.po
@@ -11025,7 +11025,7 @@ msgstr ""
 
 #: system/settings/settings.xml
 msgctxt "#20433"
-msgid "Extract thumbnails and video information"
+msgid "Extract video information from files"
 msgstr ""
 
 #: xbmc/dialogs/GUIDialogSmartPlaylistRule.cpp
@@ -14562,7 +14562,7 @@ msgstr ""
 #. Description of setting "Videos -> File lists -> Extract thumbnails and video information" with label #20433
 #: system/settings/settings.xml
 msgctxt "#36178"
-msgid "Extract thumbnails and metadata information such as codec and aspect ratio from videos."
+msgid "Extract metadata information such as codec and aspect ratio from videos."
 msgstr ""
 
 #. Description of setting "Videos -> File lists -> Replace file names with library titles" with label #20419
@@ -14574,7 +14574,7 @@ msgstr ""
 #. Description of setting "Videos -> File lists -> Extract thumbnails and video information" with label #20433
 #: system/settings/settings.xml
 msgctxt "#36180"
-msgid "Extract thumbnails and information, such as codecs and aspect ratio, to display in library mode."
+msgid "Extract thumbnails, to display in library Mode."
 msgstr ""
 
 #: system/settings/settings.xml
@@ -16692,3 +16692,8 @@ msgstr ""
 msgctxt "#38052"
 msgid "Remote button press release time (ms)"
 msgstr ""
+
+#: system/settings/settings.xml
+msgctxt "#38103"
+msgid "Extract thumbnails from video files"
+msgstr ""
diff --git a/system/settings/settings.xml b/system/settings/settings.xml
index f6ad877..d1acdae 100644
--- a/system/settings/settings.xml
+++ b/system/settings/settings.xml
@@ -861,8 +861,8 @@
           <default>true</default>
           <control type="toggle" />
         </setting>
-        <setting id="myvideos.extractthumb" type="boolean" label="20433" help="36180">
-          <level>4</level>
+        <setting id="myvideos.extractthumb" type="boolean" label="38103" help="36180">
+          <level>1</level>
           <default>true</default>
           <control type="toggle" />
         </setting>

From d69144a55da8f93c0473d4c6d2ff7269a6267cff Mon Sep 17 00:00:00 2001
From: anaconda <anaconda@menakite.eu>
Date: Thu, 11 Sep 2014 21:30:43 +0200
Subject: [PATCH 26/46] Disable autoscrolling while on screensaver and while
 opening streams.

---
 xbmc/Application.cpp                | 10 ++++++++++
 xbmc/Application.h                  |  2 ++
 xbmc/guilib/GUIFadeLabelControl.cpp |  4 +++-
 xbmc/guilib/GUIFont.cpp             |  4 ++++
 xbmc/guilib/GUILabel.cpp            |  4 +++-
 xbmc/guilib/GUITextBox.cpp          |  3 ++-
 6 files changed, 24 insertions(+), 3 deletions(-)

diff --git a/xbmc/Application.cpp b/xbmc/Application.cpp
index c4ec6ca..326ac20 100644
--- a/xbmc/Application.cpp
+++ b/xbmc/Application.cpp
@@ -4974,3 +4974,13 @@ bool CApplication::NotifyActionListeners(const CAction &action) const
   
   return false;
 }
+
+bool CApplication::ScreenSaverDisablesAutoScrolling()
+{
+  bool onBlackDimScreenSaver = IsInScreenSaver() && m_screenSaver &&
+    (m_screenSaver->ID() == "screensaver.xbmc.builtin.black" ||
+     m_screenSaver->ID() == "screensaver.xbmc.builtin.dim");
+  bool openingStreams = m_pPlayer->IsPlaying() && g_windowManager.IsWindowActive(WINDOW_DIALOG_BUSY);
+
+  return onBlackDimScreenSaver || openingStreams;
+}
diff --git a/xbmc/Application.h b/xbmc/Application.h
index 4b50ab2..07a5da2 100644
--- a/xbmc/Application.h
+++ b/xbmc/Application.h
@@ -389,6 +389,8 @@ class CApplication : public CXBApplicationEx, public IPlayerCallback, public IMs
    */
   void UnregisterActionListener(IActionListener *listener);
 
+  bool ScreenSaverDisablesAutoScrolling();
+
 protected:
   virtual bool OnSettingsSaving() const;
 
diff --git a/xbmc/guilib/GUIFadeLabelControl.cpp b/xbmc/guilib/GUIFadeLabelControl.cpp
index ac3cd94..5b8859d 100644
--- a/xbmc/guilib/GUIFadeLabelControl.cpp
+++ b/xbmc/guilib/GUIFadeLabelControl.cpp
@@ -20,6 +20,8 @@
 
 #include "GUIFadeLabelControl.h"
 
+#include "Application.h"
+
 using namespace std;
 
 CGUIFadeLabelControl::CGUIFadeLabelControl(int parentID, int controlID, float posX, float posY, float width, float height, const CLabelInfo& labelInfo, bool scrollOut, unsigned int timeToDelayAtEnd, bool resetOnLabelChange)
@@ -104,7 +106,7 @@ void CGUIFadeLabelControl::Process(unsigned int currentTime, CDirtyRegionList &d
     m_lastLabel = m_currentLabel;
   }
 
-  if (m_infoLabels.size() > 1 || !m_shortText)
+  if ((m_infoLabels.size() > 1 || !m_shortText) && !g_application.ScreenSaverDisablesAutoScrolling())
   { // have scrolling text
     MarkDirtyRegion();
 
diff --git a/xbmc/guilib/GUIFont.cpp b/xbmc/guilib/GUIFont.cpp
index 7f11089..1192b74 100644
--- a/xbmc/guilib/GUIFont.cpp
+++ b/xbmc/guilib/GUIFont.cpp
@@ -22,6 +22,7 @@
 #include "GUIFontTTF.h"
 #include "GraphicContext.h"
 
+#include "Application.h"
 #include "threads/SingleLock.h"
 #include "utils/TimeUtils.h"
 #include "utils/MathUtils.h"
@@ -128,6 +129,9 @@ bool CGUIFont::UpdateScrollInfo(const vecText &text, CScrollInfo &scrollInfo)
   //   If the string is smaller than the viewport, then it may be plotted even
   //   more times than that.
   //
+  if (g_application.ScreenSaverDisablesAutoScrolling())
+    return false;
+
   if (scrollInfo.waitTime)
   {
     scrollInfo.waitTime--;
diff --git a/xbmc/guilib/GUILabel.cpp b/xbmc/guilib/GUILabel.cpp
index 759ac09..bed6ad2 100644
--- a/xbmc/guilib/GUILabel.cpp
+++ b/xbmc/guilib/GUILabel.cpp
@@ -21,6 +21,8 @@
 #include "GUILabel.h"
 #include <limits>
 
+#include "Application.h"
+
 CGUILabel::CGUILabel(float posX, float posY, float width, float height, const CLabelInfo& labelInfo, CGUILabel::OVER_FLOW overflow)
     : m_label(labelInfo)
     , m_textLayout(labelInfo.font, overflow == OVER_FLOW_WRAP, height)
@@ -104,7 +106,7 @@ void CGUILabel::Render()
   color_t color = GetColor();
   bool renderSolid = (m_color == COLOR_DISABLED);
   bool overFlows = (m_renderRect.Width() + 0.5f < m_textLayout.GetTextWidth()); // 0.5f to deal with floating point rounding issues
-  if (overFlows && m_scrolling && !renderSolid)
+  if (overFlows && m_scrolling && !renderSolid && !g_application.ScreenSaverDisablesAutoScrolling())
     m_textLayout.RenderScrolling(m_renderRect.x1, m_renderRect.y1, m_label.angle, color, m_label.shadowColor, 0, m_renderRect.Width(), m_scrollInfo);
   else
   {
diff --git a/xbmc/guilib/GUITextBox.cpp b/xbmc/guilib/GUITextBox.cpp
index 0d5b3f7..6d23024 100644
--- a/xbmc/guilib/GUITextBox.cpp
+++ b/xbmc/guilib/GUITextBox.cpp
@@ -23,6 +23,7 @@
 #include "utils/XBMCTinyXML.h"
 #include "utils/MathUtils.h"
 #include "utils/StringUtils.h"
+#include "Application.h"
 
 #include <algorithm>
 
@@ -134,7 +135,7 @@ void CGUITextBox::Process(unsigned int currentTime, CDirtyRegionList &dirtyregio
   // update our auto-scrolling as necessary
   if (m_autoScrollTime && m_lines.size() > m_itemsPerPage)
   {
-    if (!m_autoScrollCondition || m_autoScrollCondition->Get())
+    if ((!m_autoScrollCondition || m_autoScrollCondition->Get()) && !g_application.ScreenSaverDisablesAutoScrolling())
     {
       if (m_lastRenderTime)
         m_autoScrollDelayTime += currentTime - m_lastRenderTime;

From 3c4e87bc17d53a9a6574212a4e24512d13f46ab3 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sat, 13 Dec 2014 18:35:20 +0000
Subject: [PATCH 27/46] [demuxer] Avoid memcpy on every demuxer packet

Avoids an unnecessary memcpy on every demuxer packet which for
high bitrate videos can be significant.
---
 xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp | 14 +++++++++-----
 xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxPacket.h   |  3 +++
 xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxUtils.cpp  |  7 ++++++-
 3 files changed, 18 insertions(+), 6 deletions(-)

diff --git a/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp b/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp
index 74ff31f..f9b3232 100644
--- a/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp
+++ b/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp
@@ -738,7 +738,7 @@ DemuxPacket* CDVDDemuxFFmpeg::Read()
           {
             if(m_pkt.pkt.stream_index == (int)m_pFormatContext->programs[m_program]->stream_index[i])
             {
-              pPacket = CDVDDemuxUtils::AllocateDemuxPacket(m_pkt.pkt.size);
+              pPacket = CDVDDemuxUtils::AllocateDemuxPacket(0);
               break;
             }
           }
@@ -747,7 +747,7 @@ DemuxPacket* CDVDDemuxFFmpeg::Read()
             bReturnEmpty = true;
         }
         else
-          pPacket = CDVDDemuxUtils::AllocateDemuxPacket(m_pkt.pkt.size);
+          pPacket = CDVDDemuxUtils::AllocateDemuxPacket(0);
       }
       else
         bReturnEmpty = true;
@@ -789,9 +789,13 @@ DemuxPacket* CDVDDemuxFFmpeg::Read()
         // copy contents into our own packet
         pPacket->iSize = m_pkt.pkt.size;
 
-        // maybe we can avoid a memcpy here by detecting where pkt.destruct is pointing too?
         if (m_pkt.pkt.data)
-          memcpy(pPacket->pData, m_pkt.pkt.data, pPacket->iSize);
+        {
+          pPacket->pData = m_pkt.pkt.data;
+          // so we can free AVPacket when DemuxPacket is freed
+          pPacket->pkt = new AVPacket(m_pkt.pkt);
+        }
+
 
         pPacket->pts = ConvertTimestamp(m_pkt.pkt.pts, stream->time_base.den, stream->time_base.num);
         pPacket->dts = ConvertTimestamp(m_pkt.pkt.dts, stream->time_base.den, stream->time_base.num);
@@ -826,7 +830,7 @@ DemuxPacket* CDVDDemuxFFmpeg::Read()
         pPacket->iStreamId = m_pkt.pkt.stream_index;
       }
       m_pkt.result = -1;
-      av_free_packet(&m_pkt.pkt);
+      memset(&m_pkt.pkt, 0, sizeof(AVPacket));
     }
   }
   } // end of lock scope
diff --git a/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxPacket.h b/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxPacket.h
index d64fbb3..012a7d1 100644
--- a/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxPacket.h
+++ b/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxPacket.h
@@ -23,6 +23,8 @@
 #define DMX_SPECIALID_STREAMINFO    -10
 #define DMX_SPECIALID_STREAMCHANGE  -11
 
+struct AVPacket;
+
  typedef struct DemuxPacket
 {
   unsigned char* pData;   // data
@@ -33,4 +35,5 @@
   double pts; // pts in DVD_TIME_BASE
   double dts; // dts in DVD_TIME_BASE
   double duration; // duration in DVD_TIME_BASE if available
+  AVPacket *pkt; // to allow packet to be freed
 } DemuxPacket;
diff --git a/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxUtils.cpp b/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxUtils.cpp
index ab298b2..10c5ee0 100644
--- a/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxUtils.cpp
+++ b/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxUtils.cpp
@@ -34,7 +34,12 @@ void CDVDDemuxUtils::FreeDemuxPacket(DemuxPacket* pPacket)
   if (pPacket)
   {
     try {
-      if (pPacket->pData) _aligned_free(pPacket->pData);
+      if (pPacket->pkt)
+      {
+        av_free_packet(pPacket->pkt);
+        delete pPacket->pkt;
+      }
+      else if (pPacket->pData) _aligned_free(pPacket->pData);
       delete pPacket;
     }
     catch(...) {

From af108b5e489f1fa9767d8bb5c3bd27e99718e0b1 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sun, 15 Feb 2015 14:06:12 +0000
Subject: [PATCH 28/46] [mmal] Allow mmal codec for dvd stills

---
 xbmc/cores/dvdplayer/DVDCodecs/DVDFactoryCodec.cpp | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/xbmc/cores/dvdplayer/DVDCodecs/DVDFactoryCodec.cpp b/xbmc/cores/dvdplayer/DVDCodecs/DVDFactoryCodec.cpp
index 4c363cf..b90237b 100644
--- a/xbmc/cores/dvdplayer/DVDCodecs/DVDFactoryCodec.cpp
+++ b/xbmc/cores/dvdplayer/DVDCodecs/DVDFactoryCodec.cpp
@@ -50,6 +50,9 @@
 #include "Video/DVDVideoCodecAndroidMediaCodec.h"
 #include "android/activity/AndroidFeatures.h"
 #endif
+#if defined(HAS_MMAL)
+#include "linux/RBP.h"
+#endif
 #include "Audio/DVDAudioCodecFFmpeg.h"
 #include "Audio/DVDAudioCodecPassthrough.h"
 #include "Overlay/DVDOverlayCodecSSA.h"
@@ -201,6 +204,10 @@ CDVDVideoCodec* CDVDFactoryCodec::CreateVideoCodec(CDVDStreamInfo &hint, const C
 #endif
   CLog::Log(LOGDEBUG, "CDVDFactoryCodec: compiled in hardware support: %s", hwSupport.c_str());
 
+#if defined(HAS_MMAL)
+  // mmal can handle dvd playback including stills
+  if (!CSettings::Get().GetBool("videoplayer.usemmal") || !g_RBP.GetCodecMpg2())
+#endif
   if (hint.stills && (hint.codec == AV_CODEC_ID_MPEG2VIDEO || hint.codec == AV_CODEC_ID_MPEG1VIDEO))
   {
      // If dvd is an mpeg2 and hint.stills

From 8c6b07fe51486f6e63f01387af8af8ede2513f5e Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 31 Mar 2015 17:31:47 +0100
Subject: [PATCH 29/46] [mmalrenderer] Add SetCodecControl function and prefer
 to return pictures when renderer is low (disabled)

---
 xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.cpp | 13 +++++++++++++
 xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.h   |  2 ++
 2 files changed, 15 insertions(+)

diff --git a/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.cpp b/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.cpp
index 95584aa..c37f321 100644
--- a/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.cpp
+++ b/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.cpp
@@ -124,6 +124,7 @@ CMMALVideo::CMMALVideo()
   m_es_format = mmal_format_alloc();
   m_preroll = true;
   m_speed = DVD_PLAYSPEED_NORMAL;
+  m_codecControlFlags = 0;
 }
 
 CMMALVideo::~CMMALVideo()
@@ -865,6 +866,9 @@ int CMMALVideo::Decode(uint8_t* pData, int iSize, double dts, double pts)
     if (g_advancedSettings.CanLogComponent(LOGVIDEO))
       CLog::Log(LOGDEBUG, "%s::%s -  got output picture:%d", CLASSNAME, __func__, m_output_ready.size());
     ret |= VC_PICTURE;
+    // renderer is low - give priority to returning pictures
+    if (0 && m_codecControlFlags & DVD_CODEC_CTRL_DRAIN)
+      ret &= ~VC_BUFFER;
   }
   if (!ret)
   {
@@ -943,6 +947,7 @@ void CMMALVideo::Reset(void)
   m_startframe = false;
   m_decoderPts = DVD_NOPTS_VALUE;
   m_preroll = !m_hints.stills && (m_speed == DVD_PLAYSPEED_NORMAL || m_speed == DVD_PLAYSPEED_PAUSE);
+  m_codecControlFlags = 0;
 }
 
 void CMMALVideo::SetSpeed(int iSpeed)
@@ -1058,3 +1063,11 @@ bool CMMALVideo::GetCodecStats(double &pts, int &droppedPics)
   droppedPics= -1;
   return false;
 }
+
+void CMMALVideo::SetCodecControl(int flags)
+{
+  CSingleLock lock(m_sharedSection);
+  m_codecControlFlags = flags;
+  if (g_advancedSettings.CanLogComponent(LOGVIDEO))
+    CLog::Log(LOGDEBUG, "%s::%s flags:%x", CLASSNAME, __func__, flags);
+}
diff --git a/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.h b/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.h
index 51a64d1..bde8c06 100644
--- a/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.h
+++ b/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.h
@@ -86,6 +86,7 @@ class CMMALVideo : public CDVDVideoCodec
   virtual void SetDropState(bool bDrop);
   virtual const char* GetName(void) { return m_pFormatName ? m_pFormatName:"mmal-xxx"; }
   virtual bool GetCodecStats(double &pts, int &droppedPics);
+  virtual void SetCodecControl(int flags);
   virtual void SetSpeed(int iSpeed);
 
   // MMAL decoder callback routines.
@@ -130,6 +131,7 @@ class CMMALVideo : public CDVDVideoCodec
   double            m_decoderPts;
   int               m_speed;
   bool              m_preroll;
+  int               m_codecControlFlags;
 
   CCriticalSection m_sharedSection;
   MMAL_COMPONENT_T *m_dec;

From 2bd9b1b9a6ec3c4bcea83a9e13f8ddc455979940 Mon Sep 17 00:00:00 2001
From: anaconda <anaconda@menakite.eu>
Date: Wed, 25 Feb 2015 18:22:21 +0100
Subject: [PATCH 30/46] Load OSD dialogs on startup.

Fixes skipped frames the first time they're loaded in memory on less powered
devices, like a Raspberry Pi, when using DVDPlayer.
See http://forum.kodi.tv/showthread.php?tid=211501&pid=1938811#pid1938811
---
 xbmc/pvr/dialogs/GUIDialogPVRChannelsOSD.cpp          | 1 +
 xbmc/pvr/dialogs/GUIDialogPVRGuideOSD.cpp             | 1 +
 xbmc/video/dialogs/GUIDialogAudioSubtitleSettings.cpp | 4 +++-
 xbmc/video/dialogs/GUIDialogSubtitles.cpp             | 2 +-
 xbmc/video/dialogs/GUIDialogVideoOSD.cpp              | 2 +-
 xbmc/video/dialogs/GUIDialogVideoSettings.cpp         | 4 +++-
 6 files changed, 10 insertions(+), 4 deletions(-)

diff --git a/xbmc/pvr/dialogs/GUIDialogPVRChannelsOSD.cpp b/xbmc/pvr/dialogs/GUIDialogPVRChannelsOSD.cpp
index 1194d4c..82b980f 100644
--- a/xbmc/pvr/dialogs/GUIDialogPVRChannelsOSD.cpp
+++ b/xbmc/pvr/dialogs/GUIDialogPVRChannelsOSD.cpp
@@ -45,6 +45,7 @@ CGUIDialogPVRChannelsOSD::CGUIDialogPVRChannelsOSD() :
     CGUIDialog(WINDOW_DIALOG_PVR_OSD_CHANNELS, "DialogPVRChannelsOSD.xml"),
     Observer()
 {
+  m_loadType = LOAD_ON_GUI_INIT;
   m_vecItems = new CFileItemList;
 }
 
diff --git a/xbmc/pvr/dialogs/GUIDialogPVRGuideOSD.cpp b/xbmc/pvr/dialogs/GUIDialogPVRGuideOSD.cpp
index 1670190..329a3b8 100644
--- a/xbmc/pvr/dialogs/GUIDialogPVRGuideOSD.cpp
+++ b/xbmc/pvr/dialogs/GUIDialogPVRGuideOSD.cpp
@@ -35,6 +35,7 @@ using namespace PVR;
 CGUIDialogPVRGuideOSD::CGUIDialogPVRGuideOSD()
     : CGUIDialog(WINDOW_DIALOG_PVR_OSD_GUIDE, "DialogPVRGuideOSD.xml")
 {
+  m_loadType = LOAD_ON_GUI_INIT;
   m_vecItems = new CFileItemList;
 }
 
diff --git a/xbmc/video/dialogs/GUIDialogAudioSubtitleSettings.cpp b/xbmc/video/dialogs/GUIDialogAudioSubtitleSettings.cpp
index 5e091eb..35b417f 100644
--- a/xbmc/video/dialogs/GUIDialogAudioSubtitleSettings.cpp
+++ b/xbmc/video/dialogs/GUIDialogAudioSubtitleSettings.cpp
@@ -62,7 +62,9 @@ using namespace std;
 CGUIDialogAudioSubtitleSettings::CGUIDialogAudioSubtitleSettings()
   : CGUIDialogSettingsManualBase(WINDOW_DIALOG_AUDIO_OSD_SETTINGS, "VideoOSDSettings.xml"),
     m_passthrough(false)
-{ }
+{
+  m_loadType = LOAD_ON_GUI_INIT;
+}
 
 CGUIDialogAudioSubtitleSettings::~CGUIDialogAudioSubtitleSettings()
 { }
diff --git a/xbmc/video/dialogs/GUIDialogSubtitles.cpp b/xbmc/video/dialogs/GUIDialogSubtitles.cpp
index 6dad844..a3e820c 100644
--- a/xbmc/video/dialogs/GUIDialogSubtitles.cpp
+++ b/xbmc/video/dialogs/GUIDialogSubtitles.cpp
@@ -98,7 +98,7 @@ class CSubtitlesJob: public CJob
 CGUIDialogSubtitles::CGUIDialogSubtitles(void)
     : CGUIDialog(WINDOW_DIALOG_SUBTITLES, "DialogSubtitles.xml")
 {
-  m_loadType  = KEEP_IN_MEMORY;
+  m_loadType  = LOAD_ON_GUI_INIT;
   m_subtitles = new CFileItemList;
   m_serviceItems = new CFileItemList;
   m_pausedOnRun = false;
diff --git a/xbmc/video/dialogs/GUIDialogVideoOSD.cpp b/xbmc/video/dialogs/GUIDialogVideoOSD.cpp
index 7316936..7033124 100644
--- a/xbmc/video/dialogs/GUIDialogVideoOSD.cpp
+++ b/xbmc/video/dialogs/GUIDialogVideoOSD.cpp
@@ -30,7 +30,7 @@ using namespace PVR;
 CGUIDialogVideoOSD::CGUIDialogVideoOSD(void)
     : CGUIDialog(WINDOW_DIALOG_VIDEO_OSD, "VideoOSD.xml")
 {
-  m_loadType = KEEP_IN_MEMORY;
+  m_loadType = LOAD_ON_GUI_INIT;
 }
 
 CGUIDialogVideoOSD::~CGUIDialogVideoOSD(void)
diff --git a/xbmc/video/dialogs/GUIDialogVideoSettings.cpp b/xbmc/video/dialogs/GUIDialogVideoSettings.cpp
index eb814ca..ae4c69f 100644
--- a/xbmc/video/dialogs/GUIDialogVideoSettings.cpp
+++ b/xbmc/video/dialogs/GUIDialogVideoSettings.cpp
@@ -63,7 +63,9 @@ using namespace std;
 CGUIDialogVideoSettings::CGUIDialogVideoSettings()
     : CGUIDialogSettingsManualBase(WINDOW_DIALOG_VIDEO_OSD_SETTINGS, "VideoOSDSettings.xml"),
       m_viewModeChanged(false)
-{ }
+{
+  m_loadType = LOAD_ON_GUI_INIT;
+}
 
 CGUIDialogVideoSettings::~CGUIDialogVideoSettings()
 { }

From 6659b7c64d6b7eaeced43a5bc6cf6176ad9facc0 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sat, 7 Mar 2015 22:46:21 +0000
Subject: [PATCH 31/46] configure: Add raspberry-pi2 platform

---
 configure.ac                                      | 14 +++++++--
 m4/xbmc_arch.m4                                   |  8 ++---
 tools/depends/Makefile.include.in                 |  2 +-
 tools/depends/configure.ac                        | 38 ++++++++++++++++-------
 tools/depends/target/Toolchain.cmake.in           |  2 +-
 tools/depends/target/Toolchain_binaddons.cmake.in |  2 +-
 6 files changed, 44 insertions(+), 22 deletions(-)

diff --git a/configure.ac b/configure.ac
index 5dcc3be..fc200a9 100644
--- a/configure.ac
+++ b/configure.ac
@@ -742,8 +742,17 @@ case $use_platform in
   raspberry-pi)
      target_platform=target_raspberry_pi
      use_neon=no
-     use_arch="arm"
      use_cpu=arm1176jzf-s
+     ;;
+  raspberry-pi2)
+     target_platform=target_raspberry_pi
+     use_neon=yes
+     use_cpu=cortex-a7
+     ;;
+esac
+
+if test "$target_platform" = "target_raspberry_pi" ; then
+     use_arch="arm"
      use_hardcoded_tables="yes"
      use_openmax=no
      ARCH="arm"
@@ -752,8 +761,7 @@ case $use_platform in
      USE_MMAL=1; AC_DEFINE([HAS_MMAL],[1],["Define to 1 if MMAL libs is enabled"])
      CFLAGS="$CFLAGS"
      CXXFLAGS="$CXXFLAGS"
-     ;;
-esac
+fi
 
 if test "$host_vendor" = "apple"; then
   use_avahi=no
diff --git a/m4/xbmc_arch.m4 b/m4/xbmc_arch.m4
index 0b66a82..adb8e97 100644
--- a/m4/xbmc_arch.m4
+++ b/m4/xbmc_arch.m4
@@ -77,9 +77,7 @@ if test "$target_platform" = "target_android" ; then
   AC_SUBST(ARCH_DEFINES, "-DTARGET_POSIX -DTARGET_LINUX -D_LINUX -DTARGET_ANDROID")
 fi
 
-case $use_platform in
-  raspberry-pi)
-     AC_SUBST(ARCH_DEFINES, "-DTARGET_POSIX -DTARGET_LINUX -D_LINUX -D_ARMEL -DTARGET_RASPBERRY_PI")
-     ;;
-esac
+if test "$target_platform" = "target_raspberry_pi" ; then
+  AC_SUBST(ARCH_DEFINES, "-DTARGET_POSIX -DTARGET_LINUX -D_LINUX -D_ARMEL -DTARGET_RASPBERRY_PI")
+fi
 ])
diff --git a/tools/depends/Makefile.include.in b/tools/depends/Makefile.include.in
index e1ac05c..d60cccf 100644
--- a/tools/depends/Makefile.include.in
+++ b/tools/depends/Makefile.include.in
@@ -20,7 +20,7 @@ NATIVE_OS=@build_os@
 CROSS_COMPILING=@cross_compiling@
 ARCH_DEFINES=@ARCH_DEFINES@
 NATIVE_ARCH_DEFINES=@NATIVE_ARCH_DEFINES@
-TARGET_PLATFORM=@use_platform@
+TARGET_PLATFORM=@target_platform@
 XCODE_VERSION=@use_xcode@
 AAPT=@AAPT@
 DX=@DX@
diff --git a/tools/depends/configure.ac b/tools/depends/configure.ac
index 9435fca..4eff331 100644
--- a/tools/depends/configure.ac
+++ b/tools/depends/configure.ac
@@ -17,7 +17,8 @@ AC_ARG_WITH([toolchain],
 AC_ARG_WITH([platform],
   [AS_HELP_STRING([--with-platform],
   [target platform [auto]])],
-  [use_platform=$withval])
+  [use_platform=$withval],
+  [target_platform=$withval])
 
 AC_ARG_WITH([firmware],
   [AS_HELP_STRING([--with-firmware],
@@ -300,34 +301,49 @@ case $host in
     AC_MSG_ERROR(unsupported host ($use_host))
 esac
 
-if test "$use_platform" = "raspberry-pi"; then
+case $use_platform in
+  raspberry-pi)
+     target_platform=raspberry_pi
+     use_neon=no
+     use_cpu=arm1176jzf-s
+     platform_cflags="-mcpu=arm1176jzf-s -mtune=arm1176jzf-s -mfloat-abi=hard -mfpu=vfp"
+     platform_cxxflags="-mcpu=arm1176jzf-s -mtune=arm1176jzf-s -mfloat-abi=hard -mfpu=vfp"
+     platform_ldflags=""
+     ;;
+  raspberry-pi2)
+     target_platform=raspberry_pi
+     use_neon=yes
+     use_cpu=cortex-a7
+     platform_cflags="-fPIC -mcpu=cortex-a7 -mfloat-abi=hard -mfpu=neon-vfpv4"
+     platform_cxxflags="-fPIC -mcpu=cortex-a7 -mfloat-abi=hard -mfpu=neon-vfpv4"
+     platform_ldflags="-lpthread"
+     ;;
+esac
+
+if test "$target_platform" = "raspberry_pi" ; then
   if test -d "${use_firmware}/opt/vc/include"; then
     :
   else
     AC_MSG_ERROR([Raspberry Pi firmware not found])
   fi
-  use_neon=no
   use_arch="arm"
-  use_cpu="arm1176jzf-s"
   use_hardcoded_tables="yes"
-  use_alsa="no"
   ARCH="arm"
   platform_os="linux"
   cross_compiling="yes"
   use_host="arm-linux-gnueabihf"
   deps_dir="$use_host"
-  platform_cflags="-pipe -mcpu=arm1176jzf-s -mtune=arm1176jzf-s -mfloat-abi=hard \
-   -mfpu=vfp -mabi=aapcs-linux -Wno-psabi -Wa,-mno-warn-deprecated \
-   -Wno-deprecated-declarations -isystem${use_firmware}/opt/vc/include \
+  platform_cflags+=" -pipe -mabi=aapcs-linux -Wno-psabi \
+   -Wa,-mno-warn-deprecated -Wno-deprecated-declarations \
+   -isystem${use_firmware}/opt/vc/include \
    -isystem${use_firmware}/opt/vc/include/interface/vcos/pthreads \
    -isystem${use_firmware}/opt/vc/include/interface/vmcs_host/linux"
-  platform_cxxflags="-pipe -mcpu=arm1176jzf-s -mtune=arm1176jzf-s \
-   -mfloat-abi=hard -mfpu=vfp -mabi=aapcs-linux -Wno-psabi \
+  platform_cxxflags+=" -pipe -mabi=aapcs-linux -Wno-psabi \
    -Wa,-mno-warn-deprecated -Wno-deprecated-declarations \
    -isystem${use_firmware}/opt/vc/include \
    -isystem${use_firmware}/opt/vc/include/interface/vcos/pthreads \
    -isystem${use_firmware}/opt/vc/include/interface/vmcs_host/linux"
-  platform_ldflags="-L${use_firmware}/opt/vc/lib -lEGL -lGLESv2 -lbcm_host -lvcos \
+  platform_ldflags+=" -L${use_firmware}/opt/vc/lib -lEGL -lGLESv2 -lbcm_host -lvcos \
    -lvchiq_arm"
 fi
 
diff --git a/tools/depends/target/Toolchain.cmake.in b/tools/depends/target/Toolchain.cmake.in
index 943be73..59385e8 100644
--- a/tools/depends/target/Toolchain.cmake.in
+++ b/tools/depends/target/Toolchain.cmake.in
@@ -1,6 +1,6 @@
 SET(OS "@platform_os@")
 SET(CPU "@use_cpu@")
-SET(PLATFORM "@use_platform@")
+SET(PLATFORM "@target_platform@")
 IF("${OS}" STREQUAL "linux" OR "${OS}" STREQUAL "android")
 SET(CMAKE_SYSTEM_NAME Linux)
 ENDIF()
diff --git a/tools/depends/target/Toolchain_binaddons.cmake.in b/tools/depends/target/Toolchain_binaddons.cmake.in
index cdc2fe4..379bd1d 100644
--- a/tools/depends/target/Toolchain_binaddons.cmake.in
+++ b/tools/depends/target/Toolchain_binaddons.cmake.in
@@ -1,7 +1,7 @@
 set(CMAKE_SYSTEM_VERSION 1)
 set(OS "@platform_os@")
 set(CPU "@use_cpu@")
-set(PLATFORM "@use_platform@")
+set(PLATFORM "@target_platform@")
 if("${OS}" STREQUAL "linux" OR "${OS}" STREQUAL "android")
   set(CMAKE_SYSTEM_NAME Linux)
 endif()

From 6876b123ed36c47a277bd3833892981f07fb44f7 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Wed, 16 Apr 2014 21:18:06 +0100
Subject: [PATCH 32/46] [omxplayer] Don't propagate 3d flags based on supported
 3d modes

---
 xbmc/cores/omxplayer/OMXPlayerVideo.cpp | 29 +++--------------------------
 1 file changed, 3 insertions(+), 26 deletions(-)

diff --git a/xbmc/cores/omxplayer/OMXPlayerVideo.cpp b/xbmc/cores/omxplayer/OMXPlayerVideo.cpp
index 212a89b..dd509ea 100644
--- a/xbmc/cores/omxplayer/OMXPlayerVideo.cpp
+++ b/xbmc/cores/omxplayer/OMXPlayerVideo.cpp
@@ -752,40 +752,17 @@ void OMXPlayerVideo::ResolutionUpdateCallBack(uint32_t width, uint32_t height, f
   uint32_t video_width   = CDisplaySettings::Get().GetResolutionInfo(res).iScreenWidth;
   uint32_t video_height  = CDisplaySettings::Get().GetResolutionInfo(res).iScreenHeight;
 
-  unsigned flags = 0;
   ERenderFormat format = RENDER_FMT_BYPASS;
 
+  /* figure out steremode expected based on user settings and hints */
+  unsigned flags = GetStereoModeFlags(GetStereoMode());
+
   if(m_bAllowFullscreen)
   {
     flags |= CONF_FLAGS_FULLSCREEN;
     m_bAllowFullscreen = false; // only allow on first configure
   }
 
-  flags |= GetStereoModeFlags(GetStereoMode());
-
-  if(flags & CONF_FLAGS_STEREO_MODE_SBS)
-  {
-    if(g_Windowing.Support3D(video_width, video_height, D3DPRESENTFLAG_MODE3DSBS))
-      CLog::Log(LOGNOTICE, "3DSBS movie found");
-    else
-    {
-      flags &= ~CONF_FLAGS_STEREO_MODE_MASK(~0);
-      CLog::Log(LOGNOTICE, "3DSBS movie found but not supported");
-    }
-  }
-  else if(flags & CONF_FLAGS_STEREO_MODE_TAB)
-  {
-    if(g_Windowing.Support3D(video_width, video_height, D3DPRESENTFLAG_MODE3DTB))
-      CLog::Log(LOGNOTICE, "3DTB movie found");
-    else
-    {
-      flags &= ~CONF_FLAGS_STEREO_MODE_MASK(~0);
-      CLog::Log(LOGNOTICE, "3DTB movie found but not supported");
-    }
-  }
-  else
-    CLog::Log(LOGNOTICE, "not a 3D movie");
-
   unsigned int iDisplayWidth  = width;
   unsigned int iDisplayHeight = height;
 

From 0cc06ccba32447c369c72643c212ddef0552e19e Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Thu, 17 Apr 2014 13:01:51 +0100
Subject: [PATCH 33/46] [graphics] Allow switching to a more suitable 3D
 resolution

---
 xbmc/guilib/GraphicContext.cpp | 40 +++++++++++++++++++++++++++++++++++++++-
 xbmc/guilib/GraphicContext.h   |  1 +
 2 files changed, 40 insertions(+), 1 deletion(-)

diff --git a/xbmc/guilib/GraphicContext.cpp b/xbmc/guilib/GraphicContext.cpp
index bd7dff9..ed7316a 100644
--- a/xbmc/guilib/GraphicContext.cpp
+++ b/xbmc/guilib/GraphicContext.cpp
@@ -32,6 +32,7 @@
 #include "input/InputManager.h"
 #include "GUIWindowManager.h"
 #include "video/VideoReferenceClock.h"
+#include <float.h>
 
 using namespace std;
 
@@ -499,6 +500,43 @@ RESOLUTION CGraphicContext::GetVideoResolution() const
   return m_Resolution;
 }
 
+RESOLUTION CGraphicContext::Get3DVideoResolution(RESOLUTION resolution, RENDER_STEREO_MODE mode) const
+{
+  RESOLUTION best = resolution;
+  RESOLUTION_INFO curr = CDisplaySettings::Get().GetResolutionInfo(best);
+  // Find closest refresh rate
+  for (size_t i = (int)RES_DESKTOP; i < CDisplaySettings::Get().ResolutionInfoSize(); i++)
+  {
+    const RESOLUTION_INFO info = CDisplaySettings::Get().GetResolutionInfo((RESOLUTION)i);
+
+    //discard resolutions that are not the same width and height (and interlaced/3D flags)
+    //or have a too low refreshrate
+    if (info.iScreenWidth  != curr.iScreenWidth
+    ||  info.iScreenHeight != curr.iScreenHeight
+    ||  info.iScreen       != curr.iScreen
+    ||  (info.dwFlags & D3DPRESENTFLAG_INTERLACED) != (curr.dwFlags & D3DPRESENTFLAG_INTERLACED)
+    ||  fabs(info.fRefreshRate - curr.fRefreshRate) >= FLT_EPSILON)
+      continue;
+
+    if (mode == RENDER_STEREO_MODE_SPLIT_VERTICAL && info.dwFlags & D3DPRESENTFLAG_MODE3DSBS)
+    {
+      best = (RESOLUTION)i;
+      break;
+    }
+    else if (mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL && info.dwFlags & D3DPRESENTFLAG_MODE3DTB)
+    {
+      best = (RESOLUTION)i;
+      break;
+    }
+    else if ((mode == RENDER_STEREO_MODE_OFF || mode == RENDER_STEREO_MODE_MONO) && !(info.dwFlags & (D3DPRESENTFLAG_MODE3DSBS|D3DPRESENTFLAG_MODE3DTB)))
+    {
+      best = (RESOLUTION)i;
+      break;
+    }
+  }
+  return best;
+}
+
 void CGraphicContext::ResetOverscan(RESOLUTION_INFO &res)
 {
   res.Overscan.left = 0;
@@ -1042,7 +1080,7 @@ void CGraphicContext::Flip(const CDirtyRegionList& dirty)
   if(m_stereoMode != m_nextStereoMode)
   {
     m_stereoMode = m_nextStereoMode;
-    SetVideoResolution(GetVideoResolution(), true);
+    SetVideoResolution(Get3DVideoResolution(m_Resolution, m_stereoMode), true);
     g_windowManager.SendMessage(GUI_MSG_NOTIFY_ALL, 0, 0, GUI_MSG_RENDERER_RESET);
   }
 }
diff --git a/xbmc/guilib/GraphicContext.h b/xbmc/guilib/GraphicContext.h
index a8fd03e..8501e58 100644
--- a/xbmc/guilib/GraphicContext.h
+++ b/xbmc/guilib/GraphicContext.h
@@ -108,6 +108,7 @@ class CGraphicContext : public CCriticalSection,
   bool IsValidResolution(RESOLUTION res);
   void SetVideoResolution(RESOLUTION res, bool forceUpdate = false);
   RESOLUTION GetVideoResolution() const;
+  RESOLUTION Get3DVideoResolution(RESOLUTION resolution, RENDER_STEREO_MODE mode) const;
   void ResetOverscan(RESOLUTION res, OVERSCAN &overscan);
   void ResetOverscan(RESOLUTION_INFO &resinfo);
   void ResetScreenParameters(RESOLUTION res);

From 75ba0eba669427a31ba48689cf6bc907da31ba8e Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Thu, 17 Apr 2014 13:38:55 +0100
Subject: [PATCH 34/46] [3D] Support switching to 3D resolutions

Include matching 3D flags (SBS/TAB) in the score of a resolution to switch to, to enable switching to 3d modes.
Also remove the old code that treated 3D modes differently when assigning a score.
---
 xbmc/cores/VideoRenderers/BaseRenderer.cpp | 47 +++++++++++-------------------
 1 file changed, 17 insertions(+), 30 deletions(-)

diff --git a/xbmc/cores/VideoRenderers/BaseRenderer.cpp b/xbmc/cores/VideoRenderers/BaseRenderer.cpp
index bfafab7..84e6261 100644
--- a/xbmc/cores/VideoRenderers/BaseRenderer.cpp
+++ b/xbmc/cores/VideoRenderers/BaseRenderer.cpp
@@ -222,10 +222,14 @@ void CBaseRenderer::FindResolutionFromFpsMatch(float fps, float& weight)
 RESOLUTION CBaseRenderer::FindClosestResolution(float fps, float multiplier, RESOLUTION current, float& weight)
 {
   RESOLUTION_INFO curr = g_graphicsContext.GetResInfo(current);
+  unsigned int stereo_mode  = CONF_FLAGS_STEREO_MODE_MASK(m_iFlags);
 
   float fRefreshRate = fps;
 
-  float last_diff = fRefreshRate;
+  int c_weight = MathUtils::round_int(RefreshWeight(curr.fRefreshRate, fRefreshRate * multiplier) * 1000.0);
+  if (!(stereo_mode == CONF_FLAGS_STEREO_MODE_SBS) != !(curr.dwFlags & D3DPRESENTFLAG_MODE3DSBS) ||
+      !(stereo_mode == CONF_FLAGS_STEREO_MODE_TAB) != !(curr.dwFlags & D3DPRESENTFLAG_MODE3DTB))
+    c_weight += 1000;
 
   // Find closest refresh rate
   for (size_t i = (int)RES_DESKTOP; i < CDisplaySettings::Get().ResolutionInfoSize(); i++)
@@ -241,40 +245,23 @@ RESOLUTION CBaseRenderer::FindClosestResolution(float fps, float multiplier, RES
     ||  info.fRefreshRate < (fRefreshRate * multiplier / 1.001) - 0.001)
       continue;
 
-    // For 3D choose the closest refresh rate 
-    if(CONF_FLAGS_STEREO_MODE_MASK(m_iFlags))
-    {
-      float diff = (info.fRefreshRate - fRefreshRate);
-      if(diff < 0)
-        diff *= -1.0f;
+    int i_weight = MathUtils::round_int(RefreshWeight(info.fRefreshRate, fRefreshRate * multiplier) * 1000.0);
 
-      if(diff < last_diff)
-      {
-        last_diff = diff;
-        current = (RESOLUTION)i;
-        curr = info;
-      }
-    }
-    else
-    {
-      int c_weight = MathUtils::round_int(RefreshWeight(curr.fRefreshRate, fRefreshRate * multiplier) * 1000.0);
-      int i_weight = MathUtils::round_int(RefreshWeight(info.fRefreshRate, fRefreshRate * multiplier) * 1000.0);
+    if (!(stereo_mode == CONF_FLAGS_STEREO_MODE_SBS) != !(info.dwFlags & D3DPRESENTFLAG_MODE3DSBS) ||
+        !(stereo_mode == CONF_FLAGS_STEREO_MODE_TAB) != !(info.dwFlags & D3DPRESENTFLAG_MODE3DTB))
+      i_weight += 1000;
 
-      // Closer the better, prefer higher refresh rate if the same
-      if ((i_weight <  c_weight)
-      ||  (i_weight == c_weight && info.fRefreshRate > curr.fRefreshRate))
-      {
-        current = (RESOLUTION)i;
-        curr    = info;
-      }
+    // Closer the better, prefer higher refresh rate if the same
+    if ((i_weight <  c_weight)
+    ||  (i_weight == c_weight && info.fRefreshRate > curr.fRefreshRate))
+    {
+      current  = (RESOLUTION)i;
+      curr     = info;
+      c_weight = i_weight;
     }
   }
 
-  // For 3D overwrite weight
-  if(CONF_FLAGS_STEREO_MODE_MASK(m_iFlags))
-    weight = 0;
-  else
-    weight = RefreshWeight(curr.fRefreshRate, fRefreshRate * multiplier);
+  weight = RefreshWeight(curr.fRefreshRate, fRefreshRate * multiplier);
 
   return current;
 }

From 7cf94f9297adabfb9e659e91ddcee6abb2227d58 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Wed, 23 Apr 2014 00:05:07 +0100
Subject: [PATCH 35/46] [graphics] Make pixel ratio for 3d modes consistent

Note: Use the stored stereo flags from lists of resolutions.
Use current stereo mode for current resolution.
---
 xbmc/cores/VideoRenderers/BaseRenderer.cpp      | 10 +++----
 xbmc/guilib/GraphicContext.cpp                  | 37 ++++++++++++-------------
 xbmc/guilib/GraphicContext.h                    | 12 ++++++--
 xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp |  8 ------
 4 files changed, 32 insertions(+), 35 deletions(-)

diff --git a/xbmc/cores/VideoRenderers/BaseRenderer.cpp b/xbmc/cores/VideoRenderers/BaseRenderer.cpp
index 84e6261..f82f37f 100644
--- a/xbmc/cores/VideoRenderers/BaseRenderer.cpp
+++ b/xbmc/cores/VideoRenderers/BaseRenderer.cpp
@@ -119,7 +119,7 @@ bool CBaseRenderer::FindResolutionFromOverride(float fps, float& weight, bool fa
 
     for (size_t j = (int)RES_DESKTOP; j < CDisplaySettings::Get().ResolutionInfoSize(); j++)
     {
-      RESOLUTION_INFO info = g_graphicsContext.GetResInfo((RESOLUTION)j);
+      RESOLUTION_INFO info = g_graphicsContext.GetResInfo((RESOLUTION)j, g_graphicsContext.GetStereoMode((RESOLUTION)j));
 
       if (info.iScreenWidth  == curr.iScreenWidth
        && info.iScreenHeight == curr.iScreenHeight
@@ -179,7 +179,7 @@ void CBaseRenderer::FindResolutionFromFpsMatch(float fps, float& weight)
       //get the resolution with the refreshrate closest to 60 hertz
       for (size_t i = (int)RES_DESKTOP; i < CDisplaySettings::Get().ResolutionInfoSize(); i++)
       {
-        RESOLUTION_INFO info = g_graphicsContext.GetResInfo((RESOLUTION)i);
+        RESOLUTION_INFO info = g_graphicsContext.GetResInfo((RESOLUTION)i, g_graphicsContext.GetStereoMode((RESOLUTION)i));
 
         if (MathUtils::round_int(info.fRefreshRate) == 60
          && info.iScreenWidth  == curr.iScreenWidth
@@ -200,7 +200,7 @@ void CBaseRenderer::FindResolutionFromFpsMatch(float fps, float& weight)
         CLog::Log(LOGDEBUG, "60 hertz refreshrate not available, choosing highest");
         for (size_t i = (int)RES_DESKTOP; i < CDisplaySettings::Get().ResolutionInfoSize(); i++)
         {
-          RESOLUTION_INFO info = g_graphicsContext.GetResInfo((RESOLUTION)i);
+          RESOLUTION_INFO info = g_graphicsContext.GetResInfo((RESOLUTION)i, g_graphicsContext.GetStereoMode((RESOLUTION)i));
 
           if (info.fRefreshRate  >  curr.fRefreshRate
            && info.iScreenWidth  == curr.iScreenWidth
@@ -234,14 +234,14 @@ RESOLUTION CBaseRenderer::FindClosestResolution(float fps, float multiplier, RES
   // Find closest refresh rate
   for (size_t i = (int)RES_DESKTOP; i < CDisplaySettings::Get().ResolutionInfoSize(); i++)
   {
-    const RESOLUTION_INFO info = g_graphicsContext.GetResInfo((RESOLUTION)i);
+    const RESOLUTION_INFO info = g_graphicsContext.GetResInfo((RESOLUTION)i, g_graphicsContext.GetStereoMode((RESOLUTION)i));
 
     //discard resolutions that are not the same width and height (and interlaced/3D flags)
     //or have a too low refreshrate
     if (info.iScreenWidth  != curr.iScreenWidth
     ||  info.iScreenHeight != curr.iScreenHeight
     ||  info.iScreen       != curr.iScreen
-    ||  (info.dwFlags & D3DPRESENTFLAG_MODEMASK) != (curr.dwFlags & D3DPRESENTFLAG_MODEMASK)
+    ||  (info.dwFlags & D3DPRESENTFLAG_INTERLACED) != (curr.dwFlags & D3DPRESENTFLAG_INTERLACED)
     ||  info.fRefreshRate < (fRefreshRate * multiplier / 1.001) - 0.001)
       continue;
 
diff --git a/xbmc/guilib/GraphicContext.cpp b/xbmc/guilib/GraphicContext.cpp
index ed7316a..f591b9c 100644
--- a/xbmc/guilib/GraphicContext.cpp
+++ b/xbmc/guilib/GraphicContext.cpp
@@ -746,32 +746,33 @@ void CGraphicContext::ApplyStateBlock()
   g_Windowing.ApplyStateBlock();
 }
 
-const RESOLUTION_INFO CGraphicContext::GetResInfo(RESOLUTION res) const
+RENDER_STEREO_MODE CGraphicContext::GetStereoMode(RESOLUTION res) const
 {
   RESOLUTION_INFO info = CDisplaySettings::Get().GetResolutionInfo(res);
+  return (info.dwFlags & D3DPRESENTFLAG_MODE3DTB)  ? RENDER_STEREO_MODE_SPLIT_HORIZONTAL :
+         (info.dwFlags & D3DPRESENTFLAG_MODE3DSBS) ? RENDER_STEREO_MODE_SPLIT_VERTICAL : RENDER_STEREO_MODE_OFF;
+}
 
-  if(m_stereoMode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL)
+const RESOLUTION_INFO CGraphicContext::GetResInfo(RESOLUTION res, RENDER_STEREO_MODE stereoMode) const
+{
+  RESOLUTION_INFO info = CDisplaySettings::Get().GetResolutionInfo(res);
+
+  if(stereoMode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL)
   {
-    if((info.dwFlags & D3DPRESENTFLAG_MODE3DTB) == 0)
-    {
-      info.fPixelRatio     /= 2;
-      info.iBlanking        = 0;
-      info.dwFlags         |= D3DPRESENTFLAG_MODE3DTB;
-    }
+    info.fPixelRatio     /= 2;
+    info.iBlanking        = 0;
+    info.dwFlags         |= D3DPRESENTFLAG_MODE3DTB;
     info.iHeight          = (info.iHeight         - info.iBlanking) / 2;
     info.Overscan.top    /= 2;
     info.Overscan.bottom  = (info.Overscan.bottom - info.iBlanking) / 2;
     info.iSubtitles       = (info.iSubtitles      - info.iBlanking) / 2;
   }
 
-  if(m_stereoMode == RENDER_STEREO_MODE_SPLIT_VERTICAL)
+  if(stereoMode == RENDER_STEREO_MODE_SPLIT_VERTICAL)
   {
-    if((info.dwFlags & D3DPRESENTFLAG_MODE3DSBS) == 0)
-    {
-      info.fPixelRatio     *= 2;
-      info.iBlanking        = 0;
-      info.dwFlags         |= D3DPRESENTFLAG_MODE3DSBS;
-    }
+    info.fPixelRatio     *= 2;
+    info.iBlanking        = 0;
+    info.dwFlags         |= D3DPRESENTFLAG_MODE3DSBS;
     info.iWidth           = (info.iWidth         - info.iBlanking) / 2;
     info.Overscan.left   /= 2;
     info.Overscan.right   = (info.Overscan.right - info.iBlanking) / 2;
@@ -795,16 +796,14 @@ void CGraphicContext::SetResInfo(RESOLUTION res, const RESOLUTION_INFO& info)
   if(info.dwFlags & D3DPRESENTFLAG_MODE3DSBS)
   {
     curr.Overscan.right  = info.Overscan.right  * 2 + info.iBlanking;
-    if((curr.dwFlags & D3DPRESENTFLAG_MODE3DSBS) == 0)
-      curr.fPixelRatio  /= 2.0;
+    curr.fPixelRatio  /= 2.0;
   }
 
   if(info.dwFlags & D3DPRESENTFLAG_MODE3DTB)
   {
     curr.Overscan.bottom = info.Overscan.bottom * 2 + info.iBlanking;
     curr.iSubtitles      = info.iSubtitles      * 2 + info.iBlanking;
-    if((curr.dwFlags & D3DPRESENTFLAG_MODE3DTB) == 0)
-      curr.fPixelRatio  *= 2.0;
+    curr.fPixelRatio  *= 2.0;
   }
 }
 
diff --git a/xbmc/guilib/GraphicContext.h b/xbmc/guilib/GraphicContext.h
index 8501e58..0c53cae 100644
--- a/xbmc/guilib/GraphicContext.h
+++ b/xbmc/guilib/GraphicContext.h
@@ -120,11 +120,15 @@ class CGraphicContext : public CCriticalSection,
   void GetAllowedResolutions(std::vector<RESOLUTION> &res);
 
   // output scaling
+  const RESOLUTION_INFO GetResInfo(RESOLUTION res) const
+  {
+    return GetResInfo(res, GetStereoMode());
+  }
   const RESOLUTION_INFO GetResInfo() const
   {
     return GetResInfo(m_Resolution);
   }
-  const RESOLUTION_INFO GetResInfo(RESOLUTION res) const;
+  const RESOLUTION_INFO GetResInfo(RESOLUTION res, RENDER_STEREO_MODE stereo_mode) const;
   void SetResInfo(RESOLUTION res, const RESOLUTION_INFO& info);
 
   /* \brief Get UI scaling information from a given resolution to the screen resolution.
@@ -161,9 +165,11 @@ class CGraphicContext : public CCriticalSection,
   void RestoreOrigin();
   void SetCameraPosition(const CPoint &camera);
   void SetStereoView(RENDER_STEREO_VIEW view);
-  RENDER_STEREO_VIEW GetStereoView()  { return m_stereoView; }
+  RENDER_STEREO_VIEW GetStereoView() const { return m_stereoView; }
   void SetStereoMode(RENDER_STEREO_MODE mode) { m_nextStereoMode = mode; }
-  RENDER_STEREO_MODE GetStereoMode()  { return m_stereoMode; }
+  RENDER_STEREO_MODE GetStereoMode() const { return m_stereoMode; }
+  RENDER_STEREO_MODE GetStereoMode(RESOLUTION res) const;
+
   void RestoreCameraPosition();
   /*! \brief Set a region in which to clip all rendering
    Anything that is rendered after setting a clip region will be clipped so that no part renders
diff --git a/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp b/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
index c80114e..80c05d2 100644
--- a/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
+++ b/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
@@ -499,15 +499,9 @@ bool CEGLNativeTypeRaspberryPI::ProbeResolutions(std::vector<RESOLUTION_INFO> &r
       m_desktopRes.fPixelRatio  = tv_state.display.hdmi.display_options.aspect == 0 ? 1.0f : get_display_aspect_ratio((HDMI_ASPECT_T)tv_state.display.hdmi.display_options.aspect) / ((float)m_desktopRes.iScreenWidth / (float)m_desktopRes.iScreenHeight);
       // Also add 3D flags
       if (tv_state.display.hdmi.format_3d == HDMI_3D_FORMAT_SBS_HALF)
-      {
         m_desktopRes.dwFlags |= D3DPRESENTFLAG_MODE3DSBS;
-        m_desktopRes.fPixelRatio *= 2.0;
-      }
       else if (tv_state.display.hdmi.format_3d == HDMI_3D_FORMAT_TB_HALF)
-      {
         m_desktopRes.dwFlags |= D3DPRESENTFLAG_MODE3DTB;
-        m_desktopRes.fPixelRatio *= 0.5;
-      }
       HDMI_PROPERTY_PARAM_T property;
       property.property = HDMI_PROPERTY_PIXEL_CLOCK_TYPE;
       vc_tv_hdmi_get_property(&property);
@@ -650,7 +644,6 @@ void CEGLNativeTypeRaspberryPI::GetSupportedModes(HDMI_RES_GROUP_T group, std::v
         RESOLUTION_INFO res2 = res;
         res2.dwFlags |= D3DPRESENTFLAG_MODE3DSBS;
         res2.fPixelRatio    = get_display_aspect_ratio((HDMI_ASPECT_T)tv->aspect_ratio) / ((float)res2.iScreenWidth / (float)res2.iScreenHeight);
-        res2.fPixelRatio   *= 2.0f;
         res2.iSubtitles    = (int)(0.965 * res2.iHeight);
 
         AddUniqueResolution(res2, resolutions);
@@ -666,7 +659,6 @@ void CEGLNativeTypeRaspberryPI::GetSupportedModes(HDMI_RES_GROUP_T group, std::v
         RESOLUTION_INFO res2 = res;
         res2.dwFlags |= D3DPRESENTFLAG_MODE3DTB;
         res2.fPixelRatio    = get_display_aspect_ratio((HDMI_ASPECT_T)tv->aspect_ratio) / ((float)res2.iScreenWidth / (float)res2.iScreenHeight);
-        res2.fPixelRatio   *= 0.5f;
         res2.iSubtitles    = (int)(0.965 * res2.iHeight);
 
         AddUniqueResolution(res2, resolutions);

From 21c0c52cf2109a5a4dc169c5e4fa5c8878407918 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 10 Mar 2015 17:05:18 +0000
Subject: [PATCH 36/46] [players] Add settings option to enable MVC support

---
 addons/resource.language.en_gb/resources/strings.po | 10 ++++++++++
 system/settings/rbp.xml                             |  7 +++++++
 xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.cpp  |  5 +++++
 xbmc/cores/omxplayer/OMXVideo.cpp                   |  5 +++++
 4 files changed, 27 insertions(+)

diff --git a/addons/resource.language.en_gb/resources/strings.po b/addons/resource.language.en_gb/resources/strings.po
index bce0e20..f4fd234 100644
--- a/addons/resource.language.en_gb/resources/strings.po
+++ b/addons/resource.language.en_gb/resources/strings.po
@@ -16693,6 +16693,16 @@ msgctxt "#38052"
 msgid "Remote button press release time (ms)"
 msgstr ""
 
+#: system/settings/rbp.xml
+msgctxt "#38110"
+msgid "Support MVC video (full frame 3D)"
+msgstr ""
+
+#: system/settings/rbp.xml
+msgctxt "#38111"
+msgid "This option decodes frames for both eyes of MVC video. Disabling may improve performance if you don't require 3D"
+msgstr ""
+
 #: system/settings/settings.xml
 msgctxt "#38103"
 msgid "Extract thumbnails from video files"
diff --git a/system/settings/rbp.xml b/system/settings/rbp.xml
index a54a4c4..31a6bcc 100644
--- a/system/settings/rbp.xml
+++ b/system/settings/rbp.xml
@@ -27,6 +27,13 @@
           <control type="edit" format="integer" />
         </setting>
       </group>
+      <group id="3">
+        <setting id="videoplayer.supportmvc" type="boolean" label="38110" help="38111">
+          <level>2</level>
+          <default>true</default>
+          <control type="toggle" />
+        </setting>
+      </group>
     </category>
     <category id="myvideos">
       <group id="1">
diff --git a/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.cpp b/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.cpp
index c37f321..a583450 100644
--- a/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.cpp
+++ b/xbmc/cores/dvdplayer/DVDCodecs/Video/MMALCodec.cpp
@@ -537,6 +537,11 @@ bool CMMALVideo::Open(CDVDStreamInfo &hints, CDVDCodecOptions &options)
       // H.264
       m_codingType = MMAL_ENCODING_H264;
       m_pFormatName = "mmal-h264";
+      if (CSettings::Get().GetBool("videoplayer.supportmvc"))
+      {
+        m_codingType = MMAL_ENCODING_MVC;
+        m_pFormatName= "mmal-mvc";
+      }
     break;
     case AV_CODEC_ID_H263:
     case AV_CODEC_ID_MPEG4:
diff --git a/xbmc/cores/omxplayer/OMXVideo.cpp b/xbmc/cores/omxplayer/OMXVideo.cpp
index e4f6d86..5d324f4 100644
--- a/xbmc/cores/omxplayer/OMXVideo.cpp
+++ b/xbmc/cores/omxplayer/OMXVideo.cpp
@@ -430,6 +430,11 @@ bool COMXVideo::Open(CDVDStreamInfo &hints, OMXClock *clock, EDEINTERLACEMODE de
           break;
       }
     }
+    if (CSettings::Get().GetBool("videoplayer.supportmvc"))
+    {
+      m_codingType = OMX_VIDEO_CodingMVC;
+      m_video_codec_name = "omx-mvc";
+    }
     break;
     case AV_CODEC_ID_MPEG4:
       // (role name) video_decoder.mpeg4

From 31d3e7f1b7133ece7428e2ccd8604f0d5053f1a3 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Sat, 14 Mar 2015 12:38:08 +0000
Subject: [PATCH 37/46] [mmalrenderer] Switch to using transform flags for 3d
 modes

---
 .../resource.language.en_gb/resources/strings.po   | 10 +++
 system/settings/rbp.xml                            |  8 ++
 xbmc/cores/VideoRenderers/MMALRenderer.cpp         | 92 ++++++----------------
 xbmc/cores/omxplayer/OMXPlayerVideo.cpp            | 46 ++---------
 xbmc/cores/omxplayer/OMXVideo.cpp                  | 36 ++++-----
 xbmc/cores/omxplayer/OMXVideo.h                    |  2 +-
 xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp    | 11 ++-
 7 files changed, 75 insertions(+), 130 deletions(-)

diff --git a/addons/resource.language.en_gb/resources/strings.po b/addons/resource.language.en_gb/resources/strings.po
index f4fd234..80e62b1 100644
--- a/addons/resource.language.en_gb/resources/strings.po
+++ b/addons/resource.language.en_gb/resources/strings.po
@@ -16703,6 +16703,16 @@ msgctxt "#38111"
 msgid "This option decodes frames for both eyes of MVC video. Disabling may improve performance if you don't require 3D"
 msgstr ""
 
+#: system/settings/rbp.xml
+msgctxt "#38112"
+msgid "Use Full HD HDMI modes for 3D"
+msgstr ""
+
+#: system/settings/rbp.xml
+msgctxt "#38113"
+msgid "This option uses frame-packing to output full resolution for 3D through HDMI"
+msgstr ""
+
 #: system/settings/settings.xml
 msgctxt "#38103"
 msgid "Extract thumbnails from video files"
diff --git a/system/settings/rbp.xml b/system/settings/rbp.xml
index 31a6bcc..b5af261 100644
--- a/system/settings/rbp.xml
+++ b/system/settings/rbp.xml
@@ -33,6 +33,14 @@
           <default>true</default>
           <control type="toggle" />
         </setting>
+        <setting id="videoplayer.framepacking" type="boolean" label="38112" help="38113">
+          <dependencies>
+            <dependency type="enable" setting="videoplayer.supportmvc">true</dependency>
+          </dependencies>
+          <level>2</level>
+          <default>true</default>
+          <control type="toggle" />
+        </setting>
       </group>
     </category>
     <category id="myvideos">
diff --git a/xbmc/cores/VideoRenderers/MMALRenderer.cpp b/xbmc/cores/VideoRenderers/MMALRenderer.cpp
index 9f1f803..6cde0c5 100644
--- a/xbmc/cores/VideoRenderers/MMALRenderer.cpp
+++ b/xbmc/cores/VideoRenderers/MMALRenderer.cpp
@@ -366,11 +366,7 @@ void CMMALRenderer::RenderUpdate(bool clear, DWORD flags, DWORD alpha)
 
   if (!m_bConfigured) return;
 
-  if (g_graphicsContext.GetStereoMode())
-    g_graphicsContext.SetStereoView(RENDER_STEREO_VIEW_LEFT);
   ManageDisplay();
-  if (g_graphicsContext.GetStereoMode())
-    g_graphicsContext.SetStereoView(RENDER_STEREO_VIEW_OFF);
 
   // if running bypass, then the player might need the src/dst rects
   // for sizing video playback on a layer other than the gles layer.
@@ -581,10 +577,8 @@ EINTERLACEMETHOD CMMALRenderer::AutoInterlaceMethod()
 
 void CMMALRenderer::SetVideoRect(const CRect& InSrcRect, const CRect& InDestRect)
 {
-  // we get called twice a frame for left/right. Can ignore the rights.
-  if (g_graphicsContext.GetStereoView() == RENDER_STEREO_VIEW_RIGHT)
-    return;
   CSingleLock lock(m_sharedSection);
+  assert(g_graphicsContext.GetStereoView() != RENDER_STEREO_VIEW_RIGHT);
 
   if (!m_vout_input)
     return;
@@ -626,41 +620,10 @@ void CMMALRenderer::SetVideoRect(const CRect& InSrcRect, const CRect& InDestRect
   CRect gui(0, 0, CDisplaySettings::Get().GetResolutionInfo(res).iWidth, CDisplaySettings::Get().GetResolutionInfo(res).iHeight);
   CRect display(0, 0, CDisplaySettings::Get().GetResolutionInfo(res).iScreenWidth, CDisplaySettings::Get().GetResolutionInfo(res).iScreenHeight);
 
-  if (display_stereo_mode != RENDER_STEREO_MODE_OFF && display_stereo_mode != RENDER_STEREO_MODE_MONO)
-  switch (video_stereo_mode)
-  {
-  case RENDER_STEREO_MODE_SPLIT_VERTICAL:
-    // optimisation - use simpler display mode in common case of unscaled 3d with same display mode
-    if (video_stereo_mode == display_stereo_mode && DestRect.x1 == 0.0f && DestRect.x2 * 2.0f == gui.Width() && !stereo_invert)
-    {
-      SrcRect.x2 *= 2.0f;
-      DestRect.x2 *= 2.0f;
-      video_stereo_mode = RENDER_STEREO_MODE_OFF;
-      display_stereo_mode = RENDER_STEREO_MODE_OFF;
-    }
-    else if (display_stereo_mode == RENDER_STEREO_MODE_ANAGLYPH_RED_CYAN || display_stereo_mode == RENDER_STEREO_MODE_ANAGLYPH_GREEN_MAGENTA || display_stereo_mode == RENDER_STEREO_MODE_ANAGLYPH_YELLOW_BLUE)
-    {
-      SrcRect.x2 *= 2.0f;
-    }
-    break;
-
-  case RENDER_STEREO_MODE_SPLIT_HORIZONTAL:
-    // optimisation - use simpler display mode in common case of unscaled 3d with same display mode
-    if (video_stereo_mode == display_stereo_mode && DestRect.y1 == 0.0f && DestRect.y2 * 2.0f == gui.Height() && !stereo_invert)
-    {
-      SrcRect.y2 *= 2.0f;
-      DestRect.y2 *= 2.0f;
-      video_stereo_mode = RENDER_STEREO_MODE_OFF;
-      display_stereo_mode = RENDER_STEREO_MODE_OFF;
-    }
-    else if (display_stereo_mode == RENDER_STEREO_MODE_ANAGLYPH_RED_CYAN || display_stereo_mode == RENDER_STEREO_MODE_ANAGLYPH_GREEN_MAGENTA || display_stereo_mode == RENDER_STEREO_MODE_ANAGLYPH_YELLOW_BLUE)
-    {
-      SrcRect.y2 *= 2.0f;
-    }
-    break;
-
-  default: break;
-  }
+  if (display_stereo_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL)
+    DestRect.x2 *= 2.0f;
+  else if (display_stereo_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL)
+    DestRect.y2 *= 2.0f;
 
   if (gui != display)
   {
@@ -675,7 +638,7 @@ void CMMALRenderer::SetVideoRect(const CRect& InSrcRect, const CRect& InDestRect
   MMAL_DISPLAYREGION_T region;
   memset(&region, 0, sizeof region);
 
-  region.set                 = MMAL_DISPLAY_SET_DEST_RECT|MMAL_DISPLAY_SET_SRC_RECT|MMAL_DISPLAY_SET_FULLSCREEN|MMAL_DISPLAY_SET_NOASPECT|MMAL_DISPLAY_SET_MODE;
+  region.set                 = MMAL_DISPLAY_SET_DEST_RECT|MMAL_DISPLAY_SET_SRC_RECT|MMAL_DISPLAY_SET_FULLSCREEN|MMAL_DISPLAY_SET_NOASPECT|MMAL_DISPLAY_SET_MODE|MMAL_DISPLAY_SET_TRANSFORM;
   region.dest_rect.x         = lrintf(DestRect.x1);
   region.dest_rect.y         = lrintf(DestRect.y1);
   region.dest_rect.width     = lrintf(DestRect.Width());
@@ -688,35 +651,32 @@ void CMMALRenderer::SetVideoRect(const CRect& InSrcRect, const CRect& InDestRect
 
   region.fullscreen = MMAL_FALSE;
   region.noaspect = MMAL_TRUE;
+  region.mode = MMAL_DISPLAY_MODE_LETTERBOX;
+
+  if (m_renderOrientation == 90)
+    region.transform = MMAL_DISPLAY_ROT90;
+  else if (m_renderOrientation == 180)
+    region.transform = MMAL_DISPLAY_ROT180;
+  else if (m_renderOrientation == 270)
+    region.transform = MMAL_DISPLAY_ROT270;
+  else
+    region.transform = MMAL_DISPLAY_ROT0;
 
-  if (m_renderOrientation)
-  {
-    region.set |= MMAL_DISPLAY_SET_TRANSFORM;
-    if (m_renderOrientation == 90)
-      region.transform = MMAL_DISPLAY_ROT90;
-    else if (m_renderOrientation == 180)
-      region.transform = MMAL_DISPLAY_ROT180;
-    else if (m_renderOrientation == 270)
-      region.transform = MMAL_DISPLAY_ROT270;
-    else assert(0);
-  }
-
-  if (video_stereo_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL && display_stereo_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL)
-    region.mode = MMAL_DISPLAY_MODE_STEREO_TOP_TO_TOP;
-  else if (video_stereo_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL && display_stereo_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL)
-    region.mode = MMAL_DISPLAY_MODE_STEREO_TOP_TO_LEFT;
-  else if (video_stereo_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL && display_stereo_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL)
-    region.mode = MMAL_DISPLAY_MODE_STEREO_LEFT_TO_TOP;
-  else if (video_stereo_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL && display_stereo_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL)
-    region.mode = MMAL_DISPLAY_MODE_STEREO_LEFT_TO_LEFT;
+  if (m_video_stereo_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL)
+    region.transform = (MMAL_DISPLAYTRANSFORM_T)(region.transform | DISPMANX_STEREOSCOPIC_TB);
+  else if (m_video_stereo_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL)
+    region.transform = (MMAL_DISPLAYTRANSFORM_T)(region.transform | DISPMANX_STEREOSCOPIC_SBS);
   else
-    region.mode = MMAL_DISPLAY_MODE_LETTERBOX;
+    region.transform = (MMAL_DISPLAYTRANSFORM_T)(region.transform | DISPMANX_STEREOSCOPIC_MONO);
+
+  if (m_StereoInvert)
+    region.transform = (MMAL_DISPLAYTRANSFORM_T)(region.transform | DISPMANX_STEREOSCOPIC_INVERT);
 
   MMAL_STATUS_T status = mmal_util_set_display_region(m_vout_input, &region);
   if (status != MMAL_SUCCESS)
     CLog::Log(LOGERROR, "%s::%s Failed to set display region (status=%x %s)", CLASSNAME, __func__, status, mmal_status_to_string(status));
 
-  CLog::Log(LOGDEBUG, "%s::%s %d,%d,%d,%d -> %d,%d,%d,%d mode:%d", CLASSNAME, __func__,
+  CLog::Log(LOGDEBUG, "%s::%s %d,%d,%d,%d -> %d,%d,%d,%d t:%x", CLASSNAME, __func__,
       region.src_rect.x, region.src_rect.y, region.src_rect.width, region.src_rect.height,
-      region.dest_rect.x, region.dest_rect.y, region.dest_rect.width, region.dest_rect.height, region.mode);
+      region.dest_rect.x, region.dest_rect.y, region.dest_rect.width, region.dest_rect.height, region.transform);
 }
diff --git a/xbmc/cores/omxplayer/OMXPlayerVideo.cpp b/xbmc/cores/omxplayer/OMXPlayerVideo.cpp
index dd509ea..adf9910 100644
--- a/xbmc/cores/omxplayer/OMXPlayerVideo.cpp
+++ b/xbmc/cores/omxplayer/OMXPlayerVideo.cpp
@@ -649,9 +649,7 @@ int OMXPlayerVideo::GetFreeSpace()
 
 void OMXPlayerVideo::SetVideoRect(const CRect &InSrcRect, const CRect &InDestRect)
 {
-  // we get called twice a frame for left/right. Can ignore the rights.
-  if (g_graphicsContext.GetStereoView() == RENDER_STEREO_VIEW_RIGHT)
-    return;
+  assert(g_graphicsContext.GetStereoView() != RENDER_STEREO_VIEW_RIGHT);
 
   CRect SrcRect = InSrcRect, DestRect = InDestRect;
   unsigned flags = GetStereoModeFlags(GetStereoMode());
@@ -691,42 +689,10 @@ void OMXPlayerVideo::SetVideoRect(const CRect &InSrcRect, const CRect &InDestRec
   CRect gui(0, 0, CDisplaySettings::Get().GetResolutionInfo(res).iWidth, CDisplaySettings::Get().GetResolutionInfo(res).iHeight);
   CRect display(0, 0, CDisplaySettings::Get().GetResolutionInfo(res).iScreenWidth, CDisplaySettings::Get().GetResolutionInfo(res).iScreenHeight);
 
-  switch (video_stereo_mode)
-  {
-  case RENDER_STEREO_MODE_SPLIT_VERTICAL:
-    // optimisation - use simpler display mode in common case of unscaled 3d with same display mode
-    if (video_stereo_mode == display_stereo_mode && DestRect.x1 == 0.0f && DestRect.x2 * 2.0f == gui.Width() && !stereo_invert)
-    {
-      SrcRect.x2 *= 2.0f;
-      DestRect.x2 *= 2.0f;
-      video_stereo_mode = RENDER_STEREO_MODE_OFF;
-      display_stereo_mode = RENDER_STEREO_MODE_OFF;
-    }
-    else if (stereo_invert)
-    {
-      SrcRect.x1 += m_hints.width / 2;
-      SrcRect.x2 += m_hints.width / 2;
-    }
-    break;
-
-  case RENDER_STEREO_MODE_SPLIT_HORIZONTAL:
-    // optimisation - use simpler display mode in common case of unscaled 3d with same display mode
-    if (video_stereo_mode == display_stereo_mode && DestRect.y1 == 0.0f && DestRect.y2 * 2.0f == gui.Height() && !stereo_invert)
-    {
-      SrcRect.y2 *= 2.0f;
-      DestRect.y2 *= 2.0f;
-      video_stereo_mode = RENDER_STEREO_MODE_OFF;
-      display_stereo_mode = RENDER_STEREO_MODE_OFF;
-    }
-    else if (stereo_invert)
-    {
-      SrcRect.y1 += m_hints.height / 2;
-      SrcRect.y2 += m_hints.height / 2;
-    }
-    break;
-
-  default: break;
-  }
+  if (display_stereo_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL)
+    DestRect.x2 *= 2.0f;
+  else if (display_stereo_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL)
+    DestRect.y2 *= 2.0f;
 
   if (gui != display)
   {
@@ -737,7 +703,7 @@ void OMXPlayerVideo::SetVideoRect(const CRect &InSrcRect, const CRect &InDestRec
     DestRect.y1 *= yscale;
     DestRect.y2 *= yscale;
   }
-  m_omxVideo.SetVideoRect(SrcRect, DestRect, video_stereo_mode, display_stereo_mode);
+  m_omxVideo.SetVideoRect(SrcRect, DestRect, m_video_stereo_mode, m_display_stereo_mode, m_StereoInvert);
 }
 
 void OMXPlayerVideo::RenderUpdateCallBack(const void *ctx, const CRect &SrcRect, const CRect &DestRect)
diff --git a/xbmc/cores/omxplayer/OMXVideo.cpp b/xbmc/cores/omxplayer/OMXVideo.cpp
index 5d324f4..832a9c9 100644
--- a/xbmc/cores/omxplayer/OMXVideo.cpp
+++ b/xbmc/cores/omxplayer/OMXVideo.cpp
@@ -220,15 +220,6 @@ bool COMXVideo::PortSettingsChanged()
   OMX_INIT_STRUCTURE(configDisplay);
   configDisplay.nPortIndex = m_omx_render.GetInputPort();
 
-  configDisplay.set = OMX_DISPLAY_SET_TRANSFORM;
-  configDisplay.transform = m_transform;
-  omx_err = m_omx_render.SetConfig(OMX_IndexConfigDisplayRegion, &configDisplay);
-  if(omx_err != OMX_ErrorNone)
-  {
-    CLog::Log(LOGWARNING, "%s::%s - could not set transform : %d", CLASSNAME, __func__, m_transform);
-    return false;
-  }
-
   if(m_hdmi_clock_sync)
   {
     OMX_CONFIG_LATENCYTARGETTYPE latencyTarget;
@@ -845,7 +836,7 @@ void COMXVideo::Reset(void)
 }
 
 ///////////////////////////////////////////////////////////////////////////////////////////
-void COMXVideo::SetVideoRect(const CRect& SrcRect, const CRect& DestRect, RENDER_STEREO_MODE video_mode, RENDER_STEREO_MODE display_mode)
+void COMXVideo::SetVideoRect(const CRect& SrcRect, const CRect& DestRect, RENDER_STEREO_MODE video_mode, RENDER_STEREO_MODE display_mode, bool stereo_invert)
 {
   CSingleLock lock (m_critSection);
   if(!m_is_open)
@@ -855,7 +846,7 @@ void COMXVideo::SetVideoRect(const CRect& SrcRect, const CRect& DestRect, RENDER
 
   OMX_INIT_STRUCTURE(configDisplay);
   configDisplay.nPortIndex = m_omx_render.GetInputPort();
-  configDisplay.set                 = (OMX_DISPLAYSETTYPE)(OMX_DISPLAY_SET_DEST_RECT|OMX_DISPLAY_SET_SRC_RECT|OMX_DISPLAY_SET_FULLSCREEN|OMX_DISPLAY_SET_NOASPECT|OMX_DISPLAY_SET_MODE);
+  configDisplay.set                 = (OMX_DISPLAYSETTYPE)(OMX_DISPLAY_SET_DEST_RECT|OMX_DISPLAY_SET_SRC_RECT|OMX_DISPLAY_SET_FULLSCREEN|OMX_DISPLAY_SET_NOASPECT|OMX_DISPLAY_SET_MODE|OMX_DISPLAY_SET_TRANSFORM);
   configDisplay.dest_rect.x_offset  = lrintf(DestRect.x1);
   configDisplay.dest_rect.y_offset  = lrintf(DestRect.y1);
   configDisplay.dest_rect.width     = lrintf(DestRect.Width());
@@ -868,23 +859,24 @@ void COMXVideo::SetVideoRect(const CRect& SrcRect, const CRect& DestRect, RENDER
 
   configDisplay.fullscreen = OMX_FALSE;
   configDisplay.noaspect = OMX_TRUE;
+  configDisplay.mode = OMX_DISPLAY_MODE_LETTERBOX;
+  configDisplay.transform = m_transform;
 
-  if (video_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL && display_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL)
-    configDisplay.mode = OMX_DISPLAY_MODE_STEREO_TOP_TO_TOP;
-  else if (video_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL && display_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL)
-    configDisplay.mode = OMX_DISPLAY_MODE_STEREO_TOP_TO_LEFT;
-  else if (video_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL && display_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL)
-    configDisplay.mode = OMX_DISPLAY_MODE_STEREO_LEFT_TO_TOP;
-  else if (video_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL && display_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL)
-    configDisplay.mode = OMX_DISPLAY_MODE_STEREO_LEFT_TO_LEFT;
+  if (video_mode == RENDER_STEREO_MODE_SPLIT_HORIZONTAL)
+    configDisplay.transform = (OMX_DISPLAYTRANSFORMTYPE)(configDisplay.transform | DISPMANX_STEREOSCOPIC_TB);
+  else if (video_mode == RENDER_STEREO_MODE_SPLIT_VERTICAL)
+    configDisplay.transform = (OMX_DISPLAYTRANSFORMTYPE)(configDisplay.transform | DISPMANX_STEREOSCOPIC_SBS);
   else
-    configDisplay.mode = OMX_DISPLAY_MODE_LETTERBOX;
+    configDisplay.transform = (OMX_DISPLAYTRANSFORMTYPE)(configDisplay.transform | DISPMANX_STEREOSCOPIC_MONO);
+
+  if (stereo_invert)
+    configDisplay.transform = (OMX_DISPLAYTRANSFORMTYPE)(configDisplay.transform | DISPMANX_STEREOSCOPIC_INVERT);
 
   m_omx_render.SetConfig(OMX_IndexConfigDisplayRegion, &configDisplay);
 
-  CLog::Log(LOGDEBUG, "%s::%s %d,%d,%d,%d -> %d,%d,%d,%d mode:%d", CLASSNAME, __func__,
+  CLog::Log(LOGDEBUG, "%s::%s %d,%d,%d,%d -> %d,%d,%d,%d t:%x", CLASSNAME, __func__,
       configDisplay.src_rect.x_offset, configDisplay.src_rect.y_offset, configDisplay.src_rect.width, configDisplay.src_rect.height,
-      configDisplay.dest_rect.x_offset, configDisplay.dest_rect.y_offset, configDisplay.dest_rect.width, configDisplay.dest_rect.height, configDisplay.mode);
+      configDisplay.dest_rect.x_offset, configDisplay.dest_rect.y_offset, configDisplay.dest_rect.width, configDisplay.dest_rect.height, configDisplay.transform);
 }
 
 int COMXVideo::GetInputBufferSize()
diff --git a/xbmc/cores/omxplayer/OMXVideo.h b/xbmc/cores/omxplayer/OMXVideo.h
index d0634bb..86e94ce 100644
--- a/xbmc/cores/omxplayer/OMXVideo.h
+++ b/xbmc/cores/omxplayer/OMXVideo.h
@@ -59,7 +59,7 @@ class COMXVideo
   void Reset(void);
   void SetDropState(bool bDrop);
   std::string GetDecoderName() { return m_video_codec_name; };
-  void SetVideoRect(const CRect& SrcRect, const CRect& DestRect, RENDER_STEREO_MODE video_mode, RENDER_STEREO_MODE display_mode);
+  void SetVideoRect(const CRect& SrcRect, const CRect& DestRect, RENDER_STEREO_MODE video_mode, RENDER_STEREO_MODE display_mode, bool stereo_invert);
   int GetInputBufferSize();
   bool GetPlayerInfo(double &match, double &phase, double &pll);
   void SubmitEOS();
diff --git a/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp b/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
index 80c05d2..ae85484 100644
--- a/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
+++ b/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
@@ -281,7 +281,9 @@ bool CEGLNativeTypeRaspberryPI::SetNativeResolution(const RESOLUTION_INFO &res)
       /* inform TV of any 3D settings. Note this property just applies to next hdmi mode change, so no need to call for 2D modes */
       HDMI_PROPERTY_PARAM_T property;
       property.property = HDMI_PROPERTY_3D_STRUCTURE;
-      if (res.dwFlags & D3DPRESENTFLAG_MODE3DSBS)
+      if (CSettings::Get().GetBool("videoplayer.framepacking"))
+        property.param1 = HDMI_3D_FORMAT_FRAME_PACKING;
+      else if (res.dwFlags & D3DPRESENTFLAG_MODE3DSBS)
         property.param1 = HDMI_3D_FORMAT_SBS_HALF;
       else if (res.dwFlags & D3DPRESENTFLAG_MODE3DTB)
         property.param1 = HDMI_3D_FORMAT_TB_HALF;
@@ -354,6 +356,13 @@ bool CEGLNativeTypeRaspberryPI::SetNativeResolution(const RESOLUTION_INFO &res)
   DISPMANX_TRANSFORM_T transform = DISPMANX_NO_ROTATE;
   DISPMANX_UPDATE_HANDLE_T dispman_update = m_DllBcmHost->vc_dispmanx_update_start(0);
 
+  if (res.dwFlags & D3DPRESENTFLAG_MODE3DSBS)
+    transform = DISPMANX_STEREOSCOPIC_SBS;
+  else if (res.dwFlags & D3DPRESENTFLAG_MODE3DTB)
+    transform = DISPMANX_STEREOSCOPIC_TB;
+  else
+    transform = DISPMANX_STEREOSCOPIC_MONO;
+
   CLog::Log(LOGDEBUG, "EGL set resolution %dx%d -> %dx%d @ %.2f fps (%d,%d) flags:%x aspect:%.2f\n",
       m_width, m_height, dst_rect.width, dst_rect.height, res.fRefreshRate, GETFLAGS_GROUP(res.dwFlags), GETFLAGS_MODE(res.dwFlags), (int)res.dwFlags, res.fPixelRatio);
 

From 4294d0337d0a3e09851b8fae3d4fa40136aaeace Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Mon, 23 Mar 2015 17:12:31 +0000
Subject: [PATCH 38/46] [ffmpeg] Add support for libdcadec

---
 Makefile.in                                        |   2 +-
 configure.ac                                       |   4 +
 tools/depends/target/Makefile                      |   4 +-
 .../0001-avcodec-add-libdcadec-decoder.patch       | 280 +++++++++++++++++++++
 .../0002-avcodec-Fix-libdcadec-include-dir.patch   |  40 +++
 ...vcodec-add-profile-define-for-DTS-Express.patch |  25 ++
 tools/depends/target/ffmpeg/Makefile               |   7 +-
 tools/depends/target/libdcadec/Makefile            |  38 +++
 8 files changed, 396 insertions(+), 4 deletions(-)
 create mode 100644 tools/depends/target/ffmpeg/0001-avcodec-add-libdcadec-decoder.patch
 create mode 100644 tools/depends/target/ffmpeg/0002-avcodec-Fix-libdcadec-include-dir.patch
 create mode 100644 tools/depends/target/ffmpeg/0003-avcodec-add-profile-define-for-DTS-Express.patch
 create mode 100644 tools/depends/target/libdcadec/Makefile

diff --git a/Makefile.in b/Makefile.in
index 819a43c..f2a4a3a 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -446,7 +446,7 @@ FFMPEGOBJS = @FFMPEG_LIBDIR@/libavcodec.a \
              @FFMPEG_LIBDIR@/libpostproc.a \
              @FFMPEG_LIBDIR@/libswscale.a
 DYNOBJSXBMC+= $(FFMPEGOBJS)
-LIBS+= @GNUTLS_ALL_LIBS@ @VORBISENC_ALL_LIBS@
+LIBS+= @GNUTLS_ALL_LIBS@ @VORBISENC_ALL_LIBS@ @DCADEC_ALL_LIBS@
 
 $(FFMPEGOBJS): dvdpcodecs
 endif
diff --git a/configure.ac b/configure.ac
index fc200a9..baff8b4 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1105,6 +1105,7 @@ AC_CHECK_HEADER([mpeg2dec/mpeg2convert.h],, AC_MSG_ERROR($missing_library),
 AC_CHECK_HEADER([jpeglib.h],,        AC_MSG_ERROR($missing_library))
 AC_CHECK_HEADER([ogg/ogg.h],,        AC_MSG_ERROR($missing_library))
 AC_CHECK_HEADER([vorbis/vorbisfile.h],, AC_MSG_ERROR($missing_library))
+AC_CHECK_HEADER([libdcadec/dca_context.h],, AC_MSG_ERROR($missing_library))
 
 PKG_CHECK_MODULES([LIBCURL], [libcurl],, AC_MSG_ERROR([libcurl not found]))
 XB_FIND_SONAME([CURL], [curl])
@@ -1136,6 +1137,7 @@ PKG_CHECK_MODULES([GNUTLS], [gnutls], [have_gnutls=yes];AC_DEFINE([HAVE_GNUTLS],
 AC_CHECK_LIB([bz2],         [main],, AC_MSG_ERROR($missing_library))
 AC_CHECK_LIB([jpeg],        [main],, AC_MSG_ERROR($missing_library)) # check for cximage
 AC_CHECK_LIB([tiff],        [main],, AC_MSG_ERROR($missing_library))
+AC_CHECK_LIB([dcadec],      [main],, AC_MSG_ERROR($missing_library))
 if echo "$ARCH" | grep -q freebsd; then
 AC_CHECK_LIB([pthread],     [main],LIBS="-pthread $LIBS", AC_MSG_ERROR($missing_library))
 AC_CHECK_LIB([pthread],     [pthread_set_name_np],
@@ -1793,6 +1795,7 @@ if test "${USE_STATIC_FFMPEG}" = "1"; then
   FFMPEG_LIBDIR=${pkg_cfg_prefix}$(PKG_CONFIG_SYSROOT_DIR="" ${PKG_CONFIG} --static --variable=libdir libavcodec)
   GNUTLS_ALL_LIBS=$(${PKG_CONFIG} --static --libs-only-l --silence-errors gnutls)
   VORBISENC_ALL_LIBS=$(${PKG_CONFIG} --static --libs-only-l --silence-errors vorbisenc)
+  DCADEC_ALL_LIBS=$(${PKG_CONFIG} --static --libs-only-l --silence-errors dcadec)
 
   # check if static libs are available
   for ff_lib in ${ff_libs}; do
@@ -2599,6 +2602,7 @@ AC_SUBST(FFMPEG_LIBDIR)
 AC_SUBST(USE_STATIC_FFMPEG)
 AC_SUBST(GNUTLS_ALL_LIBS)
 AC_SUBST(VORBISENC_ALL_LIBS)
+AC_SUBST(DCADEC_ALL_LIBS)
 AC_SUBST(USE_TOUCH_SKIN)
 AC_SUBST(USE_LIBAV_HACKS)
 AC_SUBST(PYTHON_VERSION)
diff --git a/tools/depends/target/Makefile b/tools/depends/target/Makefile
index 45adf25..3576c11 100644
--- a/tools/depends/target/Makefile
+++ b/tools/depends/target/Makefile
@@ -15,7 +15,7 @@ DEPENDS = \
 	python26 libshairplay \
 	libplist libcec libbluray boost tinyxml dummy-libxbmc \
 	libamplayer libssh taglib libusb libnfs libmp3lame \
-	pythonmodule-pil libxslt ffmpeg platform
+	pythonmodule-pil libxslt ffmpeg platform libdcadec
 
 FFMPEG_DEPENDS = gnutls
 
@@ -96,7 +96,7 @@ nettle: gmp
 pythonmodule-pil: $(ZLIB) libjpeg-turbo libpng freetype2 python26
 libsdl2: $(LINUX_SYSTEM_LIBS)
 libxslt: libgcrypt
-ffmpeg: $(ICONV) $(ZLIB) bzip2 libvorbis $(FFMPEG_DEPENDS)
+ffmpeg: $(ICONV) $(ZLIB) bzip2 libvorbis libdcadec $(FFMPEG_DEPENDS)
 libcec: platform
 
 .installed-$(PLATFORM): $(DEPENDS)
diff --git a/tools/depends/target/ffmpeg/0001-avcodec-add-libdcadec-decoder.patch b/tools/depends/target/ffmpeg/0001-avcodec-add-libdcadec-decoder.patch
new file mode 100644
index 0000000..c0c2ac1
--- /dev/null
+++ b/tools/depends/target/ffmpeg/0001-avcodec-add-libdcadec-decoder.patch
@@ -0,0 +1,280 @@
+From 519868de7d9c99876efcaf57d6a9683c22732cde Mon Sep 17 00:00:00 2001
+From: Hendrik Leppkes <h.leppkes@gmail.com>
+Date: Thu, 19 Mar 2015 23:56:22 +0100
+Subject: [PATCH] avcodec: add libdcadec decoder
+
+Signed-off-by: Michael Niedermayer <michaelni@gmx.at>
+---
+ configure              |   4 +
+ libavcodec/Makefile    |   1 +
+ libavcodec/allcodecs.c |   1 +
+ libavcodec/libdcadec.c | 197 +++++++++++++++++++++++++++++++++++++++++++++++++
+ 4 files changed, 203 insertions(+)
+ create mode 100644 libavcodec/libdcadec.c
+
+diff --git a/configure b/configure
+index 1bf8f80..a449bc7 100755
+--- a/configure
++++ b/configure
+@@ -210,6 +210,7 @@ External library support:
+   --enable-libcdio         enable audio CD grabbing with libcdio [no]
+   --enable-libdc1394       enable IIDC-1394 grabbing using libdc1394
+                            and libraw1394 [no]
++  --enable-libdcadec       enable DCA decoding via libdcadec [no]
+   --enable-libfaac         enable AAC encoding via libfaac [no]
+   --enable-libfdk-aac      enable AAC de/encoding via libfdk-aac [no]
+   --enable-libflite        enable flite (voice synthesis) support via libflite [no]
+@@ -1353,6 +1354,7 @@ EXTERNAL_LIBRARY_LIST="
+     libcdio
+     libcelt
+     libdc1394
++    libdcadec
+     libfaac
+     libfdk_aac
+     libflite
+@@ -2359,6 +2361,7 @@ vc1_parser_select="mpegvideo startcode vc1_decoder"
+ # external libraries
+ libaacplus_encoder_deps="libaacplus"
+ libcelt_decoder_deps="libcelt"
++libdcadec_decoder_deps="libdcadec"
+ libfaac_encoder_deps="libfaac"
+ libfaac_encoder_select="audio_frame_queue"
+ libfdk_aac_decoder_deps="libfdk_aac"
+@@ -4922,6 +4925,7 @@ enabled libcelt           && require libcelt celt/celt.h celt_decode -lcelt0 &&
+                              { check_lib celt/celt.h celt_decoder_create_custom -lcelt0 ||
+                                die "ERROR: libcelt must be installed and version must be >= 0.11.0."; }
+ enabled libcaca           && require_pkg_config caca caca.h caca_create_canvas
++enabled libdcadec         && require libdcadec dca_context.h dcadec_context_create -ldcadec
+ enabled libfaac           && require2 libfaac "stdint.h faac.h" faacEncGetVersion -lfaac
+ enabled libfdk_aac        && require libfdk_aac fdk-aac/aacenc_lib.h aacEncOpen -lfdk-aac
+ flite_libs="-lflite_cmu_time_awb -lflite_cmu_us_awb -lflite_cmu_us_kal -lflite_cmu_us_kal16 -lflite_cmu_us_rms -lflite_cmu_us_slt -lflite_usenglish -lflite_cmulex -lflite"
+diff --git a/libavcodec/Makefile b/libavcodec/Makefile
+index 4173f88..1a0c734 100644
+--- a/libavcodec/Makefile
++++ b/libavcodec/Makefile
+@@ -732,6 +732,7 @@ OBJS-$(CONFIG_ELBG_FILTER)             += elbg.o
+ # external codec libraries
+ OBJS-$(CONFIG_LIBAACPLUS_ENCODER)         += libaacplus.o
+ OBJS-$(CONFIG_LIBCELT_DECODER)            += libcelt_dec.o
++OBJS-$(CONFIG_LIBDCADEC_DECODER)          += libdcadec.o
+ OBJS-$(CONFIG_LIBFAAC_ENCODER)            += libfaac.o
+ OBJS-$(CONFIG_LIBFDK_AAC_DECODER)         += libfdk-aacdec.o
+ OBJS-$(CONFIG_LIBFDK_AAC_ENCODER)         += libfdk-aacenc.o
+diff --git a/libavcodec/allcodecs.c b/libavcodec/allcodecs.c
+index 5194e74..bbf70a6 100644
+--- a/libavcodec/allcodecs.c
++++ b/libavcodec/allcodecs.c
+@@ -512,6 +512,7 @@ void avcodec_register_all(void)
+ 
+     /* external libraries */
+     REGISTER_DECODER(LIBCELT,           libcelt);
++    REGISTER_DECODER(LIBDCADEC,         libdcadec)
+     REGISTER_ENCODER(LIBFAAC,           libfaac);
+     REGISTER_ENCDEC (LIBFDK_AAC,        libfdk_aac);
+     REGISTER_ENCDEC (LIBGSM,            libgsm);
+diff --git a/libavcodec/libdcadec.c b/libavcodec/libdcadec.c
+new file mode 100644
+index 0000000..d060db5
+--- /dev/null
++++ b/libavcodec/libdcadec.c
+@@ -0,0 +1,197 @@
++/*
++ * libdcadec decoder wrapper
++ * Copyright (C) 2015 Hendrik Leppkes
++ *
++ * This file is part of FFmpeg.
++ *
++ * FFmpeg is free software; you can redistribute it and/or
++ * modify it under the terms of the GNU Lesser General Public
++ * License as published by the Free Software Foundation; either
++ * version 2.1 of the License, or (at your option) any later version.
++ *
++ * FFmpeg is distributed in the hope that it will be useful,
++ * but WITHOUT ANY WARRANTY; without even the implied warranty of
++ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
++ * Lesser General Public License for more details.
++ *
++ * You should have received a copy of the GNU Lesser General Public
++ * License along with FFmpeg; if not, write to the Free Software
++ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
++ */
++
++#include <dca_context.h>
++
++#include "libavutil/avassert.h"
++#include "libavutil/channel_layout.h"
++#include "libavutil/common.h"
++#include "libavutil/opt.h"
++#include "avcodec.h"
++#include "dca.h"
++#include "dca_syncwords.h"
++#include "internal.h"
++
++typedef struct DCADecContext {
++    struct dcadec_context *ctx;
++    uint8_t *buffer;
++    int buffer_size;
++} DCADecContext;
++
++static int dcadec_decode_frame(AVCodecContext *avctx, void *data,
++                               int *got_frame_ptr, AVPacket *avpkt)
++{
++    DCADecContext *s = avctx->priv_data;
++    AVFrame *frame = data;
++    int ret, i, k;
++    int **samples, nsamples, channel_mask, sample_rate, bits_per_sample, profile;
++    uint32_t mrk;
++    uint8_t *input = avpkt->data;
++    int input_size = avpkt->size;
++
++    /* convert bytestream syntax to RAW BE format if required */
++    mrk = AV_RB32(input);
++    if (mrk != DCA_SYNCWORD_CORE_BE && mrk != DCA_SYNCWORD_SUBSTREAM) {
++        s->buffer = av_fast_realloc(s->buffer, &s->buffer_size, avpkt->size + FF_INPUT_BUFFER_PADDING_SIZE);
++        if (!s->buffer)
++            return AVERROR(ENOMEM);
++
++        if ((ret = avpriv_dca_convert_bitstream(avpkt->data, avpkt->size, s->buffer, s->buffer_size)) < 0)
++            return ret;
++
++        input      = s->buffer;
++        input_size = ret;
++    }
++
++    if ((ret = dcadec_context_parse(s->ctx, input, input_size)) < 0) {
++        av_log(avctx, AV_LOG_ERROR, "dcadec_context_parse() failed: %d (%s)\n", -ret, dcadec_strerror(ret));
++        return AVERROR_EXTERNAL;
++    }
++    if ((ret = dcadec_context_filter(s->ctx, &samples, &nsamples, &channel_mask,
++                                     &sample_rate, &bits_per_sample, &profile)) < 0) {
++        av_log(avctx, AV_LOG_ERROR, "dcadec_context_filter() failed: %d (%s)\n", -ret, dcadec_strerror(ret));
++        return AVERROR_EXTERNAL;
++    }
++
++    avctx->channels       = av_get_channel_layout_nb_channels(channel_mask);
++    avctx->channel_layout = channel_mask;
++    avctx->sample_rate    = sample_rate;
++
++    av_assert0(bits_per_sample >= 16 && bits_per_sample <= 24);
++    if (bits_per_sample == 16)
++        avctx->sample_fmt = AV_SAMPLE_FMT_S16P;
++    else
++        avctx->sample_fmt = AV_SAMPLE_FMT_S32P;
++
++    avctx->bits_per_raw_sample = bits_per_sample;
++
++    switch (profile) {
++    case DCADEC_PROFILE_DS:
++        avctx->profile = FF_PROFILE_DTS;
++        break;
++    case DCADEC_PROFILE_DS_96_24:
++        avctx->profile = FF_PROFILE_DTS_96_24;
++        break;
++    case DCADEC_PROFILE_DS_ES:
++        avctx->profile = FF_PROFILE_DTS_ES;
++        break;
++    case DCADEC_PROFILE_HD_HRA:
++        avctx->profile = FF_PROFILE_DTS_HD_HRA;
++        break;
++    case DCADEC_PROFILE_HD_MA:
++        avctx->profile = FF_PROFILE_DTS_HD_MA;
++        break;
++    case DCADEC_PROFILE_EXPRESS:
++        avctx->profile = FF_PROFILE_DTS_EXPRESS;
++        break;
++    case DCADEC_PROFILE_UNKNOWN:
++    default:
++        avctx->profile = FF_PROFILE_UNKNOWN;
++        break;
++    }
++
++    /* bitrate is only meaningful if there are no HD extensions, as they distort the bitrate */
++    if (profile == DCADEC_PROFILE_DS || profile == DCADEC_PROFILE_DS_96_24 || profile == DCADEC_PROFILE_DS_ES) {
++        struct dcadec_core_info *info = dcadec_context_get_core_info(s->ctx);
++        avctx->bit_rate = info->bit_rate;
++        dcadec_context_free_core_info(info);
++    } else
++        avctx->bit_rate = 0;
++
++    frame->nb_samples = nsamples;
++    if ((ret = ff_get_buffer(avctx, frame, 0)) < 0)
++        return ret;
++
++    for (i = 0; i < avctx->channels; i++) {
++        if (frame->format == AV_SAMPLE_FMT_S16P) {
++            int16_t *plane = (int16_t *)frame->extended_data[i];
++            for (k = 0; k < nsamples; k++)
++                plane[k] = samples[i][k];
++        } else {
++            int32_t *plane = (int32_t *)frame->extended_data[i];
++            int shift = 32 - bits_per_sample;
++            for (k = 0; k < nsamples; k++)
++                plane[k] = samples[i][k] << shift;
++        }
++    }
++
++    *got_frame_ptr = 1;
++
++    return avpkt->size;
++}
++
++static av_cold void dcadec_flush(AVCodecContext *avctx)
++{
++    DCADecContext *s = avctx->priv_data;
++    dcadec_context_clear(s->ctx);
++}
++
++static av_cold int dcadec_close(AVCodecContext *avctx)
++{
++    DCADecContext *s = avctx->priv_data;
++
++    dcadec_context_destroy(s->ctx);
++    s->ctx = NULL;
++
++    av_freep(&s->buffer);
++
++    return 0;
++}
++
++static av_cold int dcadec_init(AVCodecContext *avctx)
++{
++    DCADecContext *s = avctx->priv_data;
++
++    s->ctx = dcadec_context_create(0);
++    if (!s->ctx)
++        return AVERROR(ENOMEM);
++
++    avctx->sample_fmt = AV_SAMPLE_FMT_S32P;
++    avctx->bits_per_raw_sample = 24;
++
++    return 0;
++}
++
++static const AVProfile profiles[] = {
++    { FF_PROFILE_DTS,         "DTS"         },
++    { FF_PROFILE_DTS_ES,      "DTS-ES"      },
++    { FF_PROFILE_DTS_96_24,   "DTS 96/24"   },
++    { FF_PROFILE_DTS_HD_HRA,  "DTS-HD HRA"  },
++    { FF_PROFILE_DTS_HD_MA,   "DTS-HD MA"   },
++    { FF_PROFILE_DTS_EXPRESS, "DTS Express" },
++    { FF_PROFILE_UNKNOWN },
++};
++
++AVCodec ff_libdcadec_decoder = {
++    .name           = "libdcadec",
++    .long_name      = NULL_IF_CONFIG_SMALL("dcadec DCA decoder"),
++    .type           = AVMEDIA_TYPE_AUDIO,
++    .id             = AV_CODEC_ID_DTS,
++    .priv_data_size = sizeof(DCADecContext),
++    .init           = dcadec_init,
++    .decode         = dcadec_decode_frame,
++    .close          = dcadec_close,
++    .flush          = dcadec_flush,
++    .capabilities   = CODEC_CAP_DR1 | CODEC_CAP_CHANNEL_CONF,
++    .sample_fmts    = (const enum AVSampleFormat[]) { AV_SAMPLE_FMT_S32P, AV_SAMPLE_FMT_S16P,
++                                                      AV_SAMPLE_FMT_NONE },
++    .profiles       = NULL_IF_CONFIG_SMALL(profiles),
++};
+-- 
+1.9.1
+
diff --git a/tools/depends/target/ffmpeg/0002-avcodec-Fix-libdcadec-include-dir.patch b/tools/depends/target/ffmpeg/0002-avcodec-Fix-libdcadec-include-dir.patch
new file mode 100644
index 0000000..b4db15d
--- /dev/null
+++ b/tools/depends/target/ffmpeg/0002-avcodec-Fix-libdcadec-include-dir.patch
@@ -0,0 +1,40 @@
+From 4f3c31df3f569c7171ee9e651ddf479690367b9b Mon Sep 17 00:00:00 2001
+From: =?UTF-8?q?Kacper=20Michaj=C5=82ow?= <kasper93@gmail.com>
+Date: Fri, 20 Mar 2015 01:58:25 +0100
+Subject: [PATCH] avcodec: Fix libdcadec include dir
+
+Signed-off-by: Michael Niedermayer <michaelni@gmx.at>
+---
+ configure              | 2 +-
+ libavcodec/libdcadec.c | 2 +-
+ 2 files changed, 2 insertions(+), 2 deletions(-)
+
+diff --git a/configure b/configure
+index a449bc7..1ef83e3 100755
+--- a/configure
++++ b/configure
+@@ -4925,7 +4925,7 @@ enabled libcelt           && require libcelt celt/celt.h celt_decode -lcelt0 &&
+                              { check_lib celt/celt.h celt_decoder_create_custom -lcelt0 ||
+                                die "ERROR: libcelt must be installed and version must be >= 0.11.0."; }
+ enabled libcaca           && require_pkg_config caca caca.h caca_create_canvas
+-enabled libdcadec         && require libdcadec dca_context.h dcadec_context_create -ldcadec
++enabled libdcadec         && require libdcadec libdcadec/dca_context.h dcadec_context_create -ldcadec
+ enabled libfaac           && require2 libfaac "stdint.h faac.h" faacEncGetVersion -lfaac
+ enabled libfdk_aac        && require libfdk_aac fdk-aac/aacenc_lib.h aacEncOpen -lfdk-aac
+ flite_libs="-lflite_cmu_time_awb -lflite_cmu_us_awb -lflite_cmu_us_kal -lflite_cmu_us_kal16 -lflite_cmu_us_rms -lflite_cmu_us_slt -lflite_usenglish -lflite_cmulex -lflite"
+diff --git a/libavcodec/libdcadec.c b/libavcodec/libdcadec.c
+index d060db5..a28b983 100644
+--- a/libavcodec/libdcadec.c
++++ b/libavcodec/libdcadec.c
+@@ -19,7 +19,7 @@
+  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
+  */
+ 
+-#include <dca_context.h>
++#include <libdcadec/dca_context.h>
+ 
+ #include "libavutil/avassert.h"
+ #include "libavutil/channel_layout.h"
+-- 
+1.9.1
+
diff --git a/tools/depends/target/ffmpeg/0003-avcodec-add-profile-define-for-DTS-Express.patch b/tools/depends/target/ffmpeg/0003-avcodec-add-profile-define-for-DTS-Express.patch
new file mode 100644
index 0000000..1550538
--- /dev/null
+++ b/tools/depends/target/ffmpeg/0003-avcodec-add-profile-define-for-DTS-Express.patch
@@ -0,0 +1,25 @@
+From 11fe56c8bbf39cd0c3edbf0cd404dea400ff7e0c Mon Sep 17 00:00:00 2001
+From: Hendrik Leppkes <h.leppkes@gmail.com>
+Date: Thu, 19 Mar 2015 23:45:39 +0100
+Subject: [PATCH] avcodec: add profile define for DTS Express
+
+Signed-off-by: Michael Niedermayer <michaelni@gmx.at>
+---
+ libavcodec/avcodec.h | 1 +
+ 1 file changed, 1 insertion(+)
+
+diff --git a/libavcodec/avcodec.h b/libavcodec/avcodec.h
+index cdc8aa1..48e212f 100644
+--- a/libavcodec/avcodec.h
++++ b/libavcodec/avcodec.h
+@@ -2851,6 +2851,7 @@ typedef struct AVCodecContext {
+ #define FF_PROFILE_DTS_96_24   40
+ #define FF_PROFILE_DTS_HD_HRA  50
+ #define FF_PROFILE_DTS_HD_MA   60
++#define FF_PROFILE_DTS_EXPRESS 70
+ 
+ #define FF_PROFILE_MPEG2_422    0
+ #define FF_PROFILE_MPEG2_HIGH   1
+-- 
+1.9.1
+
diff --git a/tools/depends/target/ffmpeg/Makefile b/tools/depends/target/ffmpeg/Makefile
index 6e8364a..3b8c024 100644
--- a/tools/depends/target/ffmpeg/Makefile
+++ b/tools/depends/target/ffmpeg/Makefile
@@ -1,6 +1,7 @@
 include ../../Makefile.include
 include FFMPEG-VERSION
-DEPS= ../../Makefile.include FFMPEG-VERSION Makefile ffmpeg_Speed_up_wtv_index_creation.patch
+DEPS= ../../Makefile.include FFMPEG-VERSION Makefile ffmpeg_Speed_up_wtv_index_creation.patch \
+  0001-avcodec-add-libdcadec-decoder.patch  0002-avcodec-Fix-libdcadec-include-dir.patch 0003-avcodec-add-profile-define-for-DTS-Express.patch
 
 # set to "yes" to enable patching
 # we don't apply patches until we move to a vanilla ffmpeg tarball
@@ -55,6 +56,7 @@ endif
 ifeq ($(Configuration), Release)
   ffmpg_config += --disable-debug
 endif
+ffmpg_config += --enable-libdcadec --disable-decoder=dca
 
 
 CLEAN_FILES=$(ARCHIVE) $(PLATFORM)
@@ -69,6 +71,9 @@ $(PLATFORM): $(TARBALLS_LOCATION)/$(ARCHIVE) $(DEPS)
 	cd $(PLATFORM); $(ARCHIVE_TOOL) $(ARCHIVE_TOOL_FLAGS) $(TARBALLS_LOCATION)/$(ARCHIVE)
 	cd $(PLATFORM); sed -i".bak" -e "s%pkg_config_default=pkg-config%export PKG_CONFIG_LIBDIR=$(PREFIX)/lib/pkgconfig \&\& pkg_config_default=$(NATIVEPREFIX)/bin/pkg-config%" configure
 	cd $(PLATFORM); patch -p3 < ../ffmpeg_Speed_up_wtv_index_creation.patch
+	cd $(PLATFORM); patch -p1 < ../0001-avcodec-add-libdcadec-decoder.patch
+	cd $(PLATFORM); patch -p1 < ../0002-avcodec-Fix-libdcadec-include-dir.patch
+	cd $(PLATFORM); patch -p1 < ../0003-avcodec-add-profile-define-for-DTS-Express.patch
 	cd $(PLATFORM);\
 	CFLAGS="$(CFLAGS)" CXXFLAGS="$(CXXFLAGS)" CPPFLAGS="$(CPPFLAGS)" LDFLAGS="$(LDFLAGS)" \
 	./configure $(ffmpg_config)
diff --git a/tools/depends/target/libdcadec/Makefile b/tools/depends/target/libdcadec/Makefile
new file mode 100644
index 0000000..e68ec46
--- /dev/null
+++ b/tools/depends/target/libdcadec/Makefile
@@ -0,0 +1,38 @@
+include ../../Makefile.include
+DEPS= ../../Makefile.include Makefile
+
+# lib name, version
+LIBNAME=dcadec
+ARCHIVE=master.tar.gz
+BASE_URL=https://github.com/foo86/dcadec/archive
+
+# configuration settings
+
+LIBDYLIB=$(PLATFORM)/.libs/lib$(LIBNAME).a
+
+CLEAN_FILES=$(ARCHIVE) $(PLATFORM)
+
+CFLAGS += -std=gnu99
+
+all: $(LIBDYLIB) .installed-$(PLATFORM)
+
+$(TARBALLS_LOCATION)/$(ARCHIVE):
+	cd $(TARBALLS_LOCATION); $(RETRIEVE_TOOL) $(RETRIEVE_TOOL_FLAGS) $(BASE_URL)/$(ARCHIVE)
+
+$(PLATFORM): $(TARBALLS_LOCATION)/$(ARCHIVE) $(DEPS)
+	rm -rf $(PLATFORM)/*; mkdir -p $(PLATFORM)
+	cd $(PLATFORM); $(ARCHIVE_TOOL) $(ARCHIVE_TOOL_FLAGS) $(TARBALLS_LOCATION)/$(ARCHIVE)
+
+$(LIBDYLIB): $(PLATFORM)
+	$(MAKE) -C $(PLATFORM) PREFIX=$(PREFIX) CC="$(CC)" CFLAGS="$(CFLAGS)" LDFLAGS="$(LDFLAGS)" AR="$(AR)"
+
+.installed-$(PLATFORM): $(LIBDYLIB)
+	$(MAKE) -C $(PLATFORM) PREFIX=$(PREFIX) CC="$(CC)" CFLAGS="$(CFLAGS)" LDFLAGS="$(LDFLAGS)" AR="$(AR)" install
+	touch $@
+
+clean:
+	$(MAKE) -C $(PLATFORM) clean
+	rm -f .installed-$(PLATFORM)
+
+distclean::
+	rm -rf $(PLATFORM) .installed-$(PLATFORM)

From 8e7a23fbd393b8726043961878ca1317ef8a57cd Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Mon, 23 Mar 2015 22:33:04 +0000
Subject: [PATCH 39/46] [dcadec] Add settings option to enable libdcadec

---
 addons/resource.language.en_gb/resources/strings.po          | 10 ++++++++++
 system/settings/rbp.xml                                      |  5 +++++
 system/settings/rbp2.xml                                     |  3 +++
 tools/depends/target/ffmpeg/Makefile                         |  3 +--
 xbmc/cores/dvdplayer/DVDCodecs/Audio/DVDAudioCodecFFmpeg.cpp |  6 +++++-
 xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp          | 10 ++++++++++
 xbmc/cores/omxplayer/OMXAudioCodecOMX.cpp                    |  6 +++++-
 7 files changed, 39 insertions(+), 4 deletions(-)

diff --git a/addons/resource.language.en_gb/resources/strings.po b/addons/resource.language.en_gb/resources/strings.po
index 80e62b1..a5b8cee 100644
--- a/addons/resource.language.en_gb/resources/strings.po
+++ b/addons/resource.language.en_gb/resources/strings.po
@@ -16717,3 +16717,13 @@ msgstr ""
 msgctxt "#38103"
 msgid "Extract thumbnails from video files"
 msgstr ""
+
+#: system/settings/rbp.xml
+msgctxt "#38120"
+msgid "Support 8 channel DTS HD audio"
+msgstr ""
+
+#: system/settings/rbp.xml
+msgctxt "#38121"
+msgid "This option supports 8 channel DTS HD but may use more CPU "
+msgstr ""
diff --git a/system/settings/rbp.xml b/system/settings/rbp.xml
index b5af261..aa57438 100644
--- a/system/settings/rbp.xml
+++ b/system/settings/rbp.xml
@@ -41,6 +41,11 @@
           <default>true</default>
           <control type="toggle" />
         </setting>
+        <setting id="videoplayer.supportdtshd" type="boolean" label="38120" help="38121">
+          <level>2</level>
+          <default>false</default>
+          <control type="toggle" />
+        </setting>
       </group>
     </category>
     <category id="myvideos">
diff --git a/system/settings/rbp2.xml b/system/settings/rbp2.xml
index 8cc8f19..197e255 100644
--- a/system/settings/rbp2.xml
+++ b/system/settings/rbp2.xml
@@ -6,6 +6,9 @@
         <setting id="videoplayer.useomxplayer">
           <default>false</default>
         </setting>
+        <setting id="videoplayer.supportdtshd">
+          <default>true</default>
+        </setting>
       </group>
     </category>
   </section>
diff --git a/tools/depends/target/ffmpeg/Makefile b/tools/depends/target/ffmpeg/Makefile
index 3b8c024..13c8f24 100644
--- a/tools/depends/target/ffmpeg/Makefile
+++ b/tools/depends/target/ffmpeg/Makefile
@@ -56,8 +56,7 @@ endif
 ifeq ($(Configuration), Release)
   ffmpg_config += --disable-debug
 endif
-ffmpg_config += --enable-libdcadec --disable-decoder=dca
-
+ffmpg_config += --enable-libdcadec
 
 CLEAN_FILES=$(ARCHIVE) $(PLATFORM)
 
diff --git a/xbmc/cores/dvdplayer/DVDCodecs/Audio/DVDAudioCodecFFmpeg.cpp b/xbmc/cores/dvdplayer/DVDCodecs/Audio/DVDAudioCodecFFmpeg.cpp
index 991449b..135bb43 100644
--- a/xbmc/cores/dvdplayer/DVDCodecs/Audio/DVDAudioCodecFFmpeg.cpp
+++ b/xbmc/cores/dvdplayer/DVDCodecs/Audio/DVDAudioCodecFFmpeg.cpp
@@ -33,6 +33,7 @@ extern "C" {
 #include "settings/Settings.h"
 #include "cores/AudioEngine/Utils/AEUtil.h"
 #endif
+#include "settings/Settings.h"
 
 CDVDAudioCodecFFmpeg::CDVDAudioCodecFFmpeg() : CDVDAudioCodec()
 {
@@ -57,7 +58,10 @@ bool CDVDAudioCodecFFmpeg::Open(CDVDStreamInfo &hints, CDVDCodecOptions &options
   AVCodec* pCodec;
   m_bOpenedCodec = false;
 
-  pCodec = avcodec_find_decoder(hints.codec);
+  if (hints.codec == AV_CODEC_ID_DTS && CSettings::Get().GetBool("videoplayer.supportdtshd"))
+    pCodec = avcodec_find_decoder_by_name("libdcadec");
+  else
+    pCodec = avcodec_find_decoder(hints.codec);
   if (!pCodec)
   {
     CLog::Log(LOGDEBUG,"CDVDAudioCodecFFmpeg::Open() Unable to find codec %d", hints.codec);
diff --git a/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp b/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp
index f9b3232..1f8e15e 100644
--- a/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp
+++ b/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp
@@ -439,6 +439,16 @@ bool CDVDDemuxFFmpeg::Open(CDVDInputStream* pInput, bool streaminfo, bool filein
 
   if (m_streaminfo)
   {
+    if (CSettings::Get().GetBool("videoplayer.supportdtshd"))
+    {
+      for (unsigned int i = 0; i < m_pFormatContext->nb_streams; i++)
+      {
+        AVStream *st = m_pFormatContext->streams[i];
+        if (st->codec->codec_type == AVMEDIA_TYPE_AUDIO && st->codec->codec_id == AV_CODEC_ID_DTS)
+          st->codec->codec = avcodec_find_decoder_by_name("libdcadec");
+      }
+    }
+
     /* to speed up dvd switches, only analyse very short */
     if(m_pInput->IsStreamType(DVDSTREAM_TYPE_DVD))
       av_opt_set_int(m_pFormatContext, "analyzeduration", 500000, 0);
diff --git a/xbmc/cores/omxplayer/OMXAudioCodecOMX.cpp b/xbmc/cores/omxplayer/OMXAudioCodecOMX.cpp
index 1a920f7..093864d 100644
--- a/xbmc/cores/omxplayer/OMXAudioCodecOMX.cpp
+++ b/xbmc/cores/omxplayer/OMXAudioCodecOMX.cpp
@@ -26,6 +26,7 @@
 
 #include "cores/AudioEngine/Utils/AEUtil.h"
 #include "cores/AudioEngine/AEFactory.h"
+#include "settings/Settings.h"
 
 // the size of the audio_render output port buffers
 #define AUDIO_DECODE_OUTPUT_BUFFER (32*1024)
@@ -65,7 +66,10 @@ bool COMXAudioCodecOMX::Open(CDVDStreamInfo &hints)
   AVCodec* pCodec;
   m_bOpenedCodec = false;
 
-  pCodec = avcodec_find_decoder(hints.codec);
+  if (hints.codec == AV_CODEC_ID_DTS && CSettings::Get().GetBool("videoplayer.supportdtshd"))
+    pCodec = avcodec_find_decoder_by_name("libdcadec");
+  else
+    pCodec = avcodec_find_decoder(hints.codec);
   if (!pCodec)
   {
     CLog::Log(LOGDEBUG,"COMXAudioCodecOMX::Open() Unable to find codec %d", hints.codec);

From 322eff9bb32147811ebc4b548b7576d197329f2e Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 14 Apr 2015 20:51:14 +0100
Subject: [PATCH 40/46] [gui] Also limit GUI updates when in non full-screen
 video mode

---
 xbmc/Application.cpp | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/xbmc/Application.cpp b/xbmc/Application.cpp
index 326ac20..8ff38d0 100644
--- a/xbmc/Application.cpp
+++ b/xbmc/Application.cpp
@@ -2501,7 +2501,7 @@ void CApplication::FrameMove(bool processEvents, bool processGUI)
 #if defined(TARGET_RASPBERRY_PI) || defined(HAS_IMXVPU)
     // This code reduces rendering fps of the GUI layer when playing videos in fullscreen mode
     // it makes only sense on architectures with multiple layers
-    if (g_graphicsContext.IsFullScreenVideo() && !m_pPlayer->IsPausedPlayback() && g_renderManager.IsVideoLayer())
+    if (m_pPlayer->IsPlayingVideo() && !m_pPlayer->IsPausedPlayback() && g_renderManager.IsVideoLayer())
       fps = CSettings::Get().GetInt("videoplayer.limitguiupdate");
 #endif
 
@@ -2514,6 +2514,8 @@ void CApplication::FrameMove(bool processEvents, bool processGUI)
     {
       if (!m_skipGuiRender)
         g_windowManager.Process(CTimeUtils::GetFrameTime());
+      else if (!g_graphicsContext.IsFullScreenVideo())
+        g_renderManager.FrameMove();
     }
     g_windowManager.FrameMove();
   }

From 1ce2798f854371852afdce61cfa82d178555bc7c Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 21 Apr 2015 14:32:07 +0100
Subject: [PATCH 41/46] [mmalrenderer] Add sharpness control

---
 addons/resource.language.en_gb/resources/strings.po |  2 +-
 xbmc/cores/VideoRenderers/MMALRenderer.cpp          | 13 ++++++++++++-
 xbmc/cores/VideoRenderers/MMALRenderer.h            |  1 +
 3 files changed, 14 insertions(+), 2 deletions(-)

diff --git a/addons/resource.language.en_gb/resources/strings.po b/addons/resource.language.en_gb/resources/strings.po
index a5b8cee..d56cbd0 100644
--- a/addons/resource.language.en_gb/resources/strings.po
+++ b/addons/resource.language.en_gb/resources/strings.po
@@ -7518,7 +7518,7 @@ msgstr ""
 
 #: xbmc/video/dialogs/GUIDialogVideoSettings.cpp
 msgctxt "#16313"
-msgid "VDPAU - Sharpness"
+msgid "Sharpness"
 msgstr ""
 
 #: xbmc/video/dialogs/GUIDialogVideoSettings.cpp
diff --git a/xbmc/cores/VideoRenderers/MMALRenderer.cpp b/xbmc/cores/VideoRenderers/MMALRenderer.cpp
index 6cde0c5..9bf1aed 100644
--- a/xbmc/cores/VideoRenderers/MMALRenderer.cpp
+++ b/xbmc/cores/VideoRenderers/MMALRenderer.cpp
@@ -207,6 +207,7 @@ CMMALRenderer::CMMALRenderer()
   m_bConfigured = false;
   m_bMMALConfigured = false;
   m_iYV12RenderBuffer = 0;
+  m_sharpness = -2.0f;
 }
 
 CMMALRenderer::~CMMALRenderer()
@@ -373,6 +374,15 @@ void CMMALRenderer::RenderUpdate(bool clear, DWORD flags, DWORD alpha)
   if (m_RenderUpdateCallBackFn)
     (*m_RenderUpdateCallBackFn)(m_RenderUpdateCallBackCtx, m_sourceRect, m_destRect);
 
+  // if sharpness setting has changed, we should update it
+  if (m_sharpness != CMediaSettings::Get().GetCurrentVideoSettings().m_Sharpness)
+  {
+    m_sharpness = CMediaSettings::Get().GetCurrentVideoSettings().m_Sharpness;
+    char command[80], response[80];
+    sprintf(command, "scaling_sharpness %d", ((int)(50.0f * (m_sharpness + 1.0f) + 0.5f)));
+    vc_gencmd(response, sizeof response, command);
+  }
+
   if (m_format == RENDER_FMT_BYPASS)
     return;
 
@@ -559,7 +569,8 @@ bool CMMALRenderer::Supports(ERENDERFEATURE feature)
       feature == RENDERFEATURE_ZOOM            ||
       feature == RENDERFEATURE_ROTATION        ||
       feature == RENDERFEATURE_VERTICAL_SHIFT  ||
-      feature == RENDERFEATURE_PIXEL_RATIO)
+      feature == RENDERFEATURE_PIXEL_RATIO     ||
+      feature == RENDERFEATURE_SHARPNESS)
     return true;
 
   return false;
diff --git a/xbmc/cores/VideoRenderers/MMALRenderer.h b/xbmc/cores/VideoRenderers/MMALRenderer.h
index 1404fb3..9bced7e 100644
--- a/xbmc/cores/VideoRenderers/MMALRenderer.h
+++ b/xbmc/cores/VideoRenderers/MMALRenderer.h
@@ -105,6 +105,7 @@ class CMMALRenderer : public CBaseRenderer
   RENDER_STEREO_MODE        m_video_stereo_mode;
   RENDER_STEREO_MODE        m_display_stereo_mode;
   bool                      m_StereoInvert;
+  float                     m_sharpness;
 
   CCriticalSection m_sharedSection;
   MMAL_COMPONENT_T *m_vout;

From 1a61f6c57fed6eed9db8574469e38e59d6919c69 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Fri, 24 Apr 2015 13:49:51 +0100
Subject: [PATCH 42/46] [dvdplayer] Add back required include

---
 xbmc/cores/dvdplayer/DVDPlayerVideo.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/xbmc/cores/dvdplayer/DVDPlayerVideo.cpp b/xbmc/cores/dvdplayer/DVDPlayerVideo.cpp
index 9f1892b..933d905 100644
--- a/xbmc/cores/dvdplayer/DVDPlayerVideo.cpp
+++ b/xbmc/cores/dvdplayer/DVDPlayerVideo.cpp
@@ -33,6 +33,7 @@
 #include "DVDCodecs/Video/DVDVideoPPFFmpeg.h"
 #include "DVDCodecs/Video/DVDVideoCodecFFmpeg.h"
 #include "DVDDemuxers/DVDDemux.h"
+#include "DVDDemuxers/DVDDemuxUtils.h"
 #include "DVDOverlayRenderer.h"
 #include "guilib/GraphicContext.h"
 #include <sstream>

From 62c4a76f46bd633dd4ab5526a6893ccafa29d7e0 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Thu, 23 Apr 2015 00:21:51 +0100
Subject: [PATCH 43/46] [screensavers] Add new gles screensavers

---
 Makefile.in                                    |  22 +-
 addons/screensaver.gles.ball/addon.xml         | 121 +++
 addons/screensaver.gles.ball/icon.png          | Bin 0 -> 5657 bytes
 addons/screensaver.gles.noise/addon.xml        | 121 +++
 addons/screensaver.gles.noise/icon.png         | Bin 0 -> 5657 bytes
 addons/screensaver.gles.plasma/addon.xml       | 121 +++
 addons/screensaver.gles.plasma/icon.png        | Bin 0 -> 5657 bytes
 addons/screensaver.gles.plasma2/addon.xml      | 121 +++
 addons/screensaver.gles.plasma2/icon.png       | Bin 0 -> 5657 bytes
 addons/screensaver.gles.solarwinds/addon.xml   | 119 +++
 addons/screensaver.gles.solarwinds/icon.png    | Bin 0 -> 14774 bytes
 addons/screensaver.gles.spiral/addon.xml       | 121 +++
 addons/screensaver.gles.spiral/icon.png        | Bin 0 -> 5657 bytes
 addons/screensaver.gles.stellar/addon.xml      | 121 +++
 addons/screensaver.gles.stellar/icon.png       | Bin 0 -> 5657 bytes
 addons/screensaver.gles.warp/addon.xml         | 119 +++
 addons/screensaver.gles.warp/icon.png          | Bin 0 -> 9424 bytes
 configure.ac                                   |  33 +
 xbmc/screensavers/gles/Makefile.in             |   6 +
 xbmc/screensavers/gles/ball/Makefile.in        |  36 +
 xbmc/screensavers/gles/ball/wrapper.cc         | 102 +++
 xbmc/screensavers/gles/noise/Makefile.in       |  36 +
 xbmc/screensavers/gles/noise/wrapper.cc        | 102 +++
 xbmc/screensavers/gles/plasma/Makefile.in      |  36 +
 xbmc/screensavers/gles/plasma/wrapper.cc       | 102 +++
 xbmc/screensavers/gles/plasma2/Makefile.in     |  36 +
 xbmc/screensavers/gles/plasma2/wrapper.cc      | 102 +++
 xbmc/screensavers/gles/solarwinds/Makefile.in  |  36 +
 xbmc/screensavers/gles/solarwinds/solarwinds.c | 531 +++++++++++++
 xbmc/screensavers/gles/solarwinds/solarwinds.h |  60 ++
 xbmc/screensavers/gles/solarwinds/wrapper.cc   |  96 +++
 xbmc/screensavers/gles/spiral/Makefile.in      |  36 +
 xbmc/screensavers/gles/spiral/wrapper.cc       | 102 +++
 xbmc/screensavers/gles/stellar/Makefile.in     |  36 +
 xbmc/screensavers/gles/stellar/wrapper.cc      | 102 +++
 xbmc/screensavers/gles/triangle2.c             | 990 +++++++++++++++++++++++++
 xbmc/screensavers/gles/triangle2.h             |  64 ++
 xbmc/screensavers/gles/warp/Makefile.in        |  36 +
 xbmc/screensavers/gles/warp/wrapper.cc         | 102 +++
 39 files changed, 3767 insertions(+), 1 deletion(-)
 create mode 100644 addons/screensaver.gles.ball/addon.xml
 create mode 100644 addons/screensaver.gles.ball/icon.png
 create mode 100644 addons/screensaver.gles.noise/addon.xml
 create mode 100644 addons/screensaver.gles.noise/icon.png
 create mode 100644 addons/screensaver.gles.plasma/addon.xml
 create mode 100644 addons/screensaver.gles.plasma/icon.png
 create mode 100644 addons/screensaver.gles.plasma2/addon.xml
 create mode 100644 addons/screensaver.gles.plasma2/icon.png
 create mode 100644 addons/screensaver.gles.solarwinds/addon.xml
 create mode 100644 addons/screensaver.gles.solarwinds/icon.png
 create mode 100644 addons/screensaver.gles.spiral/addon.xml
 create mode 100644 addons/screensaver.gles.spiral/icon.png
 create mode 100644 addons/screensaver.gles.stellar/addon.xml
 create mode 100644 addons/screensaver.gles.stellar/icon.png
 create mode 100644 addons/screensaver.gles.warp/addon.xml
 create mode 100644 addons/screensaver.gles.warp/icon.png
 create mode 100644 xbmc/screensavers/gles/Makefile.in
 create mode 100644 xbmc/screensavers/gles/ball/Makefile.in
 create mode 100644 xbmc/screensavers/gles/ball/wrapper.cc
 create mode 100644 xbmc/screensavers/gles/noise/Makefile.in
 create mode 100644 xbmc/screensavers/gles/noise/wrapper.cc
 create mode 100644 xbmc/screensavers/gles/plasma/Makefile.in
 create mode 100644 xbmc/screensavers/gles/plasma/wrapper.cc
 create mode 100644 xbmc/screensavers/gles/plasma2/Makefile.in
 create mode 100644 xbmc/screensavers/gles/plasma2/wrapper.cc
 create mode 100644 xbmc/screensavers/gles/solarwinds/Makefile.in
 create mode 100644 xbmc/screensavers/gles/solarwinds/solarwinds.c
 create mode 100644 xbmc/screensavers/gles/solarwinds/solarwinds.h
 create mode 100644 xbmc/screensavers/gles/solarwinds/wrapper.cc
 create mode 100644 xbmc/screensavers/gles/spiral/Makefile.in
 create mode 100644 xbmc/screensavers/gles/spiral/wrapper.cc
 create mode 100644 xbmc/screensavers/gles/stellar/Makefile.in
 create mode 100644 xbmc/screensavers/gles/stellar/wrapper.cc
 create mode 100644 xbmc/screensavers/gles/triangle2.c
 create mode 100644 xbmc/screensavers/gles/triangle2.h
 create mode 100644 xbmc/screensavers/gles/warp/Makefile.in
 create mode 100644 xbmc/screensavers/gles/warp/wrapper.cc

diff --git a/Makefile.in b/Makefile.in
index f2a4a3a..8687dd1 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -199,6 +199,20 @@ else
   INSTALL_FILTER+= .*screensaver\.rsxs.*
 endif
 
+SS_DIRS=
+ifneq (@DISABLE_GLESSCREENSAVERS@,1)
+  SS_DIRS+= xbmc/screensavers/gles/solarwinds
+  SS_DIRS+= xbmc/screensavers/gles/plasma
+  SS_DIRS+= xbmc/screensavers/gles/plasma2
+  SS_DIRS+= xbmc/screensavers/gles/noise
+  SS_DIRS+= xbmc/screensavers/gles/warp
+  SS_DIRS+= xbmc/screensavers/gles/stellar
+  SS_DIRS+= xbmc/screensavers/gles/spiral
+  SS_DIRS+= xbmc/screensavers/gles/ball
+else
+  INSTALL_FILTER+= .*screensaver\.gles.*
+endif
+
 ifneq (@DISABLE_SPECTRUM@,1)
   VIS_DIRS+= xbmc/visualizations/OpenGLSpectrum
 else
@@ -372,7 +386,13 @@ endif
 $(VIS_DIRS): force exports $(EGLHELPERS)
 	$(MAKE) -C $@
 
-$(SS_DIRS): force exports
+ifeq (@USE_OPENGLES@,1)
+GLESHELPERS=xbmc/screensavers/gles/gleshelpers.a
+$(GLESHELPERS): force exports
+	$(MAKE) -C xbmc/screensavers/gles
+endif
+
+$(SS_DIRS): force exports $(GLESHELPERS)
 	$(MAKE) -C $@
 
 visualizations: $(VIS_DIRS)
diff --git a/addons/screensaver.gles.ball/addon.xml b/addons/screensaver.gles.ball/addon.xml
new file mode 100644
index 0000000..523e339
--- /dev/null
+++ b/addons/screensaver.gles.ball/addon.xml
@@ -0,0 +1,121 @@
+﻿<?xml version="1.0" encoding="UTF-8"?>
+<addon
+  id="screensaver.gles.ball"
+  version="1.0.25"
+  name="Ball"
+  provider-name="mogumbo, Team-Kodi">
+  <requires>
+    <c-pluff version="0.1"/>
+  </requires>
+  <extension
+    point="xbmc.ui.screensaver"
+    library_linux="Ball.xbs"
+    library_osx="Ball.xbs"/>
+  <extension point="xbmc.addon.metadata">
+    <summary lang="af">Seker die tweede mees psigedeliese sluimerskerm ooit</summary>
+    <summary lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء على الإطلاق</summary>
+    <summary lang="be">Напэўна, другі найбольш псіхадэлічны ахоўнік экрану</summary>
+    <summary lang="bg">Вероятно вторият най-халюциногенен скрийнсейвър</summary>
+    <summary lang="ca">Probablement el segon estalvi de pantalla més psicodèlic mai creat</summary>
+    <summary lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob</summary>
+    <summary lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig</summary>
+    <summary lang="da">Formodentlig den anden mest psykedeliske pauseskærm nogensinde</summary>
+    <summary lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner überhaupt</summary>
+    <summary lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που έγινε ποτέ</summary>
+    <summary lang="en">Rotating ball screensaver</summary>
+    <summary lang="en_AU">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_NZ">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_US">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="es">Probablemente el segundo salvapantallas más psicodélico jamás creado</summary>
+    <summary lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico jamás creado</summary>
+    <summary lang="es_MX">Probablemente el segundo protector de pantalla más psicodélico</summary>
+    <summary lang="et">Arvatavasti teine kõige psühhedeelsem ekraanisäästja, mis iial tehtud</summary>
+    <summary lang="eu">Ziurrenik inoizko bigarren pantaila-babesle psikodelikoena</summary>
+    <summary lang="fi">Todennäköisesti toiseksi psykedeelisin näytönsäästäjä koskaan</summary>
+    <summary lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique jamais créé</summary>
+    <summary lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique</summary>
+    <summary lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico.</summary>
+    <summary lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות</summary>
+    <summary lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona ikad</summary>
+    <summary lang="hu">A második legpszihedelikusabb képernyővédő</summary>
+    <summary lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada</summary>
+    <summary lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna</summary>
+    <summary lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre</summary>
+    <summary lang="ja">世界で2番目にサイケなスクリーンセーバー</summary>
+    <summary lang="ko">아마도 지금까지 두번째로 가장 환상적인 화면보호기</summary>
+    <summary lang="lt">Tikriausiai antra labiausiai psichodelinė ekrano užsklanda pasaulyje.</summary>
+    <summary lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē</summary>
+    <summary lang="mk">Можеби втора нај психоделична заштита на екран</summary>
+    <summary lang="nl">Waarschijnlijk de op één na meest psychedelische schermbeveiliging ooit</summary>
+    <summary lang="no">Helt sikkert den nest mest psykedeliske skjermspareren som finnes</summary>
+    <summary lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie</summary>
+    <summary lang="pt">Este é provavelmente o segundo melhor protector de ecrã psicadélico de sempre</summary>
+    <summary lang="pt_BR">Provavelmente a segunda mais psicodélica proteção de tela já vista</summary>
+    <summary lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată</summary>
+    <summary lang="ru">Наверное, вторая из самых психоделических заставок в мире</summary>
+    <summary lang="se">Förmodligen den näst psykedeliska skärmsläckaren</summary>
+    <summary lang="si">පෙනෙන විදියට සදා දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු</summary>
+    <summary lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky vôbec</summary>
+    <summary lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu</summary>
+    <summary lang="sv">Troligen den näst mest psykedeliska skärmsläckaren någonsin.</summary>
+    <summary lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад</summary>
+    <summary lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu</summary>
+    <summary lang="uk">Напевно, друга серед найбільш психоделічних заставок</summary>
+    <summary lang="vi">Xứng đáng làm trình bảo vệ màn hình gây ảo giác mạnh thứ hai</summary>
+    <summary lang="zh">或许是排名第二的迷幻效果屏幕保护程序</summary>
+    <summary lang="zh_TW">可能是有史以來第二最夢幻的螢幕保護程式保護程式</summary>
+    <description lang="af">Seker die tweede mees psigedeliese sluimerskerm wat bestaan. Verbeel jou net al daai kleure wat rond beweeg.</description>
+    <description lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء في الوجود. فقط حاول تصوير هذه الألوان المتحركة .</description>
+    <description lang="be">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="bg">Вероятно вторият по сила халюциногенен скрийнсейвър създаван някога. Просто се опитайте да съзрете всички тези цветове.</description>
+    <description lang="ca">Probablement el segon estalvi de pantalla més psicodèlic que existeix. Intenta imaginar tots aquests colors movent-se.</description>
+    <description lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob. Zkuste si představit všechny ty poletující barvy.</description>
+    <description lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig sy'n bod. Ceisiwch ddychmygu'r holl liwiau na'n symud o gwmpas.</description>
+    <description lang="da">Formodentlig den anden mest psykedeliske pauseskærm, der eksisterer. Forestil dig alle de farver, der bevæger sig omkring.</description>
+    <description lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner, den es gibt. Versuche doch alle diese Farben, die sich umher bewegen, festzuhalten.</description>
+    <description lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που υπάρχει. Απλά προσπαθήστε να φανταστείτε όλα αυτά τα χρώματα σε κίνηση.</description>
+    <description lang="en">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_AU">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_NZ">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_US">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="es">Probablemente el segundo salvapantallas más psicodélico que existe. Intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico que existe. Solo intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_MX">Probablemente el segundo protector de pantallas más psicodélico.  Solo trate de captar todos los colores moviéndose alrededor.</description>
+    <description lang="et">Arvatavasti ajaloo teine kõige psühhedeelsem ekraanisäästja. Püüa lihtsalt kujutleda kõiki neid värve, mis ringi liiguvad.</description>
+    <description lang="eu">Ziurrenik existitzen den bigarren pantaila-babesle psikodelikoena. Saiatu kolore guzti horiek mugitzen irudikatzen.</description>
+    <description lang="fi">Todennäköisesti toiseksi psykedeelisin olemassa oleva näytönsäästäjä. Kuvittelepa vain kaikki nuo värit lentelemässä ympäriinsä.</description>
+    <description lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico do mundo. Tan só probe a imaxinarse todas esas cores movéndose ó redor.</description>
+    <description lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות שקיים כיום. פשוט נסו לדמיין את כל הצבעים האלו נעים ממקום למקום.</description>
+    <description lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona koji postoji. Samo pokušajte zamisliti sve te boje koje se gibaju okolo.</description>
+    <description lang="hu">Valószínüleg a második legpszihedelikusabb képernyővédő ami létezik. Csak képzeld el mindezt a színkavalkádot mozogni.</description>
+    <description lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada. Coba bayangkan warna-warni itu bergerak ke sana kemari.</description>
+    <description lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna sem til er. Reyndi bara að ímynda þér alla þessa liti á hreyfingu.</description>
+    <description lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre. Prova semplicemente a guardare tutti quei colori che si muovono.</description>
+    <description lang="ja">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="ko">아마도 존재하는 두번째로 가장 환상적인 화면보호기. 모든 색깔들이 움직이는 것을 상상해보세요.</description>
+    <description lang="lt">Turbūt antra labiausiai psichodelinė ekrano užsklanda pasaulyje. Išbandykite ją ir pamatysite judančių spalvų šventę.</description>
+    <description lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē. Pamēģiniet, lai gūtu priekšstatu par krāsu kustību un plūsmu visapkārt.</description>
+    <description lang="mk">Можеби втора нај психоделична заштита на екран. Само обидете се да ги согледате сите тие бои кои се движат.</description>
+    <description lang="nl">Waarschlijnlijk de op één na meest psychedelische schermbeveliging ooit. Probeer u het voor te stellen: al die kleuren die door elkaar lopen.</description>
+    <description lang="no">Helt sikkert den nest mest psykadeliske skjermsparern i verden. Bare prøv å se for deg alle de fargene som beveger seg rundt.</description>
+    <description lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie. Spróbuj i zobacz ferie poruszających się barw.</description>
+    <description lang="pt">Provavelmente, o segundo melhor protector de ecrã psicadélico de sempre. Experimente visualizar todas as cores a moverem-se.</description>
+    <description lang="pt_BR">Provavelmente a segundo mais psicodélica proteção de tela existente.  Experimente ver todas essas cores se movimentando ao redor da tela.</description>
+    <description lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată. Doar încercați să vă imaginați toate acele culori mișcându-se.</description>
+    <description lang="ru">Просто попробуйте представить себе все цвета в движении.</description>
+    <description lang="se">Förmodligen den näst psykedeliska skärmsläckaren som finns. Försök bara att uppfatta alla färger som rör sig runt och runt.</description>
+    <description lang="si">පෙනෙන විදියට සදා පවතින දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු.වටේ තිබෙන එම සියළු වර්ණ ඡායාරූප කිරීමට උත්සාහ කිරීම පමණයි. </description>
+    <description lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky aký vôbec existuje. Iba si skúste predstaviť všetky tie farby pohybujúc sa okolo.</description>
+    <description lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu. Samo predstavljajte si vse te barve, ki letijo naokrog.</description>
+    <description lang="sv">Troligen den näst mest psykedeliska skärmsläckaren som existerar. Bara tänk dig alla färgerna som rör på sig.</description>
+    <description lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад. Танҳо тасаввур кунед, ки чӣ қадар зебо ҳамаи рангҳояш бозӣ мекунанд.</description>
+    <description lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu. Ekranda dolaşan tüm renkleri seyretmeye çalışın.</description>
+    <description lang="uk">Напевно, друга серед найбільш психоделічних заставок. Лише уявіть усі ці переливи кольорів.</description>
+    <description lang="vi">Đây có thể là trình bảo vệ màn hình gây ảo giác mạnh thứ hai tại thời điểm này. Hãy thử xem các hình ảnh tạo nên từ các màu sắc di chuyển khắp nơi</description>
+    <description lang="zh">或许是排名第二的迷幻效果屏幕保护程序。你将看到所有颜色满处乱飞。</description>
+    <description lang="zh_TW">可能是現存第二最夢幻的螢幕保護程式。快來嘗試想像一下所有移動中的色彩變化。</description>
+    <platform>all</platform>
+  </extension>
+</addon>
diff --git a/addons/screensaver.gles.ball/icon.png b/addons/screensaver.gles.ball/icon.png
new file mode 100644
index 0000000000000000000000000000000000000000..a6784afc53d95a655742f9b7db247471fc52a105
GIT binary patch
literal 5657
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
V_ay9mdAsWcG*q;qwMtfz{|8C@VfFw3

literal 0
HcmV?d00001

diff --git a/addons/screensaver.gles.noise/addon.xml b/addons/screensaver.gles.noise/addon.xml
new file mode 100644
index 0000000..ed29862
--- /dev/null
+++ b/addons/screensaver.gles.noise/addon.xml
@@ -0,0 +1,121 @@
+﻿<?xml version="1.0" encoding="UTF-8"?>
+<addon
+  id="screensaver.gles.noise"
+  version="1.0.25"
+  name="Noise"
+  provider-name="mogumbo, Team-Kodi">
+  <requires>
+    <c-pluff version="0.1"/>
+  </requires>
+  <extension
+    point="xbmc.ui.screensaver"
+    library_linux="Noise.xbs"
+    library_osx="Noise.xbs"/>
+  <extension point="xbmc.addon.metadata">
+    <summary lang="af">Seker die tweede mees psigedeliese sluimerskerm ooit</summary>
+    <summary lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء على الإطلاق</summary>
+    <summary lang="be">Напэўна, другі найбольш псіхадэлічны ахоўнік экрану</summary>
+    <summary lang="bg">Вероятно вторият най-халюциногенен скрийнсейвър</summary>
+    <summary lang="ca">Probablement el segon estalvi de pantalla més psicodèlic mai creat</summary>
+    <summary lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob</summary>
+    <summary lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig</summary>
+    <summary lang="da">Formodentlig den anden mest psykedeliske pauseskærm nogensinde</summary>
+    <summary lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner überhaupt</summary>
+    <summary lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που έγινε ποτέ</summary>
+    <summary lang="en">Random noise. Useful for fixing image retention on a plasma TV</summary>
+    <summary lang="en_AU">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_NZ">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_US">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="es">Probablemente el segundo salvapantallas más psicodélico jamás creado</summary>
+    <summary lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico jamás creado</summary>
+    <summary lang="es_MX">Probablemente el segundo protector de pantalla más psicodélico</summary>
+    <summary lang="et">Arvatavasti teine kõige psühhedeelsem ekraanisäästja, mis iial tehtud</summary>
+    <summary lang="eu">Ziurrenik inoizko bigarren pantaila-babesle psikodelikoena</summary>
+    <summary lang="fi">Todennäköisesti toiseksi psykedeelisin näytönsäästäjä koskaan</summary>
+    <summary lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique jamais créé</summary>
+    <summary lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique</summary>
+    <summary lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico.</summary>
+    <summary lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות</summary>
+    <summary lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona ikad</summary>
+    <summary lang="hu">A második legpszihedelikusabb képernyővédő</summary>
+    <summary lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada</summary>
+    <summary lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna</summary>
+    <summary lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre</summary>
+    <summary lang="ja">世界で2番目にサイケなスクリーンセーバー</summary>
+    <summary lang="ko">아마도 지금까지 두번째로 가장 환상적인 화면보호기</summary>
+    <summary lang="lt">Tikriausiai antra labiausiai psichodelinė ekrano užsklanda pasaulyje.</summary>
+    <summary lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē</summary>
+    <summary lang="mk">Можеби втора нај психоделична заштита на екран</summary>
+    <summary lang="nl">Waarschijnlijk de op één na meest psychedelische schermbeveiliging ooit</summary>
+    <summary lang="no">Helt sikkert den nest mest psykedeliske skjermspareren som finnes</summary>
+    <summary lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie</summary>
+    <summary lang="pt">Este é provavelmente o segundo melhor protector de ecrã psicadélico de sempre</summary>
+    <summary lang="pt_BR">Provavelmente a segunda mais psicodélica proteção de tela já vista</summary>
+    <summary lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată</summary>
+    <summary lang="ru">Наверное, вторая из самых психоделических заставок в мире</summary>
+    <summary lang="se">Förmodligen den näst psykedeliska skärmsläckaren</summary>
+    <summary lang="si">පෙනෙන විදියට සදා දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු</summary>
+    <summary lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky vôbec</summary>
+    <summary lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu</summary>
+    <summary lang="sv">Troligen den näst mest psykedeliska skärmsläckaren någonsin.</summary>
+    <summary lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад</summary>
+    <summary lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu</summary>
+    <summary lang="uk">Напевно, друга серед найбільш психоделічних заставок</summary>
+    <summary lang="vi">Xứng đáng làm trình bảo vệ màn hình gây ảo giác mạnh thứ hai</summary>
+    <summary lang="zh">或许是排名第二的迷幻效果屏幕保护程序</summary>
+    <summary lang="zh_TW">可能是有史以來第二最夢幻的螢幕保護程式保護程式</summary>
+    <description lang="af">Seker die tweede mees psigedeliese sluimerskerm wat bestaan. Verbeel jou net al daai kleure wat rond beweeg.</description>
+    <description lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء في الوجود. فقط حاول تصوير هذه الألوان المتحركة .</description>
+    <description lang="be">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="bg">Вероятно вторият по сила халюциногенен скрийнсейвър създаван някога. Просто се опитайте да съзрете всички тези цветове.</description>
+    <description lang="ca">Probablement el segon estalvi de pantalla més psicodèlic que existeix. Intenta imaginar tots aquests colors movent-se.</description>
+    <description lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob. Zkuste si představit všechny ty poletující barvy.</description>
+    <description lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig sy'n bod. Ceisiwch ddychmygu'r holl liwiau na'n symud o gwmpas.</description>
+    <description lang="da">Formodentlig den anden mest psykedeliske pauseskærm, der eksisterer. Forestil dig alle de farver, der bevæger sig omkring.</description>
+    <description lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner, den es gibt. Versuche doch alle diese Farben, die sich umher bewegen, festzuhalten.</description>
+    <description lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που υπάρχει. Απλά προσπαθήστε να φανταστείτε όλα αυτά τα χρώματα σε κίνηση.</description>
+    <description lang="en">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_AU">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_NZ">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_US">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="es">Probablemente el segundo salvapantallas más psicodélico que existe. Intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico que existe. Solo intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_MX">Probablemente el segundo protector de pantallas más psicodélico.  Solo trate de captar todos los colores moviéndose alrededor.</description>
+    <description lang="et">Arvatavasti ajaloo teine kõige psühhedeelsem ekraanisäästja. Püüa lihtsalt kujutleda kõiki neid värve, mis ringi liiguvad.</description>
+    <description lang="eu">Ziurrenik existitzen den bigarren pantaila-babesle psikodelikoena. Saiatu kolore guzti horiek mugitzen irudikatzen.</description>
+    <description lang="fi">Todennäköisesti toiseksi psykedeelisin olemassa oleva näytönsäästäjä. Kuvittelepa vain kaikki nuo värit lentelemässä ympäriinsä.</description>
+    <description lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico do mundo. Tan só probe a imaxinarse todas esas cores movéndose ó redor.</description>
+    <description lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות שקיים כיום. פשוט נסו לדמיין את כל הצבעים האלו נעים ממקום למקום.</description>
+    <description lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona koji postoji. Samo pokušajte zamisliti sve te boje koje se gibaju okolo.</description>
+    <description lang="hu">Valószínüleg a második legpszihedelikusabb képernyővédő ami létezik. Csak képzeld el mindezt a színkavalkádot mozogni.</description>
+    <description lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada. Coba bayangkan warna-warni itu bergerak ke sana kemari.</description>
+    <description lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna sem til er. Reyndi bara að ímynda þér alla þessa liti á hreyfingu.</description>
+    <description lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre. Prova semplicemente a guardare tutti quei colori che si muovono.</description>
+    <description lang="ja">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="ko">아마도 존재하는 두번째로 가장 환상적인 화면보호기. 모든 색깔들이 움직이는 것을 상상해보세요.</description>
+    <description lang="lt">Turbūt antra labiausiai psichodelinė ekrano užsklanda pasaulyje. Išbandykite ją ir pamatysite judančių spalvų šventę.</description>
+    <description lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē. Pamēģiniet, lai gūtu priekšstatu par krāsu kustību un plūsmu visapkārt.</description>
+    <description lang="mk">Можеби втора нај психоделична заштита на екран. Само обидете се да ги согледате сите тие бои кои се движат.</description>
+    <description lang="nl">Waarschlijnlijk de op één na meest psychedelische schermbeveliging ooit. Probeer u het voor te stellen: al die kleuren die door elkaar lopen.</description>
+    <description lang="no">Helt sikkert den nest mest psykadeliske skjermsparern i verden. Bare prøv å se for deg alle de fargene som beveger seg rundt.</description>
+    <description lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie. Spróbuj i zobacz ferie poruszających się barw.</description>
+    <description lang="pt">Provavelmente, o segundo melhor protector de ecrã psicadélico de sempre. Experimente visualizar todas as cores a moverem-se.</description>
+    <description lang="pt_BR">Provavelmente a segundo mais psicodélica proteção de tela existente.  Experimente ver todas essas cores se movimentando ao redor da tela.</description>
+    <description lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată. Doar încercați să vă imaginați toate acele culori mișcându-se.</description>
+    <description lang="ru">Просто попробуйте представить себе все цвета в движении.</description>
+    <description lang="se">Förmodligen den näst psykedeliska skärmsläckaren som finns. Försök bara att uppfatta alla färger som rör sig runt och runt.</description>
+    <description lang="si">පෙනෙන විදියට සදා පවතින දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු.වටේ තිබෙන එම සියළු වර්ණ ඡායාරූප කිරීමට උත්සාහ කිරීම පමණයි. </description>
+    <description lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky aký vôbec existuje. Iba si skúste predstaviť všetky tie farby pohybujúc sa okolo.</description>
+    <description lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu. Samo predstavljajte si vse te barve, ki letijo naokrog.</description>
+    <description lang="sv">Troligen den näst mest psykedeliska skärmsläckaren som existerar. Bara tänk dig alla färgerna som rör på sig.</description>
+    <description lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад. Танҳо тасаввур кунед, ки чӣ қадар зебо ҳамаи рангҳояш бозӣ мекунанд.</description>
+    <description lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu. Ekranda dolaşan tüm renkleri seyretmeye çalışın.</description>
+    <description lang="uk">Напевно, друга серед найбільш психоделічних заставок. Лише уявіть усі ці переливи кольорів.</description>
+    <description lang="vi">Đây có thể là trình bảo vệ màn hình gây ảo giác mạnh thứ hai tại thời điểm này. Hãy thử xem các hình ảnh tạo nên từ các màu sắc di chuyển khắp nơi</description>
+    <description lang="zh">或许是排名第二的迷幻效果屏幕保护程序。你将看到所有颜色满处乱飞。</description>
+    <description lang="zh_TW">可能是現存第二最夢幻的螢幕保護程式。快來嘗試想像一下所有移動中的色彩變化。</description>
+    <platform>all</platform>
+  </extension>
+</addon>
diff --git a/addons/screensaver.gles.noise/icon.png b/addons/screensaver.gles.noise/icon.png
new file mode 100644
index 0000000000000000000000000000000000000000..a6784afc53d95a655742f9b7db247471fc52a105
GIT binary patch
literal 5657
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
V_ay9mdAsWcG*q;qwMtfz{|8C@VfFw3

literal 0
HcmV?d00001

diff --git a/addons/screensaver.gles.plasma/addon.xml b/addons/screensaver.gles.plasma/addon.xml
new file mode 100644
index 0000000..3f334f1
--- /dev/null
+++ b/addons/screensaver.gles.plasma/addon.xml
@@ -0,0 +1,121 @@
+﻿<?xml version="1.0" encoding="UTF-8"?>
+<addon
+  id="screensaver.gles.plasma"
+  version="1.0.25"
+  name="Plasma"
+  provider-name="mogumbo, Team-Kodi">
+  <requires>
+    <c-pluff version="0.1"/>
+  </requires>
+  <extension
+    point="xbmc.ui.screensaver"
+    library_linux="Plasma.xbs"
+    library_osx="Plasma.xbs"/>
+  <extension point="xbmc.addon.metadata">
+    <summary lang="af">Seker die tweede mees psigedeliese sluimerskerm ooit</summary>
+    <summary lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء على الإطلاق</summary>
+    <summary lang="be">Напэўна, другі найбольш псіхадэлічны ахоўнік экрану</summary>
+    <summary lang="bg">Вероятно вторият най-халюциногенен скрийнсейвър</summary>
+    <summary lang="ca">Probablement el segon estalvi de pantalla més psicodèlic mai creat</summary>
+    <summary lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob</summary>
+    <summary lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig</summary>
+    <summary lang="da">Formodentlig den anden mest psykedeliske pauseskærm nogensinde</summary>
+    <summary lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner überhaupt</summary>
+    <summary lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που έγινε ποτέ</summary>
+    <summary lang="en">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_AU">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_NZ">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_US">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="es">Probablemente el segundo salvapantallas más psicodélico jamás creado</summary>
+    <summary lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico jamás creado</summary>
+    <summary lang="es_MX">Probablemente el segundo protector de pantalla más psicodélico</summary>
+    <summary lang="et">Arvatavasti teine kõige psühhedeelsem ekraanisäästja, mis iial tehtud</summary>
+    <summary lang="eu">Ziurrenik inoizko bigarren pantaila-babesle psikodelikoena</summary>
+    <summary lang="fi">Todennäköisesti toiseksi psykedeelisin näytönsäästäjä koskaan</summary>
+    <summary lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique jamais créé</summary>
+    <summary lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique</summary>
+    <summary lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico.</summary>
+    <summary lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות</summary>
+    <summary lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona ikad</summary>
+    <summary lang="hu">A második legpszihedelikusabb képernyővédő</summary>
+    <summary lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada</summary>
+    <summary lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna</summary>
+    <summary lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre</summary>
+    <summary lang="ja">世界で2番目にサイケなスクリーンセーバー</summary>
+    <summary lang="ko">아마도 지금까지 두번째로 가장 환상적인 화면보호기</summary>
+    <summary lang="lt">Tikriausiai antra labiausiai psichodelinė ekrano užsklanda pasaulyje.</summary>
+    <summary lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē</summary>
+    <summary lang="mk">Можеби втора нај психоделична заштита на екран</summary>
+    <summary lang="nl">Waarschijnlijk de op één na meest psychedelische schermbeveiliging ooit</summary>
+    <summary lang="no">Helt sikkert den nest mest psykedeliske skjermspareren som finnes</summary>
+    <summary lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie</summary>
+    <summary lang="pt">Este é provavelmente o segundo melhor protector de ecrã psicadélico de sempre</summary>
+    <summary lang="pt_BR">Provavelmente a segunda mais psicodélica proteção de tela já vista</summary>
+    <summary lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată</summary>
+    <summary lang="ru">Наверное, вторая из самых психоделических заставок в мире</summary>
+    <summary lang="se">Förmodligen den näst psykedeliska skärmsläckaren</summary>
+    <summary lang="si">පෙනෙන විදියට සදා දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු</summary>
+    <summary lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky vôbec</summary>
+    <summary lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu</summary>
+    <summary lang="sv">Troligen den näst mest psykedeliska skärmsläckaren någonsin.</summary>
+    <summary lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад</summary>
+    <summary lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu</summary>
+    <summary lang="uk">Напевно, друга серед найбільш психоделічних заставок</summary>
+    <summary lang="vi">Xứng đáng làm trình bảo vệ màn hình gây ảo giác mạnh thứ hai</summary>
+    <summary lang="zh">或许是排名第二的迷幻效果屏幕保护程序</summary>
+    <summary lang="zh_TW">可能是有史以來第二最夢幻的螢幕保護程式保護程式</summary>
+    <description lang="af">Seker die tweede mees psigedeliese sluimerskerm wat bestaan. Verbeel jou net al daai kleure wat rond beweeg.</description>
+    <description lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء في الوجود. فقط حاول تصوير هذه الألوان المتحركة .</description>
+    <description lang="be">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="bg">Вероятно вторият по сила халюциногенен скрийнсейвър създаван някога. Просто се опитайте да съзрете всички тези цветове.</description>
+    <description lang="ca">Probablement el segon estalvi de pantalla més psicodèlic que existeix. Intenta imaginar tots aquests colors movent-se.</description>
+    <description lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob. Zkuste si představit všechny ty poletující barvy.</description>
+    <description lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig sy'n bod. Ceisiwch ddychmygu'r holl liwiau na'n symud o gwmpas.</description>
+    <description lang="da">Formodentlig den anden mest psykedeliske pauseskærm, der eksisterer. Forestil dig alle de farver, der bevæger sig omkring.</description>
+    <description lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner, den es gibt. Versuche doch alle diese Farben, die sich umher bewegen, festzuhalten.</description>
+    <description lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που υπάρχει. Απλά προσπαθήστε να φανταστείτε όλα αυτά τα χρώματα σε κίνηση.</description>
+    <description lang="en">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_AU">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_NZ">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_US">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="es">Probablemente el segundo salvapantallas más psicodélico que existe. Intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico que existe. Solo intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_MX">Probablemente el segundo protector de pantallas más psicodélico.  Solo trate de captar todos los colores moviéndose alrededor.</description>
+    <description lang="et">Arvatavasti ajaloo teine kõige psühhedeelsem ekraanisäästja. Püüa lihtsalt kujutleda kõiki neid värve, mis ringi liiguvad.</description>
+    <description lang="eu">Ziurrenik existitzen den bigarren pantaila-babesle psikodelikoena. Saiatu kolore guzti horiek mugitzen irudikatzen.</description>
+    <description lang="fi">Todennäköisesti toiseksi psykedeelisin olemassa oleva näytönsäästäjä. Kuvittelepa vain kaikki nuo värit lentelemässä ympäriinsä.</description>
+    <description lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico do mundo. Tan só probe a imaxinarse todas esas cores movéndose ó redor.</description>
+    <description lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות שקיים כיום. פשוט נסו לדמיין את כל הצבעים האלו נעים ממקום למקום.</description>
+    <description lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona koji postoji. Samo pokušajte zamisliti sve te boje koje se gibaju okolo.</description>
+    <description lang="hu">Valószínüleg a második legpszihedelikusabb képernyővédő ami létezik. Csak képzeld el mindezt a színkavalkádot mozogni.</description>
+    <description lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada. Coba bayangkan warna-warni itu bergerak ke sana kemari.</description>
+    <description lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna sem til er. Reyndi bara að ímynda þér alla þessa liti á hreyfingu.</description>
+    <description lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre. Prova semplicemente a guardare tutti quei colori che si muovono.</description>
+    <description lang="ja">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="ko">아마도 존재하는 두번째로 가장 환상적인 화면보호기. 모든 색깔들이 움직이는 것을 상상해보세요.</description>
+    <description lang="lt">Turbūt antra labiausiai psichodelinė ekrano užsklanda pasaulyje. Išbandykite ją ir pamatysite judančių spalvų šventę.</description>
+    <description lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē. Pamēģiniet, lai gūtu priekšstatu par krāsu kustību un plūsmu visapkārt.</description>
+    <description lang="mk">Можеби втора нај психоделична заштита на екран. Само обидете се да ги согледате сите тие бои кои се движат.</description>
+    <description lang="nl">Waarschlijnlijk de op één na meest psychedelische schermbeveliging ooit. Probeer u het voor te stellen: al die kleuren die door elkaar lopen.</description>
+    <description lang="no">Helt sikkert den nest mest psykadeliske skjermsparern i verden. Bare prøv å se for deg alle de fargene som beveger seg rundt.</description>
+    <description lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie. Spróbuj i zobacz ferie poruszających się barw.</description>
+    <description lang="pt">Provavelmente, o segundo melhor protector de ecrã psicadélico de sempre. Experimente visualizar todas as cores a moverem-se.</description>
+    <description lang="pt_BR">Provavelmente a segundo mais psicodélica proteção de tela existente.  Experimente ver todas essas cores se movimentando ao redor da tela.</description>
+    <description lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată. Doar încercați să vă imaginați toate acele culori mișcându-se.</description>
+    <description lang="ru">Просто попробуйте представить себе все цвета в движении.</description>
+    <description lang="se">Förmodligen den näst psykedeliska skärmsläckaren som finns. Försök bara att uppfatta alla färger som rör sig runt och runt.</description>
+    <description lang="si">පෙනෙන විදියට සදා පවතින දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු.වටේ තිබෙන එම සියළු වර්ණ ඡායාරූප කිරීමට උත්සාහ කිරීම පමණයි. </description>
+    <description lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky aký vôbec existuje. Iba si skúste predstaviť všetky tie farby pohybujúc sa okolo.</description>
+    <description lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu. Samo predstavljajte si vse te barve, ki letijo naokrog.</description>
+    <description lang="sv">Troligen den näst mest psykedeliska skärmsläckaren som existerar. Bara tänk dig alla färgerna som rör på sig.</description>
+    <description lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад. Танҳо тасаввур кунед, ки чӣ қадар зебо ҳамаи рангҳояш бозӣ мекунанд.</description>
+    <description lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu. Ekranda dolaşan tüm renkleri seyretmeye çalışın.</description>
+    <description lang="uk">Напевно, друга серед найбільш психоделічних заставок. Лише уявіть усі ці переливи кольорів.</description>
+    <description lang="vi">Đây có thể là trình bảo vệ màn hình gây ảo giác mạnh thứ hai tại thời điểm này. Hãy thử xem các hình ảnh tạo nên từ các màu sắc di chuyển khắp nơi</description>
+    <description lang="zh">或许是排名第二的迷幻效果屏幕保护程序。你将看到所有颜色满处乱飞。</description>
+    <description lang="zh_TW">可能是現存第二最夢幻的螢幕保護程式。快來嘗試想像一下所有移動中的色彩變化。</description>
+    <platform>all</platform>
+  </extension>
+</addon>
diff --git a/addons/screensaver.gles.plasma/icon.png b/addons/screensaver.gles.plasma/icon.png
new file mode 100644
index 0000000000000000000000000000000000000000..a6784afc53d95a655742f9b7db247471fc52a105
GIT binary patch
literal 5657
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
V_ay9mdAsWcG*q;qwMtfz{|8C@VfFw3

literal 0
HcmV?d00001

diff --git a/addons/screensaver.gles.plasma2/addon.xml b/addons/screensaver.gles.plasma2/addon.xml
new file mode 100644
index 0000000..e772cc4
--- /dev/null
+++ b/addons/screensaver.gles.plasma2/addon.xml
@@ -0,0 +1,121 @@
+﻿<?xml version="1.0" encoding="UTF-8"?>
+<addon
+  id="screensaver.gles.plasma2"
+  version="1.0.25"
+  name="Plasma2"
+  provider-name="mogumbo, Team-Kodi">
+  <requires>
+    <c-pluff version="0.1"/>
+  </requires>
+  <extension
+    point="xbmc.ui.screensaver"
+    library_linux="Plasma2.xbs"
+    library_osx="Plasma2.xbs"/>
+  <extension point="xbmc.addon.metadata">
+    <summary lang="af">Seker die tweede mees psigedeliese sluimerskerm ooit</summary>
+    <summary lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء على الإطلاق</summary>
+    <summary lang="be">Напэўна, другі найбольш псіхадэлічны ахоўнік экрану</summary>
+    <summary lang="bg">Вероятно вторият най-халюциногенен скрийнсейвър</summary>
+    <summary lang="ca">Probablement el segon estalvi de pantalla més psicodèlic mai creat</summary>
+    <summary lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob</summary>
+    <summary lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig</summary>
+    <summary lang="da">Formodentlig den anden mest psykedeliske pauseskærm nogensinde</summary>
+    <summary lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner überhaupt</summary>
+    <summary lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που έγινε ποτέ</summary>
+    <summary lang="en">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_AU">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_NZ">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_US">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="es">Probablemente el segundo salvapantallas más psicodélico jamás creado</summary>
+    <summary lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico jamás creado</summary>
+    <summary lang="es_MX">Probablemente el segundo protector de pantalla más psicodélico</summary>
+    <summary lang="et">Arvatavasti teine kõige psühhedeelsem ekraanisäästja, mis iial tehtud</summary>
+    <summary lang="eu">Ziurrenik inoizko bigarren pantaila-babesle psikodelikoena</summary>
+    <summary lang="fi">Todennäköisesti toiseksi psykedeelisin näytönsäästäjä koskaan</summary>
+    <summary lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique jamais créé</summary>
+    <summary lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique</summary>
+    <summary lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico.</summary>
+    <summary lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות</summary>
+    <summary lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona ikad</summary>
+    <summary lang="hu">A második legpszihedelikusabb képernyővédő</summary>
+    <summary lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada</summary>
+    <summary lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna</summary>
+    <summary lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre</summary>
+    <summary lang="ja">世界で2番目にサイケなスクリーンセーバー</summary>
+    <summary lang="ko">아마도 지금까지 두번째로 가장 환상적인 화면보호기</summary>
+    <summary lang="lt">Tikriausiai antra labiausiai psichodelinė ekrano užsklanda pasaulyje.</summary>
+    <summary lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē</summary>
+    <summary lang="mk">Можеби втора нај психоделична заштита на екран</summary>
+    <summary lang="nl">Waarschijnlijk de op één na meest psychedelische schermbeveiliging ooit</summary>
+    <summary lang="no">Helt sikkert den nest mest psykedeliske skjermspareren som finnes</summary>
+    <summary lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie</summary>
+    <summary lang="pt">Este é provavelmente o segundo melhor protector de ecrã psicadélico de sempre</summary>
+    <summary lang="pt_BR">Provavelmente a segunda mais psicodélica proteção de tela já vista</summary>
+    <summary lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată</summary>
+    <summary lang="ru">Наверное, вторая из самых психоделических заставок в мире</summary>
+    <summary lang="se">Förmodligen den näst psykedeliska skärmsläckaren</summary>
+    <summary lang="si">පෙනෙන විදියට සදා දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු</summary>
+    <summary lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky vôbec</summary>
+    <summary lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu</summary>
+    <summary lang="sv">Troligen den näst mest psykedeliska skärmsläckaren någonsin.</summary>
+    <summary lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад</summary>
+    <summary lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu</summary>
+    <summary lang="uk">Напевно, друга серед найбільш психоделічних заставок</summary>
+    <summary lang="vi">Xứng đáng làm trình bảo vệ màn hình gây ảo giác mạnh thứ hai</summary>
+    <summary lang="zh">或许是排名第二的迷幻效果屏幕保护程序</summary>
+    <summary lang="zh_TW">可能是有史以來第二最夢幻的螢幕保護程式保護程式</summary>
+    <description lang="af">Seker die tweede mees psigedeliese sluimerskerm wat bestaan. Verbeel jou net al daai kleure wat rond beweeg.</description>
+    <description lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء في الوجود. فقط حاول تصوير هذه الألوان المتحركة .</description>
+    <description lang="be">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="bg">Вероятно вторият по сила халюциногенен скрийнсейвър създаван някога. Просто се опитайте да съзрете всички тези цветове.</description>
+    <description lang="ca">Probablement el segon estalvi de pantalla més psicodèlic que existeix. Intenta imaginar tots aquests colors movent-se.</description>
+    <description lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob. Zkuste si představit všechny ty poletující barvy.</description>
+    <description lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig sy'n bod. Ceisiwch ddychmygu'r holl liwiau na'n symud o gwmpas.</description>
+    <description lang="da">Formodentlig den anden mest psykedeliske pauseskærm, der eksisterer. Forestil dig alle de farver, der bevæger sig omkring.</description>
+    <description lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner, den es gibt. Versuche doch alle diese Farben, die sich umher bewegen, festzuhalten.</description>
+    <description lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που υπάρχει. Απλά προσπαθήστε να φανταστείτε όλα αυτά τα χρώματα σε κίνηση.</description>
+    <description lang="en">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_AU">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_NZ">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_US">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="es">Probablemente el segundo salvapantallas más psicodélico que existe. Intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico que existe. Solo intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_MX">Probablemente el segundo protector de pantallas más psicodélico.  Solo trate de captar todos los colores moviéndose alrededor.</description>
+    <description lang="et">Arvatavasti ajaloo teine kõige psühhedeelsem ekraanisäästja. Püüa lihtsalt kujutleda kõiki neid värve, mis ringi liiguvad.</description>
+    <description lang="eu">Ziurrenik existitzen den bigarren pantaila-babesle psikodelikoena. Saiatu kolore guzti horiek mugitzen irudikatzen.</description>
+    <description lang="fi">Todennäköisesti toiseksi psykedeelisin olemassa oleva näytönsäästäjä. Kuvittelepa vain kaikki nuo värit lentelemässä ympäriinsä.</description>
+    <description lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico do mundo. Tan só probe a imaxinarse todas esas cores movéndose ó redor.</description>
+    <description lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות שקיים כיום. פשוט נסו לדמיין את כל הצבעים האלו נעים ממקום למקום.</description>
+    <description lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona koji postoji. Samo pokušajte zamisliti sve te boje koje se gibaju okolo.</description>
+    <description lang="hu">Valószínüleg a második legpszihedelikusabb képernyővédő ami létezik. Csak képzeld el mindezt a színkavalkádot mozogni.</description>
+    <description lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada. Coba bayangkan warna-warni itu bergerak ke sana kemari.</description>
+    <description lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna sem til er. Reyndi bara að ímynda þér alla þessa liti á hreyfingu.</description>
+    <description lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre. Prova semplicemente a guardare tutti quei colori che si muovono.</description>
+    <description lang="ja">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="ko">아마도 존재하는 두번째로 가장 환상적인 화면보호기. 모든 색깔들이 움직이는 것을 상상해보세요.</description>
+    <description lang="lt">Turbūt antra labiausiai psichodelinė ekrano užsklanda pasaulyje. Išbandykite ją ir pamatysite judančių spalvų šventę.</description>
+    <description lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē. Pamēģiniet, lai gūtu priekšstatu par krāsu kustību un plūsmu visapkārt.</description>
+    <description lang="mk">Можеби втора нај психоделична заштита на екран. Само обидете се да ги согледате сите тие бои кои се движат.</description>
+    <description lang="nl">Waarschlijnlijk de op één na meest psychedelische schermbeveliging ooit. Probeer u het voor te stellen: al die kleuren die door elkaar lopen.</description>
+    <description lang="no">Helt sikkert den nest mest psykadeliske skjermsparern i verden. Bare prøv å se for deg alle de fargene som beveger seg rundt.</description>
+    <description lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie. Spróbuj i zobacz ferie poruszających się barw.</description>
+    <description lang="pt">Provavelmente, o segundo melhor protector de ecrã psicadélico de sempre. Experimente visualizar todas as cores a moverem-se.</description>
+    <description lang="pt_BR">Provavelmente a segundo mais psicodélica proteção de tela existente.  Experimente ver todas essas cores se movimentando ao redor da tela.</description>
+    <description lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată. Doar încercați să vă imaginați toate acele culori mișcându-se.</description>
+    <description lang="ru">Просто попробуйте представить себе все цвета в движении.</description>
+    <description lang="se">Förmodligen den näst psykedeliska skärmsläckaren som finns. Försök bara att uppfatta alla färger som rör sig runt och runt.</description>
+    <description lang="si">පෙනෙන විදියට සදා පවතින දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු.වටේ තිබෙන එම සියළු වර්ණ ඡායාරූප කිරීමට උත්සාහ කිරීම පමණයි. </description>
+    <description lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky aký vôbec existuje. Iba si skúste predstaviť všetky tie farby pohybujúc sa okolo.</description>
+    <description lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu. Samo predstavljajte si vse te barve, ki letijo naokrog.</description>
+    <description lang="sv">Troligen den näst mest psykedeliska skärmsläckaren som existerar. Bara tänk dig alla färgerna som rör på sig.</description>
+    <description lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад. Танҳо тасаввур кунед, ки чӣ қадар зебо ҳамаи рангҳояш бозӣ мекунанд.</description>
+    <description lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu. Ekranda dolaşan tüm renkleri seyretmeye çalışın.</description>
+    <description lang="uk">Напевно, друга серед найбільш психоделічних заставок. Лише уявіть усі ці переливи кольорів.</description>
+    <description lang="vi">Đây có thể là trình bảo vệ màn hình gây ảo giác mạnh thứ hai tại thời điểm này. Hãy thử xem các hình ảnh tạo nên từ các màu sắc di chuyển khắp nơi</description>
+    <description lang="zh">或许是排名第二的迷幻效果屏幕保护程序。你将看到所有颜色满处乱飞。</description>
+    <description lang="zh_TW">可能是現存第二最夢幻的螢幕保護程式。快來嘗試想像一下所有移動中的色彩變化。</description>
+    <platform>all</platform>
+  </extension>
+</addon>
diff --git a/addons/screensaver.gles.plasma2/icon.png b/addons/screensaver.gles.plasma2/icon.png
new file mode 100644
index 0000000000000000000000000000000000000000..a6784afc53d95a655742f9b7db247471fc52a105
GIT binary patch
literal 5657
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
V_ay9mdAsWcG*q;qwMtfz{|8C@VfFw3

literal 0
HcmV?d00001

diff --git a/addons/screensaver.gles.solarwinds/addon.xml b/addons/screensaver.gles.solarwinds/addon.xml
new file mode 100644
index 0000000..820fa9c
--- /dev/null
+++ b/addons/screensaver.gles.solarwinds/addon.xml
@@ -0,0 +1,119 @@
+﻿<?xml version="1.0" encoding="UTF-8"?>
+<addon
+  id="screensaver.gles.solarwinds"
+  version="1.0.25"
+  name="Solarwinds"
+  provider-name="mogumbo, Team-Kodi">
+  <requires>
+    <c-pluff version="0.1"/>
+  </requires>
+  <extension
+    point="xbmc.ui.screensaver"
+    library_linux="Solarwinds.xbs"
+    library_osx="Solarwinds.xbs"/>
+  <extension point="xbmc.addon.metadata">
+    <summary lang="af">'n Betoverende deeltjie effek sluimerskerm</summary>
+    <summary lang="ar">أداة ساحرة تؤثر بشاشة التوقف</summary>
+    <summary lang="be">Ахоўнік экрану з зачаравальнымі эфэктамі часьціцаў</summary>
+    <summary lang="bg">Скрийнсейвър от частици, които очароват</summary>
+    <summary lang="ca">Un estalvi de pantalla amb uns efectes de partícula fascinants</summary>
+    <summary lang="cs">Spořič obrazovky s fascinujícími částicovými efekty</summary>
+    <summary lang="cy">Arbedwr sgrin effeithiau gronynnau llesmeiriol</summary>
+    <summary lang="da">En tryllebindende pauseskærm med partikeleffekter</summary>
+    <summary lang="de">Ein faszinierender Bildschirmschoner mit Partikeleffekten</summary>
+    <summary lang="el">Μία μαγευτική σωματιδιακή προφύλαξη οθόνης</summary>
+    <summary lang="en">A mesmerising particle effects screensaver</summary>
+    <summary lang="en_AU">A mesmerising particle effects screensaver</summary>
+    <summary lang="en_NZ">A mesmerising particle effects screensaver</summary>
+    <summary lang="en_US">A mesmerizing particle effects screensaver</summary>
+    <summary lang="es">Un salvapantallas con unos efectos de partículas hipnotizantes</summary>
+    <summary lang="es_AR">Un protector de pantalla con unos efectos de partículas hipnotizantes</summary>
+    <summary lang="es_MX">Un sorprendente protector de pantalla de partículas</summary>
+    <summary lang="et">Hüpnotiseeriv osakeste efektiga ekraanisäästja</summary>
+    <summary lang="fi">Lumoava partikkelitehostenäytönsäästäjä</summary>
+    <summary lang="fr">Un économiseur envoûtant à effets de particules</summary>
+    <summary lang="fr_CA">Un économiseur d'écran hypnotisant à effets de particules</summary>
+    <summary lang="gl">Un hipnotizante protector de pantalla con efectos de partículas</summary>
+    <summary lang="he">שומר מסך עם אפקט חלקיקים מהפנט</summary>
+    <summary lang="hr">Čuvar zaslona - Očaravajuće kretanje čestica.</summary>
+    <summary lang="hu">Egy igéző részecske-effektus képernyővédő</summary>
+    <summary lang="id">Penyelamat layar dengan efek partikel yang mencuri perhatian</summary>
+    <summary lang="is">Dáleiðandi skjáhvíla með brellum með agnir</summary>
+    <summary lang="it">Un salvaschermo con effetti particellari ipnotizzanti</summary>
+    <summary lang="ja">幻想的な粒子エフェクトのスクリーンセーバー</summary>
+    <summary lang="ko">매혹적인 파티클 이펙트 화면보호기</summary>
+    <summary lang="lt">Įtaigaus dalelių poveikio ekrano užsklanda</summary>
+    <summary lang="lv">Hipnotizējošs daļiņu efekta ekrānsaudzētājs</summary>
+    <summary lang="mk">Заштита на екран со смирувачки честички</summary>
+    <summary lang="nl">Een hypnotiserende schermbeveiliging met partikeleffecten</summary>
+    <summary lang="no">En hypnotiserende skjermsparer med partikkeleffekter</summary>
+    <summary lang="pl">Wygaszacz hipnotyzujący efektami cząsteczek</summary>
+    <summary lang="pt">Protector de ecrã com um impressionante efeito de partículas</summary>
+    <summary lang="pt_BR">Um protetor de tela hipnotizante com efeitos de partículas</summary>
+    <summary lang="ro">Un srceensaver cu efecte de particule fascinant</summary>
+    <summary lang="ru">Завораживающая заставка с эффектами частиц</summary>
+    <summary lang="se">En fascinerande skärmsläckare av partikeleffekter</summary>
+    <summary lang="si">මෝහනය කිරීම් තිරමෙහෙයුම් වෙත ප්‍රයෝගිකව බලපෑම </summary>
+    <summary lang="sk">Fascinujúci šetrič s efektom častíc</summary>
+    <summary lang="sl">Ohranjevalnik zaslona z dih jemajočimi delčki</summary>
+    <summary lang="sv">En hypnotiserande partikeleffektskärmsläckare</summary>
+    <summary lang="tg">Пардаи экрани аҷоиб бо таъсири зарраҳо</summary>
+    <summary lang="tr">Büyüleyici bir parçacık efektli ekran koruyucu</summary>
+    <summary lang="uk">Заставка із частинок, що має гіпнотизуючий ефект</summary>
+    <summary lang="vi">Một trình bảo vệ màn hình với hiệu ứng thôi miên tạo từ các hạt</summary>
+    <summary lang="zh">一个迷人的粒子效果屏幕保护程序</summary>
+    <summary lang="zh_TW">一個令人著迷的粒子效果的螢幕保護程式</summary>
+    <description lang="af">Hierdie is 'n uiters betoverende deeltjie effek sluimerskerm. Jy sal vind dat jy 'n ongelooflike aantal verskillende patrone kan bewerkstellig.</description>
+    <description lang="ar">أداة ساحرة جدا تؤثر بشاشة التوقف. ستجد أنك تستطيع أن تحقق عدد مذهل من الأنماط المختلفة.</description>
+    <description lang="be">This is a very mesmerizing particle effects screensaver. You'll find that you can achieve an amazing number of different patterns.</description>
+    <description lang="bg">Това е скрийнсейвър, който очарова с частиците си. Ще откриете, че можете да създадете изключително голям брой различни модели.</description>
+    <description lang="ca">Aquest és un estalvi de pantalla amb uns efectes de partícules fascinants. Veuràs que pot obtenir un nombre increïble de patrons diferents.</description>
+    <description lang="cs">Spořič obrazovky s velmi fascinujícími částicovými efekty. Zjistíte, že můžete dosáhnout úžasného množství různých vzorů.</description>
+    <description lang="cy">Mae hwn yn arbedwr sgrin effeithiau gronynnau hynod lesmeiriol. Mae modd cynhyrchu nifer anferthol o batrymau gwahanol.</description>
+    <description lang="da">Dette er en meget tryllebindende pauseskærm med partikeleffekter. Du vil opdage, at man kan opnå et forbløffende antal af forskellige mønstre.</description>
+    <description lang="de">Dies ist ein faszinierender Bildschirmschoner mit Partikeleffekten. Du kannst eine verblüffend große Anzahl an verschiedenen Animationen einstellen.</description>
+    <description lang="el">Αυτή είναι μία μαγευτική σωματιδιακή προφύλαξη οθόνης. Θα διαπιστώσετε ότι μπορείτε να επιτύχετε έναν απίστευτο αριθμό διαφορετικών σχεδίων.</description>
+    <description lang="en">This is a very mesmerising particle effects screensaver. You'll find that you can achieve an amazing number of different patterns.</description>
+    <description lang="en_AU">This is a very mesmerising particle effects screensaver. You'll find that you can achieve an amazing number of different patterns.</description>
+    <description lang="en_NZ">This is a very mesmerising particle effects screensaver. You'll find that you can achieve an amazing number of different patterns.</description>
+    <description lang="en_US">This is a very mesmerizing particle effects screensaver. You'll find that you can achieve an amazing number of different patterns.</description>
+    <description lang="es">Este es un salvapantallas con unos efectos de partículas hipnotizantes. Descubrirás que puedes obtener un número increíble de patrones diferentes.</description>
+    <description lang="es_AR">Este es un protector de pantalla con unos efectos de partículas hipnotizantes. Descubrirás que puedes obtener un número increíble de patrones diferentes.</description>
+    <description lang="es_MX">Éste es un sorprendente protector de pantalla de partículas.  Encontrará que puede obtener un gran número de patrones diferentes.</description>
+    <description lang="et">See on väga hüpnotiseeriv osakeste efektiga ekraanisäästja. Võimalik on koostada tohutul hulgal erinevaid mustreid.</description>
+    <description lang="fi">Erittäin lumoava partikkelitehostenäytönsäästäjä. Tulet huomaamaan uskomattoman määrän erilaisia kuvioita.</description>
+    <description lang="fr">Voici un économiseur d'écran à effets de particules particulièrement envoûtant. Vous trouverez qu'il permet d'obtenir un nombre incroyable de modèles et d'effets différents.</description>
+    <description lang="fr_CA">C'est un économiseur d'écran à effets de particules particulièrement hypnotisant. Il vous permettra d'obtenir un nombre incroyable de modèles différents.</description>
+    <description lang="gl">Este é un protector de pantalla con efectos de partículas moi hipnotizante. Atopará que pode acadar un incrible número de patróns diferentes.</description>
+    <description lang="he">זהו שומר מסך עם אפקט חלקיקים מהפנט ביותר. מספר מפתיע של צורות שונות ומרהיבות יתקבלו.</description>
+    <description lang="hr">Ovo je zaista očaravajuči čuvar zaslona. Moguće je ostvariti zapanjujući broj različitih uzoraka.</description>
+    <description lang="hu">Ez egy lebilincselő hatású részecske-effektus képernyővédő. Hihetetlen mennyiségű különböző minta képes benne kialakulni.</description>
+    <description lang="id">Ini adalah penyelamat layar dengan efek partikel yang sangat mencuri perhatian. Anda akan lihat bahwa Anda bisa mendapat sejumlah yang mengagumkan dari pola yang berbeda.</description>
+    <description lang="is">Þetta er mjög dáleiðandi skjáhvíla með brellum með ögnum. Þú munt komast að því að þú getur fengið ótrúlegan fjölda af mismunandi mynstri.</description>
+    <description lang="it">Questo è un salvaschermo con effetti particellari è veramente ipnotizzante. E' inoltre possibile ottenere un incredibile numero di differenti schemi.</description>
+    <description lang="ja">非常に幻想的な粒子エフェクトのスクリーンセーバーです。驚くほどの様々なパターンを知ることになるでしょう。</description>
+    <description lang="ko">매혹적인 파티클 이펙트 화면보호기입니다. 아주 다양한 패턴의 보여줍니다.</description>
+    <description lang="lt">Tai labai įtaigaus dalelių poveikio ekrano užsklanda. Atrasite, kad galite sukurti neįtikėtina skaičių skirtingų šablonų. </description>
+    <description lang="lv">Šis ir ļoti valdzinošs daļiņu efekta ekrānsaudzētājs. Jūs redzēsit, ka tas spēj izveidot neticamu skaitu dažādu musturu.</description>
+    <description lang="mk">Ова е заштита на екран со смирувачки честички. Ќе откриете дека можете да постигнете зачудувачки шеми.</description>
+    <description lang="nl">Dit is een erg hypnotiserende screensaver. Je kunt ongelooflijk veel verschillende patronen maken.</description>
+    <description lang="no">Dette er en veldig hypnotiserende skjermsparer med partikkeleffekter. Du vil finne ut av at du kan oppnå en utrolig mengde forskjellige mønstre.</description>
+    <description lang="pl">Bardzo hipnotyzujący wygaszacz. Przekonaj się, ile niespotykanch wzorów da się osiągnąć.</description>
+    <description lang="pt">Um fantástico protector de ecrã com um impressionante efeito de partículas. Experimente e verá que pode obter um número quase infinito de padrões.</description>
+    <description lang="pt_BR">Este é um protetor de tela com efeitos de partícula bem hipnotizante. Você verá que pode alcançar um incrível número de diferentes padrões.</description>
+    <description lang="ro">Acesta este un screensaver cu efecte de particule foarte fascinant. O să vedeți că veți putea obține un număr uimitor de modele diferite.</description>
+    <description lang="ru">Завораживающая заставка с эффектами частиц. Для этой заставки на выбор доступно огромное количество вариаций эффектов.</description>
+    <description lang="se">Detta är en mycket fascinerande partikeleffektsskärmsläckare. Du kommer att upptäcka att du kan uppnå ett otroligt antal olika mönster.</description>
+    <description lang="si">මෙම මෝහනය කිරීම් තිරමෙහෙයුම් වෙත ප්‍රයෝගිකව මහත් බලපෑම සහිතයි. පුදුම සහගත විවිධ මෝස්‌තර ප්‍රමාණයක් ඔබට ලබා ගැනීමට හැකි බව ඔබ සොයගනිවී</description>
+    <description lang="sk">Toto je veľmi fascinujúci šetrič s efektom častíc. Zistíte, že môžete dosiahnuť neskutočné číslo rôznych vzorov.</description>
+    <description lang="sl">To je ohranjevalnik zaslona z dih jemajočimi delčki. Odkrili boste, da lahko dosežejo neverjetno število različnih vzorcev.</description>
+    <description lang="sv">Detta är en väldigt hypnotiserande partikeleffektskärmsläckare. Du kommer att upptäcka att du kan åstadkomma ett häpnadsväckande antal olika mönster.</description>
+    <description lang="tg">Ин пардаи экран бо таъсири зарраҳо аҷоиб мебошад. Барои ин парда шумо бисёр таъсирҳои аҷиби нотакрорро пайдо мекунед.</description>
+    <description lang="tr">Son derece büyüleyici bir parçacık efektli ekran koruyucu. Birçok değişik şekle ulaşabildiğinizi farkedeceksiniz.</description>
+    <description lang="uk">Це дуже гіпнотизуюча заставка із різноманітних ефектів частинок. Ви побачите надзвичайно велику кількість різноманітних візерунків.</description>
+    <description lang="vi">Đây là trình bảo vệ có hiệu ứng thôi miên cục kỳ lợi hại. Bạn sẽ thấy sự sáng tạo từ những kiểu kết hợp có thể là không giới hạn</description>
+    <description lang="zh">这是一个非常迷人的粒子效果屏幕保护程序。你会发现你能看到惊人数量的不同图案。</description>
+    <description lang="zh_TW">這是一個非常令人著迷的粒子效果螢幕保護程式。您會發現可以達到一個另人驚豔的圖形數。</description>
+    <platform>all</platform>
+  </extension>
+</addon>
diff --git a/addons/screensaver.gles.solarwinds/icon.png b/addons/screensaver.gles.solarwinds/icon.png
new file mode 100644
index 0000000000000000000000000000000000000000..1f5800360734c51b7d628f644d65625f9c6d39df
GIT binary patch
literal 14774
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

literal 0
HcmV?d00001

diff --git a/addons/screensaver.gles.spiral/addon.xml b/addons/screensaver.gles.spiral/addon.xml
new file mode 100644
index 0000000..278e1ea
--- /dev/null
+++ b/addons/screensaver.gles.spiral/addon.xml
@@ -0,0 +1,121 @@
+﻿<?xml version="1.0" encoding="UTF-8"?>
+<addon
+  id="screensaver.gles.spiral"
+  version="1.0.25"
+  name="Spiral"
+  provider-name="mogumbo, Team-Kodi">
+  <requires>
+    <c-pluff version="0.1"/>
+  </requires>
+  <extension
+    point="xbmc.ui.screensaver"
+    library_linux="Spiral.xbs"
+    library_osx="Spiral.xbs"/>
+  <extension point="xbmc.addon.metadata">
+    <summary lang="af">Seker die tweede mees psigedeliese sluimerskerm ooit</summary>
+    <summary lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء على الإطلاق</summary>
+    <summary lang="be">Напэўна, другі найбольш псіхадэлічны ахоўнік экрану</summary>
+    <summary lang="bg">Вероятно вторият най-халюциногенен скрийнсейвър</summary>
+    <summary lang="ca">Probablement el segon estalvi de pantalla més psicodèlic mai creat</summary>
+    <summary lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob</summary>
+    <summary lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig</summary>
+    <summary lang="da">Formodentlig den anden mest psykedeliske pauseskærm nogensinde</summary>
+    <summary lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner überhaupt</summary>
+    <summary lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που έγινε ποτέ</summary>
+    <summary lang="en">Spiralling screensaver</summary>
+    <summary lang="en_AU">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_NZ">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_US">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="es">Probablemente el segundo salvapantallas más psicodélico jamás creado</summary>
+    <summary lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico jamás creado</summary>
+    <summary lang="es_MX">Probablemente el segundo protector de pantalla más psicodélico</summary>
+    <summary lang="et">Arvatavasti teine kõige psühhedeelsem ekraanisäästja, mis iial tehtud</summary>
+    <summary lang="eu">Ziurrenik inoizko bigarren pantaila-babesle psikodelikoena</summary>
+    <summary lang="fi">Todennäköisesti toiseksi psykedeelisin näytönsäästäjä koskaan</summary>
+    <summary lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique jamais créé</summary>
+    <summary lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique</summary>
+    <summary lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico.</summary>
+    <summary lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות</summary>
+    <summary lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona ikad</summary>
+    <summary lang="hu">A második legpszihedelikusabb képernyővédő</summary>
+    <summary lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada</summary>
+    <summary lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna</summary>
+    <summary lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre</summary>
+    <summary lang="ja">世界で2番目にサイケなスクリーンセーバー</summary>
+    <summary lang="ko">아마도 지금까지 두번째로 가장 환상적인 화면보호기</summary>
+    <summary lang="lt">Tikriausiai antra labiausiai psichodelinė ekrano užsklanda pasaulyje.</summary>
+    <summary lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē</summary>
+    <summary lang="mk">Можеби втора нај психоделична заштита на екран</summary>
+    <summary lang="nl">Waarschijnlijk de op één na meest psychedelische schermbeveiliging ooit</summary>
+    <summary lang="no">Helt sikkert den nest mest psykedeliske skjermspareren som finnes</summary>
+    <summary lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie</summary>
+    <summary lang="pt">Este é provavelmente o segundo melhor protector de ecrã psicadélico de sempre</summary>
+    <summary lang="pt_BR">Provavelmente a segunda mais psicodélica proteção de tela já vista</summary>
+    <summary lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată</summary>
+    <summary lang="ru">Наверное, вторая из самых психоделических заставок в мире</summary>
+    <summary lang="se">Förmodligen den näst psykedeliska skärmsläckaren</summary>
+    <summary lang="si">පෙනෙන විදියට සදා දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු</summary>
+    <summary lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky vôbec</summary>
+    <summary lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu</summary>
+    <summary lang="sv">Troligen den näst mest psykedeliska skärmsläckaren någonsin.</summary>
+    <summary lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад</summary>
+    <summary lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu</summary>
+    <summary lang="uk">Напевно, друга серед найбільш психоделічних заставок</summary>
+    <summary lang="vi">Xứng đáng làm trình bảo vệ màn hình gây ảo giác mạnh thứ hai</summary>
+    <summary lang="zh">或许是排名第二的迷幻效果屏幕保护程序</summary>
+    <summary lang="zh_TW">可能是有史以來第二最夢幻的螢幕保護程式保護程式</summary>
+    <description lang="af">Seker die tweede mees psigedeliese sluimerskerm wat bestaan. Verbeel jou net al daai kleure wat rond beweeg.</description>
+    <description lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء في الوجود. فقط حاول تصوير هذه الألوان المتحركة .</description>
+    <description lang="be">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="bg">Вероятно вторият по сила халюциногенен скрийнсейвър създаван някога. Просто се опитайте да съзрете всички тези цветове.</description>
+    <description lang="ca">Probablement el segon estalvi de pantalla més psicodèlic que existeix. Intenta imaginar tots aquests colors movent-se.</description>
+    <description lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob. Zkuste si představit všechny ty poletující barvy.</description>
+    <description lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig sy'n bod. Ceisiwch ddychmygu'r holl liwiau na'n symud o gwmpas.</description>
+    <description lang="da">Formodentlig den anden mest psykedeliske pauseskærm, der eksisterer. Forestil dig alle de farver, der bevæger sig omkring.</description>
+    <description lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner, den es gibt. Versuche doch alle diese Farben, die sich umher bewegen, festzuhalten.</description>
+    <description lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που υπάρχει. Απλά προσπαθήστε να φανταστείτε όλα αυτά τα χρώματα σε κίνηση.</description>
+    <description lang="en">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_AU">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_NZ">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_US">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="es">Probablemente el segundo salvapantallas más psicodélico que existe. Intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico que existe. Solo intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_MX">Probablemente el segundo protector de pantallas más psicodélico.  Solo trate de captar todos los colores moviéndose alrededor.</description>
+    <description lang="et">Arvatavasti ajaloo teine kõige psühhedeelsem ekraanisäästja. Püüa lihtsalt kujutleda kõiki neid värve, mis ringi liiguvad.</description>
+    <description lang="eu">Ziurrenik existitzen den bigarren pantaila-babesle psikodelikoena. Saiatu kolore guzti horiek mugitzen irudikatzen.</description>
+    <description lang="fi">Todennäköisesti toiseksi psykedeelisin olemassa oleva näytönsäästäjä. Kuvittelepa vain kaikki nuo värit lentelemässä ympäriinsä.</description>
+    <description lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico do mundo. Tan só probe a imaxinarse todas esas cores movéndose ó redor.</description>
+    <description lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות שקיים כיום. פשוט נסו לדמיין את כל הצבעים האלו נעים ממקום למקום.</description>
+    <description lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona koji postoji. Samo pokušajte zamisliti sve te boje koje se gibaju okolo.</description>
+    <description lang="hu">Valószínüleg a második legpszihedelikusabb képernyővédő ami létezik. Csak képzeld el mindezt a színkavalkádot mozogni.</description>
+    <description lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada. Coba bayangkan warna-warni itu bergerak ke sana kemari.</description>
+    <description lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna sem til er. Reyndi bara að ímynda þér alla þessa liti á hreyfingu.</description>
+    <description lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre. Prova semplicemente a guardare tutti quei colori che si muovono.</description>
+    <description lang="ja">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="ko">아마도 존재하는 두번째로 가장 환상적인 화면보호기. 모든 색깔들이 움직이는 것을 상상해보세요.</description>
+    <description lang="lt">Turbūt antra labiausiai psichodelinė ekrano užsklanda pasaulyje. Išbandykite ją ir pamatysite judančių spalvų šventę.</description>
+    <description lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē. Pamēģiniet, lai gūtu priekšstatu par krāsu kustību un plūsmu visapkārt.</description>
+    <description lang="mk">Можеби втора нај психоделична заштита на екран. Само обидете се да ги согледате сите тие бои кои се движат.</description>
+    <description lang="nl">Waarschlijnlijk de op één na meest psychedelische schermbeveliging ooit. Probeer u het voor te stellen: al die kleuren die door elkaar lopen.</description>
+    <description lang="no">Helt sikkert den nest mest psykadeliske skjermsparern i verden. Bare prøv å se for deg alle de fargene som beveger seg rundt.</description>
+    <description lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie. Spróbuj i zobacz ferie poruszających się barw.</description>
+    <description lang="pt">Provavelmente, o segundo melhor protector de ecrã psicadélico de sempre. Experimente visualizar todas as cores a moverem-se.</description>
+    <description lang="pt_BR">Provavelmente a segundo mais psicodélica proteção de tela existente.  Experimente ver todas essas cores se movimentando ao redor da tela.</description>
+    <description lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată. Doar încercați să vă imaginați toate acele culori mișcându-se.</description>
+    <description lang="ru">Просто попробуйте представить себе все цвета в движении.</description>
+    <description lang="se">Förmodligen den näst psykedeliska skärmsläckaren som finns. Försök bara att uppfatta alla färger som rör sig runt och runt.</description>
+    <description lang="si">පෙනෙන විදියට සදා පවතින දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු.වටේ තිබෙන එම සියළු වර්ණ ඡායාරූප කිරීමට උත්සාහ කිරීම පමණයි. </description>
+    <description lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky aký vôbec existuje. Iba si skúste predstaviť všetky tie farby pohybujúc sa okolo.</description>
+    <description lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu. Samo predstavljajte si vse te barve, ki letijo naokrog.</description>
+    <description lang="sv">Troligen den näst mest psykedeliska skärmsläckaren som existerar. Bara tänk dig alla färgerna som rör på sig.</description>
+    <description lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад. Танҳо тасаввур кунед, ки чӣ қадар зебо ҳамаи рангҳояш бозӣ мекунанд.</description>
+    <description lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu. Ekranda dolaşan tüm renkleri seyretmeye çalışın.</description>
+    <description lang="uk">Напевно, друга серед найбільш психоделічних заставок. Лише уявіть усі ці переливи кольорів.</description>
+    <description lang="vi">Đây có thể là trình bảo vệ màn hình gây ảo giác mạnh thứ hai tại thời điểm này. Hãy thử xem các hình ảnh tạo nên từ các màu sắc di chuyển khắp nơi</description>
+    <description lang="zh">或许是排名第二的迷幻效果屏幕保护程序。你将看到所有颜色满处乱飞。</description>
+    <description lang="zh_TW">可能是現存第二最夢幻的螢幕保護程式。快來嘗試想像一下所有移動中的色彩變化。</description>
+    <platform>all</platform>
+  </extension>
+</addon>
diff --git a/addons/screensaver.gles.spiral/icon.png b/addons/screensaver.gles.spiral/icon.png
new file mode 100644
index 0000000000000000000000000000000000000000..a6784afc53d95a655742f9b7db247471fc52a105
GIT binary patch
literal 5657
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
V_ay9mdAsWcG*q;qwMtfz{|8C@VfFw3

literal 0
HcmV?d00001

diff --git a/addons/screensaver.gles.stellar/addon.xml b/addons/screensaver.gles.stellar/addon.xml
new file mode 100644
index 0000000..c345d87
--- /dev/null
+++ b/addons/screensaver.gles.stellar/addon.xml
@@ -0,0 +1,121 @@
+﻿<?xml version="1.0" encoding="UTF-8"?>
+<addon
+  id="screensaver.gles.stellar"
+  version="1.0.25"
+  name="Stellar"
+  provider-name="mogumbo, Team-Kodi">
+  <requires>
+    <c-pluff version="0.1"/>
+  </requires>
+  <extension
+    point="xbmc.ui.screensaver"
+    library_linux="Stellar.xbs"
+    library_osx="Stellar.xbs"/>
+  <extension point="xbmc.addon.metadata">
+    <summary lang="af">Seker die tweede mees psigedeliese sluimerskerm ooit</summary>
+    <summary lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء على الإطلاق</summary>
+    <summary lang="be">Напэўна, другі найбольш псіхадэлічны ахоўнік экрану</summary>
+    <summary lang="bg">Вероятно вторият най-халюциногенен скрийнсейвър</summary>
+    <summary lang="ca">Probablement el segon estalvi de pantalla més psicodèlic mai creat</summary>
+    <summary lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob</summary>
+    <summary lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig</summary>
+    <summary lang="da">Formodentlig den anden mest psykedeliske pauseskærm nogensinde</summary>
+    <summary lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner überhaupt</summary>
+    <summary lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που έγινε ποτέ</summary>
+    <summary lang="en">An interstellar journey</summary>
+    <summary lang="en_AU">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_NZ">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="en_US">Probably the second most psychedelic screensaver ever</summary>
+    <summary lang="es">Probablemente el segundo salvapantallas más psicodélico jamás creado</summary>
+    <summary lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico jamás creado</summary>
+    <summary lang="es_MX">Probablemente el segundo protector de pantalla más psicodélico</summary>
+    <summary lang="et">Arvatavasti teine kõige psühhedeelsem ekraanisäästja, mis iial tehtud</summary>
+    <summary lang="eu">Ziurrenik inoizko bigarren pantaila-babesle psikodelikoena</summary>
+    <summary lang="fi">Todennäköisesti toiseksi psykedeelisin näytönsäästäjä koskaan</summary>
+    <summary lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique jamais créé</summary>
+    <summary lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique</summary>
+    <summary lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico.</summary>
+    <summary lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות</summary>
+    <summary lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona ikad</summary>
+    <summary lang="hu">A második legpszihedelikusabb képernyővédő</summary>
+    <summary lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada</summary>
+    <summary lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna</summary>
+    <summary lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre</summary>
+    <summary lang="ja">世界で2番目にサイケなスクリーンセーバー</summary>
+    <summary lang="ko">아마도 지금까지 두번째로 가장 환상적인 화면보호기</summary>
+    <summary lang="lt">Tikriausiai antra labiausiai psichodelinė ekrano užsklanda pasaulyje.</summary>
+    <summary lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē</summary>
+    <summary lang="mk">Можеби втора нај психоделична заштита на екран</summary>
+    <summary lang="nl">Waarschijnlijk de op één na meest psychedelische schermbeveiliging ooit</summary>
+    <summary lang="no">Helt sikkert den nest mest psykedeliske skjermspareren som finnes</summary>
+    <summary lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie</summary>
+    <summary lang="pt">Este é provavelmente o segundo melhor protector de ecrã psicadélico de sempre</summary>
+    <summary lang="pt_BR">Provavelmente a segunda mais psicodélica proteção de tela já vista</summary>
+    <summary lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată</summary>
+    <summary lang="ru">Наверное, вторая из самых психоделических заставок в мире</summary>
+    <summary lang="se">Förmodligen den näst psykedeliska skärmsläckaren</summary>
+    <summary lang="si">පෙනෙන විදියට සදා දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු</summary>
+    <summary lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky vôbec</summary>
+    <summary lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu</summary>
+    <summary lang="sv">Troligen den näst mest psykedeliska skärmsläckaren någonsin.</summary>
+    <summary lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад</summary>
+    <summary lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu</summary>
+    <summary lang="uk">Напевно, друга серед найбільш психоделічних заставок</summary>
+    <summary lang="vi">Xứng đáng làm trình bảo vệ màn hình gây ảo giác mạnh thứ hai</summary>
+    <summary lang="zh">或许是排名第二的迷幻效果屏幕保护程序</summary>
+    <summary lang="zh_TW">可能是有史以來第二最夢幻的螢幕保護程式保護程式</summary>
+    <description lang="af">Seker die tweede mees psigedeliese sluimerskerm wat bestaan. Verbeel jou net al daai kleure wat rond beweeg.</description>
+    <description lang="ar">ربما شاشة التوقف الثانية الأكثر هدوء في الوجود. فقط حاول تصوير هذه الألوان المتحركة .</description>
+    <description lang="be">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="bg">Вероятно вторият по сила халюциногенен скрийнсейвър създаван някога. Просто се опитайте да съзрете всички тези цветове.</description>
+    <description lang="ca">Probablement el segon estalvi de pantalla més psicodèlic que existeix. Intenta imaginar tots aquests colors movent-se.</description>
+    <description lang="cs">Pravděpodobně druhý nejdivočejší šetřič obrazovky všech dob. Zkuste si představit všechny ty poletující barvy.</description>
+    <description lang="cy">Mwy na thebyg yr ail arbedwr sgrin mwyaf seicadelig sy'n bod. Ceisiwch ddychmygu'r holl liwiau na'n symud o gwmpas.</description>
+    <description lang="da">Formodentlig den anden mest psykedeliske pauseskærm, der eksisterer. Forestil dig alle de farver, der bevæger sig omkring.</description>
+    <description lang="de">Wahrscheinlich der zweit-psychodelischste Bildschirmschoner, den es gibt. Versuche doch alle diese Farben, die sich umher bewegen, festzuhalten.</description>
+    <description lang="el">Πιθανότατα η δεύτερη πιο ψυχεδελική προφύλαξη οθόνης που υπάρχει. Απλά προσπαθήστε να φανταστείτε όλα αυτά τα χρώματα σε κίνηση.</description>
+    <description lang="en">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_AU">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_NZ">Probably the second most psychedelic screensaver in existence. Just try to picture all those colours moving around.</description>
+    <description lang="en_US">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="es">Probablemente el segundo salvapantallas más psicodélico que existe. Intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_AR">Probablemente el segundo protector de pantalla más psicodélico que existe. Solo intente imaginarse todos esos colores moviéndose.</description>
+    <description lang="es_MX">Probablemente el segundo protector de pantallas más psicodélico.  Solo trate de captar todos los colores moviéndose alrededor.</description>
+    <description lang="et">Arvatavasti ajaloo teine kõige psühhedeelsem ekraanisäästja. Püüa lihtsalt kujutleda kõiki neid värve, mis ringi liiguvad.</description>
+    <description lang="eu">Ziurrenik existitzen den bigarren pantaila-babesle psikodelikoena. Saiatu kolore guzti horiek mugitzen irudikatzen.</description>
+    <description lang="fi">Todennäköisesti toiseksi psykedeelisin olemassa oleva näytönsäästäjä. Kuvittelepa vain kaikki nuo värit lentelemässä ympäriinsä.</description>
+    <description lang="fr">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="fr_CA">Probablement le deuxième économiseur d'écran le plus psychédélique de l'histoire. Essayez seulement d'imaginer toutes ces couleurs en mouvement.</description>
+    <description lang="gl">Probabelmente o segundo protector de pantalla máis psicodélico do mundo. Tan só probe a imaxinarse todas esas cores movéndose ó redor.</description>
+    <description lang="he">כנראה שומר המסך השני בדירוג הפסיכדליות שקיים כיום. פשוט נסו לדמיין את כל הצבעים האלו נעים ממקום למקום.</description>
+    <description lang="hr">Vjerojatno drugi najveći psihodelični čuvar zaslona koji postoji. Samo pokušajte zamisliti sve te boje koje se gibaju okolo.</description>
+    <description lang="hu">Valószínüleg a második legpszihedelikusabb képernyővédő ami létezik. Csak képzeld el mindezt a színkavalkádot mozogni.</description>
+    <description lang="id">Mungkin screensaver paling psikedelik nomor dua yang pernah ada. Coba bayangkan warna-warni itu bergerak ke sana kemari.</description>
+    <description lang="is">Líklega í öðru sæti yfir klikkuðustu skjáhvíluna sem til er. Reyndi bara að ímynda þér alla þessa liti á hreyfingu.</description>
+    <description lang="it">Probabilmente il secondo salvaschermo più psichedelico di sempre. Prova semplicemente a guardare tutti quei colori che si muovono.</description>
+    <description lang="ja">Probably the second most psychedelic screensaver in existence. Just try to picture all those colors moving around.</description>
+    <description lang="ko">아마도 존재하는 두번째로 가장 환상적인 화면보호기. 모든 색깔들이 움직이는 것을 상상해보세요.</description>
+    <description lang="lt">Turbūt antra labiausiai psichodelinė ekrano užsklanda pasaulyje. Išbandykite ją ir pamatysite judančių spalvų šventę.</description>
+    <description lang="lv">Iespējams viens no vispsihodēliskākajiem ekrānsaudzētājiem pasaulē. Pamēģiniet, lai gūtu priekšstatu par krāsu kustību un plūsmu visapkārt.</description>
+    <description lang="mk">Можеби втора нај психоделична заштита на екран. Само обидете се да ги согледате сите тие бои кои се движат.</description>
+    <description lang="nl">Waarschlijnlijk de op één na meest psychedelische schermbeveliging ooit. Probeer u het voor te stellen: al die kleuren die door elkaar lopen.</description>
+    <description lang="no">Helt sikkert den nest mest psykadeliske skjermsparern i verden. Bare prøv å se for deg alle de fargene som beveger seg rundt.</description>
+    <description lang="pl">Prawdopodobnie drugi, najbardziej psychodeliczny wygaszacz na świecie. Spróbuj i zobacz ferie poruszających się barw.</description>
+    <description lang="pt">Provavelmente, o segundo melhor protector de ecrã psicadélico de sempre. Experimente visualizar todas as cores a moverem-se.</description>
+    <description lang="pt_BR">Provavelmente a segundo mais psicodélica proteção de tela existente.  Experimente ver todas essas cores se movimentando ao redor da tela.</description>
+    <description lang="ro">Probabil al doilea cel mai năucitor screensaver care a existat vreodată. Doar încercați să vă imaginați toate acele culori mișcându-se.</description>
+    <description lang="ru">Просто попробуйте представить себе все цвета в движении.</description>
+    <description lang="se">Förmodligen den näst psykedeliska skärmsläckaren som finns. Försök bara att uppfatta alla färger som rör sig runt och runt.</description>
+    <description lang="si">පෙනෙන විදියට සදා පවතින දෙවන මහත් අධිචිත්ත වේගී තිරමෙහෙකරු.වටේ තිබෙන එම සියළු වර්ණ ඡායාරූප කිරීමට උත්සාහ කිරීම පමණයි. </description>
+    <description lang="sk">Pravdepodobne druhý najviac hypnotizujúci šetrič obrazovky aký vôbec existuje. Iba si skúste predstaviť všetky tie farby pohybujúc sa okolo.</description>
+    <description lang="sl">Gotovo drugi najbolj psihadelični ohranjevalnik zaslona na svetu. Samo predstavljajte si vse te barve, ki letijo naokrog.</description>
+    <description lang="sv">Troligen den näst mest psykedeliska skärmsläckaren som existerar. Bara tänk dig alla färgerna som rör på sig.</description>
+    <description lang="tg">Эҳтимол аст, ки имрӯз дар тамоми ҷаҳон ин пардаи экран ҷои дуюмро мегирад. Танҳо тасаввур кунед, ки чӣ қадар зебо ҳамаи рангҳояш бозӣ мекунанд.</description>
+    <description lang="tr">Muhtemelen insanı hayallere sürükleyen en iyi ikinci ekran koruyucu. Ekranda dolaşan tüm renkleri seyretmeye çalışın.</description>
+    <description lang="uk">Напевно, друга серед найбільш психоделічних заставок. Лише уявіть усі ці переливи кольорів.</description>
+    <description lang="vi">Đây có thể là trình bảo vệ màn hình gây ảo giác mạnh thứ hai tại thời điểm này. Hãy thử xem các hình ảnh tạo nên từ các màu sắc di chuyển khắp nơi</description>
+    <description lang="zh">或许是排名第二的迷幻效果屏幕保护程序。你将看到所有颜色满处乱飞。</description>
+    <description lang="zh_TW">可能是現存第二最夢幻的螢幕保護程式。快來嘗試想像一下所有移動中的色彩變化。</description>
+    <platform>all</platform>
+  </extension>
+</addon>
diff --git a/addons/screensaver.gles.stellar/icon.png b/addons/screensaver.gles.stellar/icon.png
new file mode 100644
index 0000000000000000000000000000000000000000..a6784afc53d95a655742f9b7db247471fc52a105
GIT binary patch
literal 5657
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
V_ay9mdAsWcG*q;qwMtfz{|8C@VfFw3

literal 0
HcmV?d00001

diff --git a/addons/screensaver.gles.warp/addon.xml b/addons/screensaver.gles.warp/addon.xml
new file mode 100644
index 0000000..b39c5f6
--- /dev/null
+++ b/addons/screensaver.gles.warp/addon.xml
@@ -0,0 +1,119 @@
+﻿<?xml version="1.0" encoding="UTF-8"?>
+<addon
+  id="screensaver.gles.warp"
+  version="1.0.25"
+  name="Warp"
+  provider-name="mogumbo, Team-Kodi">
+  <requires>
+    <c-pluff version="0.1"/>
+  </requires>
+  <extension
+    point="xbmc.ui.screensaver"
+    library_linux="Warp.xbs"
+    library_osx="Warp.xbs"/>
+  <extension point="xbmc.addon.metadata">
+    <summary lang="af">Omtrent so psigedelies soos sluimerskerm kan kom</summary>
+    <summary lang="ar">حول الحصول على مهدء كشاشة التوقف</summary>
+    <summary lang="be">Падобны на псіхадэлічны ахоўнік экрану</summary>
+    <summary lang="bg">Колкото халюциногенен може да бъде един скрийнсейвър</summary>
+    <summary lang="ca">Quant al més psicodèlic dels estalvis de pantalla</summary>
+    <summary lang="cs">Nejdivočejší šetřič obrazovky všech dob</summary>
+    <summary lang="cy">Mor seicadelig ag y mae modd bod</summary>
+    <summary lang="da">Omtrent så psykedelisk som en pauseskærm kan blive.</summary>
+    <summary lang="de">So psychedelisch wie ein Bildschirmschoner nur sein kann</summary>
+    <summary lang="el">Όσο πιο ψυχεδελική μπορεί να είναι μία προφύλαξη οθόνης</summary>
+    <summary lang="en">Screenbending screensaver</summary>
+    <summary lang="en_AU">About as psychedelic as screensavers get</summary>
+    <summary lang="en_NZ">About as psychedelic as screensavers get</summary>
+    <summary lang="en_US">About as psychedelic as screensavers get</summary>
+    <summary lang="es">El más psicodélico de los salvapantallas</summary>
+    <summary lang="es_AR">Tan psicodélico como un protector de pantalla pueda serlo</summary>
+    <summary lang="es_MX">Tan psicodélico como cualquier protector de pantalla debería</summary>
+    <summary lang="et">Nii psühhedeelne kui üks ekraanisäästja olla saab</summary>
+    <summary lang="eu">Pantaila-babesleetatik psikodelikoena</summary>
+    <summary lang="fi">Mahdollisesti kaikkein psykedeelisin näytönsäästäjä</summary>
+    <summary lang="fr">Difficilement plus psychédélique comme économiseur d'écran</summary>
+    <summary lang="fr_CA">Il y a pas d'économiseur d'écran plus psychédélique</summary>
+    <summary lang="gl">Máis ou menos tan psicodélico como o pode ser un protector de pantalla</summary>
+    <summary lang="he">זהו שומר המסך הפסיכדלי ביותר שיכול להיות</summary>
+    <summary lang="hr">Psihodeličan koliko čuvar zaslona može biti </summary>
+    <summary lang="hu">A legpszihedelikusabb képernyővédő</summary>
+    <summary lang="id">Sepsikedelik mungkin dari sebuah screensaver</summary>
+    <summary lang="is">Eins geggjuð og skjáhvíla getur orðið</summary>
+    <summary lang="it">Quanto di più psichedelico possa essere un salvaschermo</summary>
+    <summary lang="ja">スクリーンセーバーはここまでサイケになれる</summary>
+    <summary lang="ko">싸이키델릭 화면보호기</summary>
+    <summary lang="lt">Psihodelinė užsklanda nunešanti stoga</summary>
+    <summary lang="lv">Cik nu vien psihodēlisks ekrānsaudzētājs var būt</summary>
+    <summary lang="mk">Најпсиходелична заштита на екран</summary>
+    <summary lang="nl">Een meer psychedelische schermbeveiliging vindt u niet</summary>
+    <summary lang="no">Så psykadelisk som en skjermsparer kan bli</summary>
+    <summary lang="pl">Tak psychodeliczny jak tylko się da</summary>
+    <summary lang="pt">Um protector de ecrã mais psicadélico do que este? Impossível.</summary>
+    <summary lang="pt_BR">Protetor de Tela Psicodélico</summary>
+    <summary lang="ro">Un protector ecran cât se poate de năucitor</summary>
+    <summary lang="ru">Самая психоделическая в мире заставка</summary>
+    <summary lang="se">Ungefär så psykedelisk som en skärmsläckare kan bli</summary>
+    <summary lang="sk">Tak psychodelický ako to len ide</summary>
+    <summary lang="sl">Najbolj psihadelični ohranjevalnik zaslona</summary>
+    <summary lang="sv">Ungefär så psykedelisk som en skärmsläckare kan bli</summary>
+    <summary lang="tg">Дар тамоми ҷаҳон ин пардаи экран аз ҳама беҳтарин аст</summary>
+    <summary lang="tr">İnsanı hayallere sürükleyen bir ekran koruyucu</summary>
+    <summary lang="uk">Настільки психоделічна наскільки можливо для заставки</summary>
+    <summary lang="vi">Tạo ra ảo giác mạnh nhất mà trình bảo vệ màn hình có thể có được</summary>
+    <summary lang="zh">最具迷幻效果的屏幕保护程序</summary>
+    <summary lang="zh_TW">最具夢幻效果的螢幕保護程式</summary>
+    <description lang="af">Die is omtrent so psigedelies soos sluimerskerm kan kom. mogumbo het gedink sy Plasma beskermer was heel voor in die koor, maar die een sal jou maag selfs meer laat draai. Jy beter een van daardie vlug siekte sakke kry voor jy te lank na hierdie een staar.</description>
+    <description lang="ar">هذا حول الحصول على مهدء كشاشة التوقف. اعتقد موغمبو أن شاشة توقف البلازمة خاصته في قمة الجدول, لكن هذا مقرف أكثر. الأفضل أن تجد أحد أكياس الغثيان قبل أن تنظر لهذا لوقت طويل.</description>
+    <description lang="be">This is about as psychedelic as screensavers get. mogumbo thought his Plasma saver was at the top of the scale, but this one is even more nauseating. You'd better find one of those air sickness bags before you stare at this one for too long.</description>
+    <description lang="bg">Точно колкото може един скрийнсейвър. mogumbo смяташе, че неговият "Plasma saver" е върхът, но този е по-смущаващ. Препоръчвам Ви да вземете една торбичка/леген, преди да зазяпате в скрийнсейвъра по-дълго отколкото трябва.</description>
+    <description lang="ca">Aquest és probablement el més psicodèlic dels estalvis de pantalla. mogumbo va pensar que el seu estalvi Plasma estava al capdamunt, però aquest és més nauseabund. Serà millor que agafis una bossa per als marejos si has d'estar molta estona mirant-lo.</description>
+    <description lang="cs">Asi nejdivočejší šetřič obrazovky všech dob.  Použití plazmového šetřiče bývalo vrcholem, ale tento spořič je ještě více zneklidňující. Připravte si pytlíky na zvracení pokud se jej rozhodnete sledovat příliš dlouho.</description>
+    <description lang="cy">Mor seicadelig ag y mae modd bod. Roedd mogumbo'n meddwl fod ei arbedwr Plasma ar frig y rhestr, ond mae hwn hyd yn oed yn fwy troëdig. Gwell dod o hyd i fag salwch cyn edrych ar hwn yn rhy hir.</description>
+    <description lang="da">Dette er omtrent så psykedelisk som en pauseskærm kan blive. Mogumbo troede hans Plasma-pauseskærm var i toppen af skalaen, men denne er endnu mere kvalmende. Du må hellere finde en papirpose, inden du kigger alt for længe på denne.</description>
+    <description lang="de">In etwa so ​​psychedelisch wie ein Bildschirmschoner nur sein kann. mogumbo dachte, sein Plasma-Bildschirmschoner wäre bereits abstoßend, aber dieser hier ist noch verabscheuenswürdiger. Kram' besser schon mal eine Kotztüte hervor, bevor Du diesen Bildschirmschoner zu lange anstarrst.</description>
+    <description lang="el">Αυτή είναι η πιο ψυχεδελική προφύλαξη οθόνης που υπάρχει. Ο mogumbo  νόμιζε ότι η Plasma προφ. οθόνης του ήταν η κορυφαία, αλλά αυτή είναι ακόμα πιο μπερδεμένη. Καλύτερα να βρείτε μία από εκείνες τις σακούλες για τη ναυτία προτού την κοιτάξετε για πολλή ώρα.</description>
+    <description lang="en">This is about as psychedelic as screensavers get. mogumbo thought his Plasma saver was at the top of the scale, but this one is even more nauseating. You'd better find one of those air sickness bags before you stare at this one for too long.</description>
+    <description lang="en_AU">This is about as psychedelic as screensavers get. mogumbo thought his Plasma saver was at the top of the scale, but this one is even more nauseating. You'd better find one of those air sickness bags before you stare at this one for too long.</description>
+    <description lang="en_NZ">This is about as psychedelic as screensavers get. mogumbo thought his Plasma saver was at the top of the scale, but this one is even more nauseating. You'd better find one of those air sickness bags before you stare at this one for too long.</description>
+    <description lang="en_US">This is about as psychedelic as screensavers get. mogumbo thought his Plasma saver was at the top of the scale, but this one is even more nauseating. You'd better find one of those air sickness bags before you stare at this one for too long.</description>
+    <description lang="es">Este es probablemente el más psicodélico de los salvapantallas. Mogumbo -el autor- pensó que su protector 'Plasma' estaba en lo más alto, pero éste es más repugnante. Será mejor que cojas una bolsa para los mareos si vas a estar mucho tiempo viéndolo.</description>
+    <description lang="es_AR">Este es probablemente el más psicodélico de los protectores de pantalla. mogumbo pensó que su protector de Plasma estaba en lo mas alto, pero éste es más repugnante. Será mejor que busques una bolsa para los mareos si vas a estar mucho tiempo viéndolo.</description>
+    <description lang="es_MX">Esto es tan psicodélico como un protector de pantalla debe ser, mogumbo pensó que su protector Plasma estaba en la cima del mundo, pero éste es aún más nauseabundo. Deberías conseguir una bolsa para mareos antes de quedarte observando por mucho tiempo.</description>
+    <description lang="et">See on nii psühhedeelne kui üks ekraanisäästja olla saab. mogumbo arvas, et tema Plasma säästja oli tippude tipp, aga see on isegi rohkem iiveldama ajav. Parem otsi endale üks neist lennuki oksekottidest enne kui liiga kauaks seda siin vaatama jääd.</description>
+    <description lang="eu">Hau ziurrenik inoiz sortu den pantaila-babesle psikodelikoena da. Mogunbo sortzaileak bere Plasma babeslea garaiena zuela uste zuen baina hau oraindik nazkagarriago da. Ikusten denbora asko egon behar bazara hobe zorabiorako poltsa bat edukitzea.</description>
+    <description lang="fi">Tämä on mahdollisesti niin psykedeelinen kuin vain näytönsäästäjä voi olla. mogumbo luuli, että hänen Plasma-näytönäästäjänsä oli asteikon huipulla, mutta tämä ohittaa senkin. Oksennuspussin hakeminen on suositeltavaa ennen pitkäaikaista tuijottamista.</description>
+    <description lang="fr">En terme d'économiseur, on fait difficilement plus psychédélique. Mogumbo pensait son économiseur Plasma tout en haut de l'échelle mais, celui-ci donne encore plus la nausée. Mieux vaut se munir d'un de ces sachets pour le mal de l'air avant de le regarder trop longtemps.</description>
+    <description lang="fr_CA">On fait difficilement plus psychédélique comme économiseur d'écran. mogumbo pensait que son économiseur Plasma était tout en haut de l'échelle mais, celui-ci donne encore plus la nausée. Vous devriez trouver un de ces sacs pour le mal de l'air avant de le fixer trop longtemps.</description>
+    <description lang="gl">Este é máis ou menos tan psicodélico como pode selo un protector de pantalla. mogumbo pensou que o seu protector de pantalla Plasma era do mello, pero este é aínda máis mareante. Será mellor que colla unha bolsa contra o mareo antes de quedar pampo mirando para el.</description>
+    <description lang="he">זהו שומר מסך הכי פסיכדלי שניתן להיות. mogumbo חשב ששומר מסך הפלזמה שלו הגיע לראש הטבלה, אך שומר זה יגרום לתחושת סחרחורת גדולה יותר. מוטב להצטייד במספר שקיות הקאה בטרם בהיה ממושכת.</description>
+    <description lang="hr">Psihodeličan koliko čuvar zaslona može biti. Mogumbo kroz svoj plazma čuvar zaslona je bio vrh, ali od ovog vam je još više loše. Bilo bi vam bolje da pronađete jednu od onih vrećica za mučninu što dijele u avionima prije nego počnete zuriti u ovaj.</description>
+    <description lang="hu">Ez a legpszihedelikusabb képernyővédő. mogumbo úgy gondolta, hogy a Plasma képernyővédő van a lista tetején,de ez még inkább kábító. Jobb ha keresel egy légibetegség zacskót mielőtt túl sokáig néznéd a képernyőt.</description>
+    <description lang="id">Ini adalah sepsikedelik mungkin dari sebuah screensaver. mogumbo mengira Plasma savernya berada di puncak, Tapi ini bahkan lebih memabukkan. Anda sebaiknya mencari kantung mabuk terlebih dahulu sebelum menatapnya terlalu lama.</description>
+    <description lang="is">Þetta er líklega eins geggjað og skjáhvílur geta orðið. mogumbo hélt að Plasma skjáhvílan væri á toppnum, en þessi gerir þig meira flökurt. Best fyrir þig að redda þér ælupoka áður en þú starir á þetta í einhvern tíma. </description>
+    <description lang="it">Questo è quanto di più psichedelico possa essere un salvaschermo. mogumbo pensava che il suo salvaschermo 'Plasma' fosse al massimo della psichedelicità, ma questo è anche più nauseante. Faresti meglio a cercare uno di quei sacchetti per il mal d'aria prima di fissarlo troppo a lungo.</description>
+    <description lang="ja">This is about as psychedelic as screensavers get. mogumbo thought his Plasma saver was at the top of the scale, but this one is even more nauseating. You'd better find one of those air sickness bags before you stare at this one for too long.</description>
+    <description lang="ko">싸이키델릭한 화면보호기입니다. 거의 토나올 정도의 화면보호기로 오래 쳐다보려면 봉투를 준비하는것이 좋을겁니다.</description>
+    <description lang="lt">Tai stogą nunešanti psichodelinė užsklanda. Mogumbo galvojo, kad jo Plasma užsklandos niekas neperšoks, tačiau ši užsklanda tai kažkas tokio. Geriau susiraskite vieną iš tų lėktuvo maišelių, jei supykintų, prieš spoksant į tai per ilgai..</description>
+    <description lang="lv">Ekrānsaudzētājs nevarētu būt vēl vairāk psihodēlisks. mogumbo domāja, ka viņa "Plasma saver" bija saraksta augšgalā, bet šis ir vēl šķebinošāks. Labāk apsēdies un sameklē kādu maisņu nelabai dūšai pirms skaties šo pārāk ilgi.</description>
+    <description lang="mk">This is about as psychedelic as screensavers get. mogumbo thought his Plasma saver was at the top of the scale, but this one is even more nauseating. You'd better find one of those air sickness bags before you stare at this one for too long.</description>
+    <description lang="nl">Ongetwijfeld de meest psychedelische screensaver. mogumbo dacht dat zijn Plasmascreensaver al bovenaan deze lijst stond, maar deze is nóg meer misselijkmakend. Houd uw braakzakje bij de hand, mocht u hier te lang naar staren.</description>
+    <description lang="no">Dette er så psykadelisk som en skjermsparer kan bli. Mogumbo trodde hans Plasma skjermsparer var på toppen av skalaen, men denne er enda mer kvalmende. Du bør skaffe deg en sånn spypose som de deler ut på fly før du stirrer på denne for lenge.</description>
+    <description lang="pl">Tak psychodeliczny wygaszacz jak tylko się da. Lepiej zaopatrz się w worki na chorobę lokomocyjną.</description>
+    <description lang="pt">Provavelmente o protector de ecrã mais psicadélico de sempre. O autor, mogumbo, julgava que a sua proteção 'Plasma' estava no topo da escala, mas este é ainda mais repugnante. É melhor encontrar um desses sacos de enjoo antes de ficar pregado nele durante muito tempo.</description>
+    <description lang="pt_BR">Esta é provavelmente a proteção de tela mais psicodélica de todos os tempos. O mogumbo, pensou que a sua proteção de tela  'Plasma' estava no topo da escala de proteções nauseantes mas esta parece ainda pior. Procure um saco de enjoo e sente-se, se vai ficar muito tempo a olhar para a tela.</description>
+    <description lang="ro">Acesta este un screensaver cât se poate de năucitor. mogumbo credea că screensaverul creat de el, Plasma este pe primul loc, dar acest screensaver este și mai amețitor. Ar trebui să căutați o pungă să nu vi se facă rău înainte de a vă uita la acesta prea mult.</description>
+    <description lang="ru">Самая психоделическая в мире заставка. mogumbo считал, что никто не сможет достичь эффекта его заставки Plasma, но от этой заставки укачивает ещё сильнее. Если будете смотреть на эту заставку слишком долго, вам очень скоро понадобится гигиенический пакет.</description>
+    <description lang="se">Det här är ungefär så psykedelisk skärmsläckare kan bli. mogumbo trodde hans plasma-skärmsläckare var toppen på skalan, men denna är till och med ännu mer kväljande. Du gör bäst i att leta upp en åksjukepåse innan du stirrar på denna för länge.</description>
+    <description lang="sk">Tento šetrič je tak psychodelický ako to len ide. Mogumbo myslel, že Plasma šetrič je na vrchole rebríčka, ale tento je ešte viac zvrátený. Radšej si nájdite hygienické vrecko skôr než naň budete civieť pridlho.</description>
+    <description lang="sl">Težko bi si zamislili bolj psihadeličen ohranjevalnik zaslona. mogumbo je menil, da je njegov ohranjevalnik Plasma na vrhu, to da ta še bolj vzbuja slabost. Bolje, da najdete eno izmed tistih vrečk za bruhanje, preden predolgo strmite vanj.</description>
+    <description lang="sv">Detta är ungefär så psykedelisk som en skärmsläckare kan bli. mogumbo trodde att hans Plasma Saver var toppen på skalan, men denna gör dig ännu mer illamående. Det är nog bäst att du letar upp en påse för flygsjuka innan du sätter dig ned och stirrar på denna för länge.</description>
+    <description lang="tg">Дар тамоми ҷаҳон ин пардаи экран аз ҳама беҳтарин буда дар рейтинги пардаҳои экран ҷои якумро бо пардаи плазмаи худ гирифт. Вақте ки истифодаи ин пардаи экранро сар мекунед, аз истифодаи он ҳеҷ гоҳ рад намекунед.</description>
+    <description lang="tr">Bu, insanı hayallere sürükleyen bir ekran koruyucudur. mogumbo kendisine ait bu Plazma ekran koruyucunun skalanın en üstünde olduğunu düşünüyor, ancak daha ziyade insanın içini kaldırıyor. Bu ekran koruyucuyu uzun süre seyretmeden önce mide bulantınız için gerekli önlemleri almanız iyi olur.</description>
+    <description lang="uk">Сама психоделічна в світі заставка. mogumbo вважав, що ніхто не зможе досягти ефекту його заставки плазми, але від цієї заставки заколисує ще сильніше. Якщо будете дивитися на цю заставку занадто довго, вам дуже скоро знадобиться гігієнічний пакет.</description>
+    <description lang="vi">Chú trọng để tạo ra ảo giác mạnh nhất mà trình bảo vệ màn hình có thể có được. Mogumbo từng nghĩ trình bảo vệ Plasma của mình đã đỉnh, nhưng trình này còn kinh khủng hơn. Tốt hơn hết là bạn nên chuẩn bị một túi chống nôn cho mình trước khi bắt đầu nhìn vào nó quá lâu</description>
+    <description lang="zh">这大概是最具迷幻效果的屏幕保护程序了。mogumbo 以为他的 Plasma 屏保已经是数一数二了，但这个更令人犯晕。如果你要长时间盯视它最好先准备一个晕机袋。</description>
+    <description lang="zh_TW">這大概是最具夢幻效果的屏幕保護程序了。 mogumbo以為他的電漿螢幕保護程式已經是數一數二了，但這個更令人頭昏腦脹。如果你要長時間盯視它最好先準備一個夠用的暈機嘔吐袋。</description>
+    <platform>all</platform>
+  </extension>
+</addon>
diff --git a/addons/screensaver.gles.warp/icon.png b/addons/screensaver.gles.warp/icon.png
new file mode 100644
index 0000000000000000000000000000000000000000..cc2beea958a46bf3d9ecec1a3205be641b1b4555
GIT binary patch
literal 9424
zcmdUVRajg>v+ZCL1`qBG5+EeN;6Voq9$bSvK?4MLCj@tw5Znd{gy8NLY;bpXhco|q
zyASui+?R8ndVhO&clB4jt7_G%`mU@fjg3K$0RRB7Wo0B)0RSY#BN6}|88J-aK{*fu
z*|(3{-_#r|zPTAYnFGYk98Ao?vUbLn=Bnn#W*&|M=0X4fgOjYJn7aG?p*~1keWx+o
z_$yNAn@?RVR-&Jhkd9k=Dag*%qvRy>ne7NwRlFwsuQd~DQW>rFem1b=axg|&C1)5-
z)s?J9AjQw`fbwOnope4$<_6N)m}#gOAA5~Loj;6XK~S)`+HVS}!knKka{MfoZyuIU
zpczvOmUY3Rq@}RDDt}RAFrEwm6&d6&3P!?1X8<4vpo)TH0qCgsfPnwWAOBzHhR7Jp
z8+HIfK37;c{8D}EL&4xLHhRvMyx~Ja4)%xz09iJ!=Gfm)=)8gH<s1u~gN0)O<>@zv
zQO^fKtc@hqXzMzx(@YJpPVkj176ZU0uQhe%{^X6&G!OgZd3!s6N0*_;FaGfnIeH{=
zhYEGJRN@z2kO}Fa92iME@&0qok8!rggZ=&e?QLRG!rkNEj-{-Jh69m|j0|}>xl=}V
z_O`}?#=2jGR$sov&CB%cDqu+{gH#=ICb~b$tG2bY=(}q)G>NQ}qoc01i9%YHT(xv`
zKpLW$Xm@vdmAiOBQNDqs*8dR}d5?U7G%HOF(gZ@O$oF@4ERQ)hx3;!Q)zR+I3R2|r
zkQ7mQLz5tcW}?V2@YTZUN#a{2$@hAsgoINs5~bzkswGYr=NDsHf<;xR)#NgOU=e0#
zmtv^%cI57^)y=W34-}9jK^&Xqb9Zho2BPvDPo4=<1u+0>YYmI-#XK$C%fs&P`PXFb
z<1!C3lXV+xZMo^jl@JpGL5G&z4jUyeyZNU01o-zIyEphbj(6au++2UHfT(C5as^H>
zQtIqAEOupP#=^m}!EC^Rj*iZAt~NhE|G87Q!QPm}=lQLioLn@e?AXA-Ys$DNgGL2p
zFlnXRoVQ5dQ++*0Oth?w45^LD>Z{qK!^6X)qcB{WXstAbnIpzepFRywHq_TIxB5_Y
z?h+U#CSR+#y5i(uaT_gL;U)Gn0G!i&X|KmJIZU?(iJTf2Q%5>nNJvPOX{t;<uWWVP
zju>ED0Gq{`VxwZ2$4Nb{)+dI<$>zZH^cypFiLW>*^5m#jxjr%gxL`RdIYoZn-g;J6
z#T*MF!xCV7A0J`nAI!_9>vUg4U803@F=SrrPhad-8zMBWATK{OaHsb!07s2ml<GAo
z_hfFYI0i!5M0dS+49B(p+t}Fn_b+GkjLk%YX%K0wYGzi}S!fAnaaq|x<68j$+2*Oe
z45NrYWEF9zyQV8+3NJE(O`E@{mPW7LJv}-1yUMk+v~C!ADL@w0VE*Qg*4%*7QkK**
z>TgLYDJib2qGDosBcg0rG5{Y&K*!}m6lK~J)q}BoZzLHCacA=4AIJO@V2dR`(tHpp
zxNSLdt+u>;s-=V~B;b0yLsS-x)6$aUr-LDJtDRj{^LY`Qq8(t(+sCJ+xf$=O%Af^f
z`|3U52LI-GNuo2LsBbw>%FWG9(>He?Qj$~c>+8HT+A=xsnRgqw{dlOzHbaYqWpQm2
z2sOM?%n@n%@#g_<8WTmyUsGOwIRD#*IIk6_{dRtSetUcSHN8}OJS|gQeSJDNWV3o8
zf$3dR$H$%?=+k9F>a%LuEC7@n10TD93VHjQnVFGX2yOI61x@~OKQob+|DoZ72gy$A
zDPC%6X^F#zcbA<BKOR~_y|&XVbHDxyY;w~Lxpmm`@JAhA=+xr6n4Bp@S1$Ltnr7SA
z2L!y_UmaxW@7p`VzAz_lpzp^baT0A>|FdFJOoh1YPtmX^scUHLTLRuCB7t(XtaiHm
zbiJBdvX+jQ9Q^r!8F|Y|Lt6y}1yNB^DB|!{pHH8#dn4mEP|_2tVAGR%dGCqZ<*Pm6
z)<<}tTy~6=>w2x{%c5%2KG$B~TMRh0&DTdpAJKlIZ0hCS>1m>P$d?G>5~F_`F(f2J
zE024HJPWk=qE*bDaHw<d@Mt*{&Ym!UFq>iF4hK!OVDY)3AsaZ%n6Us^lL#!k{bZOu
zJ&#zx-q|+u_&D}r%VXuMd=*W~v3|Zaq-k>>)!pKCW53)CLi*Fxl<}De6%7py2;AJ>
z{#-=$(<|s&52+jwuK(KRRFY3xTKYrSJFQBrblfO)Wdj2?5#s@OZ12m7Fbuz!`iDgY
z$EIx@fVE9HW+IZOq;Fzd^PLJaVVhy&zxG*{guB~Yy}#eS<o5YKjp2}(+1NacOW>xN
zg~ifJNJwDM(++JT;fpGDLHRD`vhipvPq*K+wzis^o8O$Q&?FiHC?~Q6-HgsY3EM`h
zuO2+?@~wDxEzp+mSRt;k?6i$r;B#A4QIVyoY5s4j{r!uR4)tp;Fo#pEL{AT&!!tu`
zetrSBD39pazM&bw<ud*a&{_CVDJN%4C>1g@#?Jp%cCAWOwq23B!AMvX8N&Zq+c@SA
z2<hNj#(P$I`_FBfXVb~U$?0Dt8P^BwIvrIMvjBw|fZ&nkM_a6##?j9RSMnhzz@>dC
z5FMn#%fqAp=d|Va@1XCsI0Hbf1=nq0h#vZK_k+E)cm?QU9K&8qo}Mb?QBzh{CRb3C
z2;4m$XS4y#d9HP$-P_Rk-mcBhf4)yvKx?w_+!@s;SF<;r%pnIOU5cU{0jr#)kL0(D
z8pva>8-V@DX@`E<?(3i@`K7hzgM))tbH-KA!8tiJtq2Q!^v$Ly&;chrDTS++v?c4C
zDz2zH;89VHj9^wfzqz+D2uC%F2mYD#OY}rGTFYt8S*GXUFdk0j823*n@$Y^_h)iAe
zn_4`2EZWVvmpX34jmu0lbFgGGLmC9k9Q(nsD|X-QzXP}0!cWt0(W`Y50HAgT?7CM#
zVB8A_UtnNhXIB>*wlWZg^U?+F7+uo8DIq3&9tkLzn7DSmeu_nv0WkK1waLm){C0;p
z5?+6<+2pf6`i5r?z^u)Y6@9S}JB-)4j~EUJ4@dX%^7@_j9|5~q<CQoVSih=%LaU9|
z0$poFHC0hQeE4uVolpjnqWh-F>@|g>1IA3J8EHfOLzf|!T#HLf-ZWQlFwGpvzG9#=
zyqJQ($LLdhVL%yx6a&(;pO_c}0JA+R!>y3Ky@q_(3?qCTH&*b2%&-S@B<i@&9VYlS
z#a*g&XFD>eotaD-&Gs#KL!Hbo#3EuqGb(Zk0ESmuS{i&{Dgz)M1bjmucIqD+<2%4E
zkOeG}04ggh5wGa_hla{ZD&wrh$l5tMbLj!e;`0G0sz>>|1IRi*0m^DfMjV^lrEs-B
zjeX-8N5~%dqAB>R>?pkML_!_qf7Dgu<Kut&oY$+1leOcc`TuIse=0u7|Av~IGqJds
znVIQ*aBW8>?MG3<&l-E=pI?~fIdc~gf}u^Ou-0a%qNCI3I9Z6W-a#`?;+K)Xf(uBJ
zZnfFOKSo1N{%$bh?O(^@;fub|va>r(7LMp0S{^oVINUZ!A(0APDP1H#nc|S`E`}+%
zKbEw#2xlQrIn?ju*VW}q$IQd~ZOu7Lj9$WIfOr=M3g0HmEHp!*{1py+>=TQre>Uzy
z4#^;=&<@EF-*!tKomc;Grlw~4&FXpS_HVi>UfWd!-<vG|pcSAB5Txzv=;)Xo(>iX~
zC<q^MY7F}G4iQcG8lszc5gxZgdH-X2a(p~K?f%!3f<-@si(Qn6g1c2F!|rGbID_F|
z?8g#ZR{<HvW``-~=2gE8;SR<~q-M>Zo!?;{Q!^MfuV}aBwu|!dxjj9^eZ%CVz8`9;
zzlxRQdZoxD41e1p)0I%Bir95}YAW!ezP?`QOi)OvZHZcc|A=c|_0TW&BJ%b~txy4J
z<FzNNqR68RCOsXTy(0_f2<+zUY_5vB>BOJ(N*MD_M@PqUEZe5hMgFTGZ*p$y8?JVg
zW{1hd3`}A+^eiH4VKJ=&)w4F-n}tMuR*8BR7Pf!H;9&;GBGB2FP=e4L8n+Suj#pu?
zot$5vjcxDjXw9nED!+(MrO4cmTxc5rkRRr{>Jj*dIG8;=T-(a7FQcZWw$bB5ngY7w
zI*3^_ed_5_%}!rG3{rO!Biakr0K-!f6SIZO2FKXPsYj7d!eo13lvk{#0g{KW?iLVG
zpw_Vq_)ciHrl!Vv?%cedc}Nl&^1-s;W(TEK1E|rVpgx8{VI%dO7@-}Le>QER`ZMzH
zpHgq1M*(zWV-tS8YFzjP1mzbE>LpH%bLbTk)7TV0>48$E>xwouDvpkpjDsB=%VQ4Z
z!A<P%-PWll!;`eCA8p0tWxvP{6vXfETgMudX0@!*J;98r)|SR4)>svNFwOjNcAQ^Y
z+d85AZwIXXR(E#`TwGi@br<Y$`*vwkxul5VM{(`Lw>m6*&t}GEV{{}N7sZ%cT?&03
zh&vf-AdZn}8XD8AtgKXeDMDWfLte&2{Ym`1G&{X8%>ZYaF<C9bnK3*Wv-|1f>R);(
zqbCf1yg{D8-j1jYp-t|auHn1}Hg=shu&81>>+DlgGEYIYI`4?H`|*Q{46W1b1cx=f
z(@YwWmgi+0I_R|X{n0QxEA9y8D<6OFO~>_DYD|PcA``>JenV2;?8O1FIGbw6rdfw7
z($11AkQfdLYsYo+W)AJ0Yn-_gzWLnik{`-RllJ!Kr&x0&%}EV<`4b-#!$g^H%RR0)
zWIX>SLUC10Mh_s7W-($Omr|_4)C1tvzi-gS&la?wgk3rRaoOG<D3rI-6`Wa<2@Kbd
zlDEsz3hf>v@EiiEN51!~z>`SmZVCA0_X3%@AwZx`jFZWK|7?f7DUdsr3H>F%kwOsW
z;VFX1NQBp0@Sg7y2u8dp0!7LT!&^~g0iVgfcH@usH~hIcJ3TEfF2)P-tGL(;ep*-4
zrfIg%^J?ACxvgj$W?ueb;1XT#f@unr;_=ss!jrCQZuUNF?B3{$q2Vx*^ziV2LcfkK
zEHqVCMz>h5t;{615&lj%U2%kKdPNngWJf!Uke6H)qAGk1`KfPHX+*5w_nw0ro29is
zDoU(^k1KC7`!|^Y4(x>s;O6wn)wTWumY{$D4vh$9y!-81*n=GdoWzw?Mv>y#P5|?T
zYIdNZ!OO#=ljnEC?}06+<6rh8lR^t<;kaH6m=xAy$Wz%E{a545Y|Hxrc7l~S_($n>
zC1n0qZu7>l5IX|K$H1shlU4Pv99OJcxp?uFl$5ga5&***D1a1pLt;I=mnWNS9$|}N
zQWBDs=j!L%fjDP)jvv%1*zF}N)Q^LH%PH)zyqwSVC>>(lIcw;1by(#$lFDV=+5Me>
zado6OilVu>8P!!W?Y#TSW~(#jq~*pyZ;^&-^PHx&4Q4Z2SzrHPcXP5q@ikFUkC`pI
z{ieN`nq1&uQ71{87JTr4n15K?*6L9!!XzjU=UMm_b>cl+nML5sLCYlgaFXL2kylf3
z`ZBIl%SK2dMx=laN0y(seY#oc62A<^-Rf_kQ8nmCCiBlS@?a3w*Vfk8XKfAxwkta8
zzD(pxYiVdKwRmZD(%e7Yw)asbK(m_sVmJ22#~oUq|H5F(CF;IsJv&=l=1p#G)dx}f
z+8VJr&^PXbQ4t5&*x2Te{6gBPSy^awqp2JOCsb5hXO51>wU$hb3}(M*99><bBlRBJ
zXuR7$ep8C!TXv`C<0GNqcZ$;$9vmubZ51m}6=QwGx4*y@afiNtZ#$OZP*_BRfRqlc
zjTBVpDmg<R&(0jNudZy3Nb|(kV)9HpDA)ta%*`7cOA!jcJSXqzzU+87i6ZC05IOx9
zLqb7L(b6LA^K>-}|1m#2R!IF9c|4P7)DS%-;i54Xwf!S4$Ulo2G<=WhdWpM_S^B`t
zdNgyStG^f`6&|h_eI6X_j;B>|b&>ntAS)~L!@7U~n?W7A-@Vf1?7!j`ST3GCF{{C5
z@JA<Uh;Lss6&j@=k$keG1dH?bu&jatIt~u7783)*;CAVx5cO3MY>ds5IGF9-JEicL
zzR#ybW#bkP(Nyp+fHwa7j(P&7ds8jA*XDYUoH;r$XzOBo4Ek*s5_-S(;_ENWZgBbD
z0GCRD+w1zUC<n(}6LX4WFn*EUISzNi_hNhGNTLLMe4|Tmt&i7#J-XZyh>6dHREWfN
zL_-EdyGeSd1<yg);h_Py{z`CUwejTk2>AH%?ji>Zgw*2w^hiffuT^2t@@?+CJ6IA%
ziHcze1HZSuUjO(*g`K{&QnvxeJ1XjX$HRF|P03_ol}>GM-vUKerjU#Ea`Rn35qsNX
zO@6{;z1>1JhU5L_0734~_0dAL)~T1Y>OVvxH$e-hp=!C@;<15H+df|}I0Q5oDQ1at
zitX$&2?;Is^-(zZ-VK%XQ&%<LW1te_<0E2=^XY0H&-d>%K9{so8R>s<k4V@J>RgWm
z%0D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

literal 0
HcmV?d00001

diff --git a/configure.ac b/configure.ac
index baff8b4..8241245 100644
--- a/configure.ac
+++ b/configure.ac
@@ -178,6 +178,8 @@ alsa_disabled="== ALSA support disabled. =="
 dbus_disabled="== DBUS support disabled. =="
 rsxs_enabled="== RSXS enabled. =="
 rsxs_disabled="== RSXS disabled. =="
+glesscreensavers_enabled="== GLES screensavers enabled. =="
+glesscreensavers_disabled="== GLES screensavers disabled. =="
 fishbmc_enabled="== FishBMC enabled. =="
 fishbmc_disabled="== FishBMC disabled. =="
 projectm_enabled="== ProjectM enabled. =="
@@ -338,6 +340,12 @@ AC_ARG_ENABLE([rsxs],
   [use_rsxs=$enableval],
   [use_rsxs=yes])
 
+AC_ARG_ENABLE([glesscreensavers],
+  [AS_HELP_STRING([--enable-glesscreensavers],
+  [enable GLES screensavers (default is yes)])],
+  [use_glesscreensavers=$enableval],
+  [use_glesscreensavers=yes])
+
 AC_ARG_ENABLE([fishbmc],
   [AS_HELP_STRING([--enable-fishbmc],
   [enable FishBMC visualisation (default is yes)])],
@@ -1471,6 +1479,15 @@ else
   fi
 fi
 
+# GLES Screensavers
+if test "$use_glesscreensavers" = "no" || test "$use_gles" = "no"; then
+  AC_MSG_NOTICE($glesscreensavers_disabled)
+  DISABLE_GLESSCREENSAVERS=1
+else
+  AC_MSG_NOTICE($glesscreensavers_enabled)
+  DISABLE_GLESSCREENSAVERS=0
+fi
+
 # FISHBMC
 if test "$use_fishbmc" = "no" || test "$use_gl" = "no"; then
   AC_MSG_NOTICE($fishbmc_disabled)   
@@ -2139,6 +2156,12 @@ else
   final_message="$final_message\n  RSXS:\t\tNo"
 fi
 
+if test "$use_glesscreensavers" = "yes"; then
+  final_message="$final_message\n  GLES Screensavers:\t\tYes"
+else
+  final_message="$final_message\n  GLES Screensavers:\t\tNo"
+fi
+
 if test "$use_fishbmc" = "yes"; then
   final_message="$final_message\n  FishBMC:\tYes"
 else
@@ -2496,6 +2519,15 @@ OUTPUT_FILES="Makefile \
     xbmc/linux/Makefile \
     xbmc/filesystem/Makefile \
     xbmc/screensavers/rsxs-0.9/xbmc/Makefile \
+    xbmc/screensavers/gles/Makefile \
+    xbmc/screensavers/gles/solarwinds/Makefile \
+    xbmc/screensavers/gles/plasma/Makefile \
+    xbmc/screensavers/gles/plasma2/Makefile \
+    xbmc/screensavers/gles/noise/Makefile \
+    xbmc/screensavers/gles/warp/Makefile \
+    xbmc/screensavers/gles/stellar/Makefile \
+    xbmc/screensavers/gles/spiral/Makefile \
+    xbmc/screensavers/gles/ball/Makefile \
     xbmc/visualizations/XBMCProjectM/Makefile \
     xbmc/visualizations/Goom/Makefile \
     xbmc/visualizations/OpenGLSpectrum/Makefile \
@@ -2596,6 +2628,7 @@ AC_SUBST(DISABLE_WAVEFORM)
 AC_SUBST(DISABLE_SPECTRUM)
 AC_SUBST(DISABLE_GOOM)
 AC_SUBST(DISABLE_RSXS)
+AC_SUBST(DISABLE_GLESSCREENSAVERS)
 AC_SUBST(DISABLE_FISHBMC)
 AC_SUBST(DISABLE_PROJECTM)
 AC_SUBST(FFMPEG_LIBDIR)
diff --git a/xbmc/screensavers/gles/Makefile.in b/xbmc/screensavers/gles/Makefile.in
new file mode 100644
index 0000000..b83237d
--- /dev/null
+++ b/xbmc/screensavers/gles/Makefile.in
@@ -0,0 +1,6 @@
+SRCS=triangle2.cpp
+
+LIB=gleshelpers.a
+
+include @abs_top_srcdir@/Makefile.include
+-include $(patsubst %.cpp,%.P,$(patsubst %.c,%.P,$(SRCS)))
diff --git a/xbmc/screensavers/gles/ball/Makefile.in b/xbmc/screensavers/gles/ball/Makefile.in
new file mode 100644
index 0000000..d788075
--- /dev/null
+++ b/xbmc/screensavers/gles/ball/Makefile.in
@@ -0,0 +1,36 @@
+ARCH=@ARCH@
+CXXFLAGS=-fPIC
+ifeq (@USE_ANDROID@,1)
+SLIB = @abs_top_srcdir@/system/libball.so
+else
+SLIB = @abs_top_srcdir@/addons/screensaver.gles.ball/Ball.xbs
+endif
+OBJS = wrapper.o 
+DEFINES += -DSCREENSAVER=ball
+
+ifeq (@USE_OPENGLES@,1)
+  DEFINES += -DHAS_GLES=2
+  INCLUDES+= -I@abs_top_srcdir@/xbmc/screensavers/gles
+  OBJS += @abs_top_srcdir@/xbmc/screensavers/gles/gleshelpers.a
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGLES
+  else
+    LDFLAGS += -lGLESv2
+  endif
+else
+  DEFINES += -DHAS_GL
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGL
+  else
+    LDFLAGS += -lGL
+  endif
+endif
+
+$(SLIB): $(OBJS)
+ifeq ($(findstring osx,$(ARCH)), osx)
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -bundle -o $(SLIB) $(OBJS)
+else
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -shared -o $(SLIB) $(OBJS)
+endif
+
+include @abs_top_srcdir@/Makefile.include
diff --git a/xbmc/screensavers/gles/ball/wrapper.cc b/xbmc/screensavers/gles/ball/wrapper.cc
new file mode 100644
index 0000000..fd58b73
--- /dev/null
+++ b/xbmc/screensavers/gles/ball/wrapper.cc
@@ -0,0 +1,102 @@
+#include <stdio.h>
+#include <assert.h>
+#include "Application.h"
+#include "../../addons/include/xbmc_scr_dll.h"
+
+extern "C" {
+
+#include "triangle2.h"
+
+#define PASTER(x,y) x ## _ ## y
+#define EVALUATOR(x,y) PASTER(x,y)
+#define NAME(fun) EVALUATOR(fun, SCREENSAVER)
+
+static CUBE_STATE_T _state, *state=&_state;
+
+ADDON_STATUS ADDON_Create(void* hdl, void* props)
+{
+  if (!props)
+    return ADDON_STATUS_UNKNOWN;
+
+  // Clear application state
+  memset( state, 0, sizeof( *state ) );
+  // Start OGLES
+  assert( g_application.IsCurrentThread() );
+  glGetError();
+
+  SCR_PROPS* scrprops = (SCR_PROPS*)props;
+  state->width = scrprops->width;
+  state->height = scrprops->height;
+  setup_screensaver_default(state);
+  NAME(setup_screensaver)(state);
+  screensaver_init(state);
+  screensaver_init_shaders(state);
+
+  return ADDON_STATUS_OK;
+}
+
+void Start()
+{
+}
+
+void Render()
+{
+  screensaver_update(state);
+  screensaver_render(state);
+}
+
+void ADDON_Stop()
+{
+   screensaver_deinit_shaders(state);
+}
+
+void ADDON_Destroy()
+{
+}
+
+ADDON_STATUS ADDON_GetStatus()
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+bool ADDON_HasSettings()
+{
+puts(__func__);
+  return false;
+}
+
+unsigned int ADDON_GetSettings(ADDON_StructSetting ***sSet)
+{
+puts(__func__);
+  return 0;
+}
+
+ADDON_STATUS ADDON_SetSetting(const char *settingName, const void *settingValue)
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+void ADDON_FreeSettings()
+{
+puts(__func__);
+}
+
+void ADDON_Announce(const char *flag, const char *sender, const char *message, const void *data)
+{
+puts(__func__);
+}
+
+void GetInfo(SCR_INFO *info)
+{
+puts(__func__);
+}
+
+void Remove()
+{
+puts(__func__);
+}
+
+}
+
diff --git a/xbmc/screensavers/gles/noise/Makefile.in b/xbmc/screensavers/gles/noise/Makefile.in
new file mode 100644
index 0000000..ef3287c
--- /dev/null
+++ b/xbmc/screensavers/gles/noise/Makefile.in
@@ -0,0 +1,36 @@
+ARCH=@ARCH@
+CXXFLAGS=-fPIC
+ifeq (@USE_ANDROID@,1)
+SLIB = @abs_top_srcdir@/system/libnoise.so
+else
+SLIB = @abs_top_srcdir@/addons/screensaver.gles.noise/Noise.xbs
+endif
+OBJS = wrapper.o 
+DEFINES += -DSCREENSAVER=noise
+
+ifeq (@USE_OPENGLES@,1)
+  DEFINES += -DHAS_GLES=2
+  INCLUDES+= -I@abs_top_srcdir@/xbmc/screensavers/gles
+  OBJS += @abs_top_srcdir@/xbmc/screensavers/gles/gleshelpers.a
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGLES
+  else
+    LDFLAGS += -lGLESv2
+  endif
+else
+  DEFINES += -DHAS_GL
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGL
+  else
+    LDFLAGS += -lGL
+  endif
+endif
+
+$(SLIB): $(OBJS)
+ifeq ($(findstring osx,$(ARCH)), osx)
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -bundle -o $(SLIB) $(OBJS)
+else
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -shared -o $(SLIB) $(OBJS)
+endif
+
+include @abs_top_srcdir@/Makefile.include
diff --git a/xbmc/screensavers/gles/noise/wrapper.cc b/xbmc/screensavers/gles/noise/wrapper.cc
new file mode 100644
index 0000000..fd58b73
--- /dev/null
+++ b/xbmc/screensavers/gles/noise/wrapper.cc
@@ -0,0 +1,102 @@
+#include <stdio.h>
+#include <assert.h>
+#include "Application.h"
+#include "../../addons/include/xbmc_scr_dll.h"
+
+extern "C" {
+
+#include "triangle2.h"
+
+#define PASTER(x,y) x ## _ ## y
+#define EVALUATOR(x,y) PASTER(x,y)
+#define NAME(fun) EVALUATOR(fun, SCREENSAVER)
+
+static CUBE_STATE_T _state, *state=&_state;
+
+ADDON_STATUS ADDON_Create(void* hdl, void* props)
+{
+  if (!props)
+    return ADDON_STATUS_UNKNOWN;
+
+  // Clear application state
+  memset( state, 0, sizeof( *state ) );
+  // Start OGLES
+  assert( g_application.IsCurrentThread() );
+  glGetError();
+
+  SCR_PROPS* scrprops = (SCR_PROPS*)props;
+  state->width = scrprops->width;
+  state->height = scrprops->height;
+  setup_screensaver_default(state);
+  NAME(setup_screensaver)(state);
+  screensaver_init(state);
+  screensaver_init_shaders(state);
+
+  return ADDON_STATUS_OK;
+}
+
+void Start()
+{
+}
+
+void Render()
+{
+  screensaver_update(state);
+  screensaver_render(state);
+}
+
+void ADDON_Stop()
+{
+   screensaver_deinit_shaders(state);
+}
+
+void ADDON_Destroy()
+{
+}
+
+ADDON_STATUS ADDON_GetStatus()
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+bool ADDON_HasSettings()
+{
+puts(__func__);
+  return false;
+}
+
+unsigned int ADDON_GetSettings(ADDON_StructSetting ***sSet)
+{
+puts(__func__);
+  return 0;
+}
+
+ADDON_STATUS ADDON_SetSetting(const char *settingName, const void *settingValue)
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+void ADDON_FreeSettings()
+{
+puts(__func__);
+}
+
+void ADDON_Announce(const char *flag, const char *sender, const char *message, const void *data)
+{
+puts(__func__);
+}
+
+void GetInfo(SCR_INFO *info)
+{
+puts(__func__);
+}
+
+void Remove()
+{
+puts(__func__);
+}
+
+}
+
diff --git a/xbmc/screensavers/gles/plasma/Makefile.in b/xbmc/screensavers/gles/plasma/Makefile.in
new file mode 100644
index 0000000..a69c159
--- /dev/null
+++ b/xbmc/screensavers/gles/plasma/Makefile.in
@@ -0,0 +1,36 @@
+ARCH=@ARCH@
+CXXFLAGS=-fPIC
+ifeq (@USE_ANDROID@,1)
+SLIB = @abs_top_srcdir@/system/libplasma.so
+else
+SLIB = @abs_top_srcdir@/addons/screensaver.gles.plasma/Plasma.xbs
+endif
+OBJS = wrapper.o 
+DEFINES += -DSCREENSAVER=plasma
+
+ifeq (@USE_OPENGLES@,1)
+  DEFINES += -DHAS_GLES=2
+  INCLUDES+= -I@abs_top_srcdir@/xbmc/screensavers/gles
+  OBJS += @abs_top_srcdir@/xbmc/screensavers/gles/gleshelpers.a
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGLES
+  else
+    LDFLAGS += -lGLESv2
+  endif
+else
+  DEFINES += -DHAS_GL
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGL
+  else
+    LDFLAGS += -lGL
+  endif
+endif
+
+$(SLIB): $(OBJS)
+ifeq ($(findstring osx,$(ARCH)), osx)
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -bundle -o $(SLIB) $(OBJS)
+else
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -shared -o $(SLIB) $(OBJS)
+endif
+
+include @abs_top_srcdir@/Makefile.include
diff --git a/xbmc/screensavers/gles/plasma/wrapper.cc b/xbmc/screensavers/gles/plasma/wrapper.cc
new file mode 100644
index 0000000..fd58b73
--- /dev/null
+++ b/xbmc/screensavers/gles/plasma/wrapper.cc
@@ -0,0 +1,102 @@
+#include <stdio.h>
+#include <assert.h>
+#include "Application.h"
+#include "../../addons/include/xbmc_scr_dll.h"
+
+extern "C" {
+
+#include "triangle2.h"
+
+#define PASTER(x,y) x ## _ ## y
+#define EVALUATOR(x,y) PASTER(x,y)
+#define NAME(fun) EVALUATOR(fun, SCREENSAVER)
+
+static CUBE_STATE_T _state, *state=&_state;
+
+ADDON_STATUS ADDON_Create(void* hdl, void* props)
+{
+  if (!props)
+    return ADDON_STATUS_UNKNOWN;
+
+  // Clear application state
+  memset( state, 0, sizeof( *state ) );
+  // Start OGLES
+  assert( g_application.IsCurrentThread() );
+  glGetError();
+
+  SCR_PROPS* scrprops = (SCR_PROPS*)props;
+  state->width = scrprops->width;
+  state->height = scrprops->height;
+  setup_screensaver_default(state);
+  NAME(setup_screensaver)(state);
+  screensaver_init(state);
+  screensaver_init_shaders(state);
+
+  return ADDON_STATUS_OK;
+}
+
+void Start()
+{
+}
+
+void Render()
+{
+  screensaver_update(state);
+  screensaver_render(state);
+}
+
+void ADDON_Stop()
+{
+   screensaver_deinit_shaders(state);
+}
+
+void ADDON_Destroy()
+{
+}
+
+ADDON_STATUS ADDON_GetStatus()
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+bool ADDON_HasSettings()
+{
+puts(__func__);
+  return false;
+}
+
+unsigned int ADDON_GetSettings(ADDON_StructSetting ***sSet)
+{
+puts(__func__);
+  return 0;
+}
+
+ADDON_STATUS ADDON_SetSetting(const char *settingName, const void *settingValue)
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+void ADDON_FreeSettings()
+{
+puts(__func__);
+}
+
+void ADDON_Announce(const char *flag, const char *sender, const char *message, const void *data)
+{
+puts(__func__);
+}
+
+void GetInfo(SCR_INFO *info)
+{
+puts(__func__);
+}
+
+void Remove()
+{
+puts(__func__);
+}
+
+}
+
diff --git a/xbmc/screensavers/gles/plasma2/Makefile.in b/xbmc/screensavers/gles/plasma2/Makefile.in
new file mode 100644
index 0000000..264e576
--- /dev/null
+++ b/xbmc/screensavers/gles/plasma2/Makefile.in
@@ -0,0 +1,36 @@
+ARCH=@ARCH@
+CXXFLAGS=-fPIC
+ifeq (@USE_ANDROID@,1)
+SLIB = @abs_top_srcdir@/system/libplasma2.so
+else
+SLIB = @abs_top_srcdir@/addons/screensaver.gles.plasma2/Plasma2.xbs
+endif
+OBJS = wrapper.o 
+DEFINES += -DSCREENSAVER=plasma2
+
+ifeq (@USE_OPENGLES@,1)
+  DEFINES += -DHAS_GLES=2
+  INCLUDES+= -I@abs_top_srcdir@/xbmc/screensavers/gles
+  OBJS += @abs_top_srcdir@/xbmc/screensavers/gles/gleshelpers.a
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGLES
+  else
+    LDFLAGS += -lGLESv2
+  endif
+else
+  DEFINES += -DHAS_GL
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGL
+  else
+    LDFLAGS += -lGL
+  endif
+endif
+
+$(SLIB): $(OBJS)
+ifeq ($(findstring osx,$(ARCH)), osx)
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -bundle -o $(SLIB) $(OBJS)
+else
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -shared -o $(SLIB) $(OBJS)
+endif
+
+include @abs_top_srcdir@/Makefile.include
diff --git a/xbmc/screensavers/gles/plasma2/wrapper.cc b/xbmc/screensavers/gles/plasma2/wrapper.cc
new file mode 100644
index 0000000..fd58b73
--- /dev/null
+++ b/xbmc/screensavers/gles/plasma2/wrapper.cc
@@ -0,0 +1,102 @@
+#include <stdio.h>
+#include <assert.h>
+#include "Application.h"
+#include "../../addons/include/xbmc_scr_dll.h"
+
+extern "C" {
+
+#include "triangle2.h"
+
+#define PASTER(x,y) x ## _ ## y
+#define EVALUATOR(x,y) PASTER(x,y)
+#define NAME(fun) EVALUATOR(fun, SCREENSAVER)
+
+static CUBE_STATE_T _state, *state=&_state;
+
+ADDON_STATUS ADDON_Create(void* hdl, void* props)
+{
+  if (!props)
+    return ADDON_STATUS_UNKNOWN;
+
+  // Clear application state
+  memset( state, 0, sizeof( *state ) );
+  // Start OGLES
+  assert( g_application.IsCurrentThread() );
+  glGetError();
+
+  SCR_PROPS* scrprops = (SCR_PROPS*)props;
+  state->width = scrprops->width;
+  state->height = scrprops->height;
+  setup_screensaver_default(state);
+  NAME(setup_screensaver)(state);
+  screensaver_init(state);
+  screensaver_init_shaders(state);
+
+  return ADDON_STATUS_OK;
+}
+
+void Start()
+{
+}
+
+void Render()
+{
+  screensaver_update(state);
+  screensaver_render(state);
+}
+
+void ADDON_Stop()
+{
+   screensaver_deinit_shaders(state);
+}
+
+void ADDON_Destroy()
+{
+}
+
+ADDON_STATUS ADDON_GetStatus()
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+bool ADDON_HasSettings()
+{
+puts(__func__);
+  return false;
+}
+
+unsigned int ADDON_GetSettings(ADDON_StructSetting ***sSet)
+{
+puts(__func__);
+  return 0;
+}
+
+ADDON_STATUS ADDON_SetSetting(const char *settingName, const void *settingValue)
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+void ADDON_FreeSettings()
+{
+puts(__func__);
+}
+
+void ADDON_Announce(const char *flag, const char *sender, const char *message, const void *data)
+{
+puts(__func__);
+}
+
+void GetInfo(SCR_INFO *info)
+{
+puts(__func__);
+}
+
+void Remove()
+{
+puts(__func__);
+}
+
+}
+
diff --git a/xbmc/screensavers/gles/solarwinds/Makefile.in b/xbmc/screensavers/gles/solarwinds/Makefile.in
new file mode 100644
index 0000000..8d4e845
--- /dev/null
+++ b/xbmc/screensavers/gles/solarwinds/Makefile.in
@@ -0,0 +1,36 @@
+ARCH=@ARCH@
+CXXFLAGS=-fPIC
+ifeq (@USE_ANDROID@,1)
+SLIB = @abs_top_srcdir@/system/libsolarwinds.so
+else
+SLIB = @abs_top_srcdir@/addons/screensaver.gles.solarwinds/Solarwinds.xbs
+endif
+OBJS = wrapper.o solarwinds.o 
+DEFINES += -DSCREENSAVER=solarwinds
+
+ifeq (@USE_OPENGLES@,1)
+  DEFINES += -DHAS_GLES=2
+  INCLUDES+= -I@abs_top_srcdir@/xbmc/screensavers/gles
+  OBJS += @abs_top_srcdir@/xbmc/screensavers/gles/gleshelpers.a
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGLES
+  else
+    LDFLAGS += -lGLESv2
+  endif
+else
+  DEFINES += -DHAS_GL
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGL
+  else
+    LDFLAGS += -lGL
+  endif
+endif
+
+$(SLIB): $(OBJS)
+ifeq ($(findstring osx,$(ARCH)), osx)
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -bundle -o $(SLIB) $(OBJS)
+else
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -shared -o $(SLIB) $(OBJS)
+endif
+
+include @abs_top_srcdir@/Makefile.include
diff --git a/xbmc/screensavers/gles/solarwinds/solarwinds.c b/xbmc/screensavers/gles/solarwinds/solarwinds.c
new file mode 100644
index 0000000..da5bf21
--- /dev/null
+++ b/xbmc/screensavers/gles/solarwinds/solarwinds.c
@@ -0,0 +1,531 @@
+/*
+Copyright (c) 2012, Broadcom Europe Ltd
+All rights reserved.
+
+Redistribution and use in source and binary forms, with or without
+modification, are permitted provided that the following conditions are met:
+    * Redistributions of source code must retain the above copyright
+      notice, this list of conditions and the following disclaimer.
+    * Redistributions in binary form must reproduce the above copyright
+      notice, this list of conditions and the following disclaimer in the
+      documentation and/or other materials provided with the distribution.
+    * Neither the name of the copyright holder nor the
+      names of its contributors may be used to endorse or promote products
+      derived from this software without specific prior written permission.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY
+DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+*/
+
+// OpenGL|ES 2 demo using shader to compute particle/render sets
+// Thanks to Peter de Rivas for original Python code
+
+#include <stdio.h>
+#include <fcntl.h>
+#include <stdlib.h>
+#include <string.h>
+#include <math.h>
+#include <assert.h>
+#include <unistd.h>
+
+#include "bcm_host.h"
+
+#include "solarwinds.h"
+
+#define PARTICLE_WIDTH  16
+#define PARTICLE_HEIGHT 16
+
+#define min(a,b) ((a)<(b)?(a):(b)) 
+#define max(a,b) ((a)<(b)?(b):(a)) 
+
+#define check() assert(glGetError() == 0)
+
+static void showlog(GLint shader)
+{
+   // Prints the compile log for a shader
+   char log[1024];
+   glGetShaderInfoLog(shader,sizeof log,NULL,log);
+   printf("%d:shader:\n%s\n", shader, log);
+}
+
+static void showprogramlog(GLint shader)
+{
+   // Prints the information log for a program object
+   char log[1024];
+   glGetProgramInfoLog(shader,sizeof log,NULL,log);
+   printf("%d:program:\n%s\n", shader, log);
+}
+
+static void *create_particle_tex(int width, int height)
+{
+  int i, j;
+  unsigned char *q = malloc(width * height * 4);
+  if (!q)
+    return NULL;
+  unsigned char *p = q;
+  for (j=0; j<height; j++) {
+    for (i=0; i<width; i++) {
+      float x = ((float)i + 0.5f) / (float)width  - 0.5f;
+      float y = ((float)j + 0.5f) / (float)height - 0.5f;
+      float d = 1.0f-2.0f*sqrtf(x*x + y*y);
+      unsigned v = 255.0f * max(min(d, 1.0f), 0.0f);
+      *p++ = 255;
+      *p++ = 255;
+      *p++ = 255;
+      *p++ = v;
+    }
+  }
+  return q;
+}
+
+void solarwinds_init_shaders(CUBE_STATE_T *state)
+{
+   const GLchar *particle_vshader_source =
+	//"// Attributes"
+	"attribute vec4 aPos;"
+        "attribute vec4 aShade;"
+	""
+	//"// Uniforms"
+	"uniform mat4 uProjectionMatrix;"
+	"varying vec4 vShade;"
+        ""
+	"void main(void)"
+	"{"
+	"    gl_Position = uProjectionMatrix * vec4(aPos.x/60.0, aPos.y/60.0, (16.0-aPos.z)/60.0, 1.0);"
+	"    gl_PointSize = 16.0/gl_Position.w;"
+	"    vShade = aShade;"
+	"}";
+ 
+   //particle
+   const GLchar *particle_fshader_source =
+	//" Input from Vertex Shader"
+	"varying vec4 vShade;"
+	"" 
+	//" Uniforms"
+	"uniform sampler2D uTexture;"
+	""
+	"void main(void)"
+	"{"
+	"    vec4 texture = texture2D(uTexture, gl_PointCoord);"
+	"    vec4 color = clamp(vShade, vec4(0.0), vec4(1.0));"
+	"    gl_FragColor = texture * color;"
+	"}";
+
+        state->mvshader = glCreateShader(GL_VERTEX_SHADER);
+        glShaderSource(state->mvshader, 1, &particle_vshader_source, 0);
+        glCompileShader(state->mvshader);
+        check();
+
+        if (state->verbose)
+            showlog(state->mvshader);
+            
+        state->mshader = glCreateShader(GL_FRAGMENT_SHADER);
+        glShaderSource(state->mshader, 1, &particle_fshader_source, 0);
+        glCompileShader(state->mshader);
+        check();
+
+        if (state->verbose)
+            showlog(state->mshader);
+
+        // particle
+        state->program_particle = glCreateProgram();
+        glAttachShader(state->program_particle, state->mvshader);
+        glAttachShader(state->program_particle, state->mshader);
+        glLinkProgram(state->program_particle);
+        glDetachShader(state->program_particle, state->mvshader);
+        glDetachShader(state->program_particle, state->mshader);
+        glDeleteShader(state->mvshader);
+        glDeleteShader(state->mshader);
+        check();
+
+        if (state->verbose)
+            showprogramlog(state->program_particle);
+            
+        state->aPos              = glGetAttribLocation(state->program_particle, "aPos");
+        state->uProjectionMatrix = glGetUniformLocation(state->program_particle, "uProjectionMatrix");
+	state->aShade            = glGetAttribLocation(state->program_particle, "aShade");
+	state->uTexture          = glGetUniformLocation(state->program_particle, "uTexture");
+        check();
+           
+        glGenBuffers(1, &state->particleBuffer);
+
+        check();
+
+        // Prepare a texture image
+        glGenTextures(1, &state->tex_particle);
+        check();
+        glBindTexture(GL_TEXTURE_2D, state->tex_particle);
+        check();
+        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 
+	state->tex_particle_data = create_particle_tex(PARTICLE_WIDTH, PARTICLE_HEIGHT);
+        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, PARTICLE_WIDTH, PARTICLE_HEIGHT, 0, GL_RGBA, GL_UNSIGNED_BYTE, state->tex_particle_data);
+        check();
+
+        // Upload vertex data to a buffer
+        glBindBuffer(GL_ARRAY_BUFFER, state->particleBuffer);
+
+        // Create Vertex Buffer Object (VBO)
+	glBufferData(                                       // Fill bound buffer with particles
+		     GL_ARRAY_BUFFER,                       // Buffer target
+		     sizeof(state->particles),             // Buffer data size
+		     state->particles,                     // Buffer data pointer
+		     GL_DYNAMIC_DRAW);                       // Usage - Data never changes; used for drawing
+        check();
+}
+
+void solarwinds_deinit_shaders(CUBE_STATE_T *state)
+{
+  glDeleteProgram(state->program_particle);
+  check();
+
+  glDeleteBuffers(1, &state->particleBuffer);
+  check();
+
+  glDeleteTextures(1, &state->tex_particle);
+  check();
+
+  free(state->tex_particle_data);
+}
+
+static void draw_particle_to_texture(CUBE_STATE_T *state)
+{
+        glClearColor ( 0.0, 0.0, 0.0, 1.0 );
+        glClear(GL_COLOR_BUFFER_BIT);
+
+        glBindTexture(GL_TEXTURE_2D, state->tex_particle);
+	glEnable(GL_BLEND);
+	glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
+
+        glBindBuffer(GL_ARRAY_BUFFER, state->particleBuffer);
+
+        int remaining = state->numParticles - state->whichParticle;
+	// Create Vertex Buffer Object (VBO)
+	glBufferSubData(                                       // Fill bound buffer with particles
+		     GL_ARRAY_BUFFER,                       // Buffer target
+		     0,
+                     remaining * sizeof(state->particles[0]),             // Buffer data size
+		     state->particles + state->whichParticle                     // Buffer data pointer
+		     );                       // Usage - Data never changes; used for drawing
+        check();
+	// Create Vertex Buffer Object (VBO)
+	glBufferSubData(                                       // Fill bound buffer with particles
+		     GL_ARRAY_BUFFER,                       // Buffer target
+		     remaining * sizeof(state->particles[0]),
+                     state->whichParticle * sizeof(state->particles[0]),             // Buffer data size
+		     state->particles                     // Buffer data pointer
+		     );                       // Usage - Data never changes; used for drawing
+        check();
+
+        glUseProgram ( state->program_particle );
+        check();
+        // uniforms
+	const GLfloat projectionMatrix[] = {
+		    1.0f, 0.0f, 0.0f, 0.0f,
+		    0.0f, 1.0f, 0.0f, 0.0f,
+		    0.0f, 0.0f, 1.0f, 0.0f,
+		    0.0f, 0.0f, 0.0f, 1.0f
+	};
+        glUniformMatrix4fv(state->uProjectionMatrix, 1, 0, projectionMatrix);
+        glUniform1i(state->uTexture, 0); // first currently bound texture "GL_TEXTURE0"
+        check();
+
+	// Attributes
+	glEnableVertexAttribArray(state->aPos);
+	glVertexAttribPointer(state->aPos,                    // Set pointer
+                      4,                                        // One component per particle
+                      GL_FLOAT,                                 // Data is floating point type
+                      GL_FALSE,                                 // No fixed point scaling
+                      sizeof(Particle),                         // No gaps in data
+                      (void*)(offsetof(Particle, pos)));      // Start from "theta" offset within bound buffer
+
+	glEnableVertexAttribArray(state->aShade);
+	glVertexAttribPointer(state->aShade,                // Set pointer
+                      4,                                        // Three components per particle
+                      GL_FLOAT,                                 // Data is floating point type
+                      GL_FALSE,                                 // No fixed point scaling
+                      sizeof(Particle),                         // No gaps in data
+                      (void*)(offsetof(Particle, shade)));      // Start from "shade" offset within bound buffer
+
+	// Draw particles
+	glDrawArrays(GL_POINTS, 0, state->numParticles);
+
+	glDisable(GL_BLEND);
+        glBindTexture(GL_TEXTURE_2D, 0);
+
+	glDisableVertexAttribArray(state->aPos);
+        glDisableVertexAttribArray(state->aShade);
+
+        glBindBuffer(GL_ARRAY_BUFFER, 0);
+        check();
+}
+
+//==============================================================================
+
+static float randrange(float min, float max)
+{
+   return min + rand() * ((max-min) / RAND_MAX);
+}
+
+void solarwinds_init(CUBE_STATE_T *state)
+{
+  int i;
+  state->numWinds = 1;
+  state->numEmitters = min(30, NUMEMITTERS);
+  state->numParticles = min(2000, NUM_PARTICLES);
+  state->size = 50.0f;
+  state->windSpeed = 20.0f;
+  state->emitterSpeed = 15.0f;
+  state->particleSpeed = 10.0f;
+  state->blur = 40.0f;
+  state->eVel = state->emitterSpeed * 0.01f;
+
+  for (i = 0; i < NUMCONSTS; ++i) {
+    state->_ct[i] = randrange(0.0f, M_PI * 2.0f);
+    state->_cv[i] = randrange(0.0f, 0.00005f * state->windSpeed * state->windSpeed) + 
+                    0.00001f * state->windSpeed * state->windSpeed;
+  }
+    for (i=0; i<NUMEMITTERS; i++)
+    {
+      state->emitter[i].x = randrange(0.0f, 60.0f) - 30.0f;
+      state->emitter[i].y = randrange(0.0f, 60.0f) - 30.0f,
+      state->emitter[i].z = randrange(0.0f, 30.0f) - 15.0f;
+    }
+}
+
+void solarwinds_update(CUBE_STATE_T *state)
+{
+  int i;
+	// update constants
+	for (i = 0; i < NUMCONSTS; ++i) {
+		state->_ct[i] += state->_cv[i];
+		if (state->_ct[i] > M_PI * 2.0f)
+		  state->_ct[i] -= M_PI * 2.0f;
+		state->_c[i] = cosf(state->_ct[i]);
+	}
+
+	// calculate emissions
+	for (i = 0; i < state->numEmitters; ++i) {
+		// emitter moves toward viewer
+		state->emitter[i].z += state->eVel;
+		if (state->emitter[i].z > 15.0f) {	// reset emitter
+		  state->emitter[i].x = randrange(0.0f, 60.0f) - 30.0f;
+		  state->emitter[i].y = randrange(0.0f, 60.0f) - 30.0f,
+		  state->emitter[i].z = -15.0f;
+		}
+                Particle *p = state->particles + state->whichParticle;
+                p->pos[0] = state->emitter[i].x;
+		p->pos[1] = state->emitter[i].y;
+		p->pos[2] = state->emitter[i].z;
+		p->pos[3] = 1.0;
+		p->shade[3] = 1.0f;
+
+		++state->whichParticle;
+		if (state->whichParticle >= state->numParticles)
+		  state->whichParticle = 0;
+	}
+
+	// calculate particle positions and colors
+	// first modify constants that affect colors
+	state->_c[6] *= 9.0f / state->particleSpeed;
+	state->_c[7] *= 9.0f / state->particleSpeed;
+	state->_c[8] *= 9.0f / state->particleSpeed;
+	// then update each particle
+	float pVel = state->particleSpeed * 0.01f;
+	for (i = 0; i < state->numParticles; ++i) {
+                Particle *p = state->particles + i;
+		// store old positions
+		float x = p->pos[0];
+		float y = p->pos[1];
+		float z = p->pos[2];
+		// make new positions
+		p->pos[0] = x + (state->_c[0] * y + state->_c[1] * z) * pVel;
+		p->pos[1] = y + (state->_c[2] * z + state->_c[3] * x) * pVel;
+		p->pos[2] = z + (state->_c[4] * x + state->_c[5] * y) * pVel;
+		// calculate colors
+		p->shade[0] = abs((p->pos[0] - x) * state->_c[6]);
+		p->shade[1] = abs((p->pos[1] - y) * state->_c[7]);
+		p->shade[2] = abs((p->pos[2] - z) * state->_c[8]);
+	}
+}
+
+void solarwinds_render(CUBE_STATE_T *state)
+{ 
+   draw_particle_to_texture(state);
+}
+
+#ifdef STANDALONE
+
+typedef struct
+{
+   uint32_t screen_width;
+   uint32_t screen_height;
+// OpenGL|ES objects
+   EGLDisplay display;
+   EGLSurface surface;
+   EGLContext context;
+} EGL_STATE_T;
+
+uint64_t GetTimeStamp() {
+    struct timeval tv;
+    gettimeofday(&tv,NULL);
+    return tv.tv_sec*(uint64_t)1000000+tv.tv_usec;
+}
+
+/***********************************************************
+ * Name: init_ogl
+ *
+ * Arguments:
+ *       CUBE_STATE_T *state - holds OGLES model info
+ *
+ * Description: Sets the display, OpenGL|ES context and screen stuff
+ *
+ * Returns: void
+ *
+ ***********************************************************/
+static void init_ogl(EGL_STATE_T *state)
+{
+   int32_t success = 0;
+   EGLBoolean result;
+   EGLint num_config;
+
+   static EGL_DISPMANX_WINDOW_T nativewindow;
+
+   DISPMANX_ELEMENT_HANDLE_T dispman_element;
+   DISPMANX_DISPLAY_HANDLE_T dispman_display;
+   DISPMANX_UPDATE_HANDLE_T dispman_update;
+   VC_RECT_T dst_rect;
+   VC_RECT_T src_rect;
+
+   static const EGLint attribute_list[] =
+   {
+      EGL_RED_SIZE, 8,
+      EGL_GREEN_SIZE, 8,
+      EGL_BLUE_SIZE, 8,
+      EGL_ALPHA_SIZE, 8,
+      EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
+      EGL_NONE
+   };
+   
+   static const EGLint context_attributes[] = 
+   {
+      EGL_CONTEXT_CLIENT_VERSION, 2,
+      EGL_NONE
+   };
+   EGLConfig config;
+
+   // get an EGL display connection
+   state->display = eglGetDisplay(EGL_DEFAULT_DISPLAY);
+   assert(state->display!=EGL_NO_DISPLAY);
+   check();
+
+   // initialize the EGL display connection
+   result = eglInitialize(state->display, NULL, NULL);
+   assert(EGL_FALSE != result);
+   check();
+
+   // get an appropriate EGL frame buffer configuration
+   result = eglChooseConfig(state->display, attribute_list, &config, 1, &num_config);
+   assert(EGL_FALSE != result);
+   check();
+
+   // get an appropriate EGL frame buffer configuration
+   result = eglBindAPI(EGL_OPENGL_ES_API);
+   assert(EGL_FALSE != result);
+   check();
+
+   // create an EGL rendering context
+   state->context = eglCreateContext(state->display, config, EGL_NO_CONTEXT, context_attributes);
+   assert(state->context!=EGL_NO_CONTEXT);
+   check();
+
+   // create an EGL window surface
+   success = graphics_get_display_size(0 /* LCD */, &state->screen_width, &state->screen_height);
+   assert( success >= 0 );
+
+   dst_rect.x = 0;
+   dst_rect.y = 0;
+   dst_rect.width = state->screen_width;
+   dst_rect.height = state->screen_height;
+      
+   src_rect.x = 0;
+   src_rect.y = 0;
+   src_rect.width = state->screen_width << 16;
+   src_rect.height = state->screen_height << 16;        
+
+   dispman_display = vc_dispmanx_display_open( 0 /* LCD */);
+   dispman_update = vc_dispmanx_update_start( 0 );
+         
+   dispman_element = vc_dispmanx_element_add ( dispman_update, dispman_display,
+      0/*layer*/, &dst_rect, 0/*src*/,
+      &src_rect, DISPMANX_PROTECTION_NONE, 0 /*alpha*/, 0/*clamp*/, 0/*transform*/);
+      
+   nativewindow.element = dispman_element;
+   nativewindow.width = state->screen_width;
+   nativewindow.height = state->screen_height;
+   vc_dispmanx_update_submit_sync( dispman_update );
+      
+   check();
+
+   state->surface = eglCreateWindowSurface( state->display, config, &nativewindow, NULL );
+   assert(state->surface != EGL_NO_SURFACE);
+   check();
+
+   // connect the context to the surface
+   result = eglMakeCurrent(state->display, state->surface, state->surface, state->context);
+   assert(EGL_FALSE != result);
+   check();
+}
+
+int main ()
+{
+   int terminate = 0;
+   CUBE_STATE_T _state, *state=&_state;
+   EGL_STATE_T _eglstate, *eglstate=&_eglstate;
+
+   // Clear application state
+   memset( state, 0, sizeof( *state ) );
+   memset( eglstate, 0, sizeof( *eglstate ) );
+   state->verbose = 1;
+   bcm_host_init();
+   // Start OGLES
+   init_ogl(eglstate);
+again:
+   solarwinds_init(state);
+   solarwinds_init_shaders(state);
+
+   int frames = 0;
+   uint64_t ts = GetTimeStamp();
+   while (!terminate)
+   {
+      solarwinds_update(state);
+      solarwinds_render(state);
+        //glFlush();
+        //glFinish();
+        check();
+        
+        eglSwapBuffers(eglstate->display, eglstate->surface);
+        check();
+
+    frames++;
+    uint64_t ts2 = GetTimeStamp();
+    if (ts2 - ts > 1e6)
+    {
+       printf("%d fps\n", frames);
+       ts += 1e6;
+       frames = 0;
+    }
+   }
+   solarwinds_deinit_shaders(state);
+   goto again;
+   return 0;
+}
+#endif
+
diff --git a/xbmc/screensavers/gles/solarwinds/solarwinds.h b/xbmc/screensavers/gles/solarwinds/solarwinds.h
new file mode 100644
index 0000000..1e9a761
--- /dev/null
+++ b/xbmc/screensavers/gles/solarwinds/solarwinds.h
@@ -0,0 +1,60 @@
+#pragma once
+
+#include "GLES2/gl2.h"
+#include "EGL/egl.h"
+#include "EGL/eglext.h"
+
+#define NUM_PARTICLES 2000
+#define NUMCONSTS 9
+#define NUMEMITTERS 30
+
+typedef struct Particle
+{
+    GLfloat pos[4];
+    GLfloat shade[4];
+} Particle;
+ 
+typedef struct Emitter
+{
+    GLfloat  x, y, z;
+} Emitter;
+
+typedef struct
+{
+   GLuint verbose;
+   GLuint mvshader;
+   GLuint mshader;
+   GLuint program_particle;
+   GLuint tex_particle;
+   GLuint particleBuffer;
+// particle attribs
+   GLuint aPos, aShade, uProjectionMatrix, uTexture;
+
+   Emitter emitter[NUMEMITTERS];
+   Particle particles[NUM_PARTICLES];
+   void *tex_particle_data;
+
+   float _c[NUMCONSTS];
+   float _ct[NUMCONSTS];
+   float _cv[NUMCONSTS];
+
+  unsigned int numWinds;
+  unsigned int numEmitters;
+  unsigned int numParticles;
+  unsigned int whichParticle;
+  float size;
+  float windSpeed;
+  float emitterSpeed;
+  float particleSpeed;
+  float blur;
+  float eVel;
+} CUBE_STATE_T;
+
+
+void solarwinds_init_shaders(CUBE_STATE_T *state);
+void solarwinds_init(CUBE_STATE_T *state);
+void solarwinds_update(CUBE_STATE_T *state);
+void solarwinds_render(CUBE_STATE_T *state);
+void solarwinds_deinit_shaders(CUBE_STATE_T *state);
+
+
diff --git a/xbmc/screensavers/gles/solarwinds/wrapper.cc b/xbmc/screensavers/gles/solarwinds/wrapper.cc
new file mode 100644
index 0000000..edad7c7
--- /dev/null
+++ b/xbmc/screensavers/gles/solarwinds/wrapper.cc
@@ -0,0 +1,96 @@
+#include <stdio.h>
+#include <assert.h>
+#include "Application.h"
+#include "../../addons/include/xbmc_scr_dll.h"
+
+extern "C" {
+
+#include "solarwinds.h"
+
+static CUBE_STATE_T _state, *state=&_state;
+
+ADDON_STATUS ADDON_Create(void* hdl, void* props)
+{
+  if (!props)
+    return ADDON_STATUS_UNKNOWN;
+
+  // Clear application state
+  memset( state, 0, sizeof( *state ) );
+  // Start OGLES
+  assert( g_application.IsCurrentThread() );
+  glGetError();
+
+  SCR_PROPS* scrprops = (SCR_PROPS*)props;
+  //state->width = scrprops->width;
+  //state->height = scrprops->height;
+  solarwinds_init(state);
+  solarwinds_init_shaders(state);
+
+  return ADDON_STATUS_OK;
+}
+
+void Start()
+{
+}
+
+void Render()
+{
+  solarwinds_update(state);
+  solarwinds_render(state);
+}
+
+void ADDON_Stop()
+{
+   solarwinds_deinit_shaders(state);
+}
+
+void ADDON_Destroy()
+{
+}
+
+ADDON_STATUS ADDON_GetStatus()
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+bool ADDON_HasSettings()
+{
+puts(__func__);
+  return false;
+}
+
+unsigned int ADDON_GetSettings(ADDON_StructSetting ***sSet)
+{
+puts(__func__);
+  return 0;
+}
+
+ADDON_STATUS ADDON_SetSetting(const char *settingName, const void *settingValue)
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+void ADDON_FreeSettings()
+{
+puts(__func__);
+}
+
+void ADDON_Announce(const char *flag, const char *sender, const char *message, const void *data)
+{
+puts(__func__);
+}
+
+void GetInfo(SCR_INFO *info)
+{
+puts(__func__);
+}
+
+void Remove()
+{
+puts(__func__);
+}
+
+}
+
diff --git a/xbmc/screensavers/gles/spiral/Makefile.in b/xbmc/screensavers/gles/spiral/Makefile.in
new file mode 100644
index 0000000..5f57c7d
--- /dev/null
+++ b/xbmc/screensavers/gles/spiral/Makefile.in
@@ -0,0 +1,36 @@
+ARCH=@ARCH@
+CXXFLAGS=-fPIC
+ifeq (@USE_ANDROID@,1)
+SLIB = @abs_top_srcdir@/system/libspiral.so
+else
+SLIB = @abs_top_srcdir@/addons/screensaver.gles.spiral/Spiral.xbs
+endif
+OBJS = wrapper.o 
+DEFINES += -DSCREENSAVER=spiral
+
+ifeq (@USE_OPENGLES@,1)
+  DEFINES += -DHAS_GLES=2
+  INCLUDES+= -I@abs_top_srcdir@/xbmc/screensavers/gles
+  OBJS += @abs_top_srcdir@/xbmc/screensavers/gles/gleshelpers.a
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGLES
+  else
+    LDFLAGS += -lGLESv2
+  endif
+else
+  DEFINES += -DHAS_GL
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGL
+  else
+    LDFLAGS += -lGL
+  endif
+endif
+
+$(SLIB): $(OBJS)
+ifeq ($(findstring osx,$(ARCH)), osx)
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -bundle -o $(SLIB) $(OBJS)
+else
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -shared -o $(SLIB) $(OBJS)
+endif
+
+include @abs_top_srcdir@/Makefile.include
diff --git a/xbmc/screensavers/gles/spiral/wrapper.cc b/xbmc/screensavers/gles/spiral/wrapper.cc
new file mode 100644
index 0000000..fd58b73
--- /dev/null
+++ b/xbmc/screensavers/gles/spiral/wrapper.cc
@@ -0,0 +1,102 @@
+#include <stdio.h>
+#include <assert.h>
+#include "Application.h"
+#include "../../addons/include/xbmc_scr_dll.h"
+
+extern "C" {
+
+#include "triangle2.h"
+
+#define PASTER(x,y) x ## _ ## y
+#define EVALUATOR(x,y) PASTER(x,y)
+#define NAME(fun) EVALUATOR(fun, SCREENSAVER)
+
+static CUBE_STATE_T _state, *state=&_state;
+
+ADDON_STATUS ADDON_Create(void* hdl, void* props)
+{
+  if (!props)
+    return ADDON_STATUS_UNKNOWN;
+
+  // Clear application state
+  memset( state, 0, sizeof( *state ) );
+  // Start OGLES
+  assert( g_application.IsCurrentThread() );
+  glGetError();
+
+  SCR_PROPS* scrprops = (SCR_PROPS*)props;
+  state->width = scrprops->width;
+  state->height = scrprops->height;
+  setup_screensaver_default(state);
+  NAME(setup_screensaver)(state);
+  screensaver_init(state);
+  screensaver_init_shaders(state);
+
+  return ADDON_STATUS_OK;
+}
+
+void Start()
+{
+}
+
+void Render()
+{
+  screensaver_update(state);
+  screensaver_render(state);
+}
+
+void ADDON_Stop()
+{
+   screensaver_deinit_shaders(state);
+}
+
+void ADDON_Destroy()
+{
+}
+
+ADDON_STATUS ADDON_GetStatus()
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+bool ADDON_HasSettings()
+{
+puts(__func__);
+  return false;
+}
+
+unsigned int ADDON_GetSettings(ADDON_StructSetting ***sSet)
+{
+puts(__func__);
+  return 0;
+}
+
+ADDON_STATUS ADDON_SetSetting(const char *settingName, const void *settingValue)
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+void ADDON_FreeSettings()
+{
+puts(__func__);
+}
+
+void ADDON_Announce(const char *flag, const char *sender, const char *message, const void *data)
+{
+puts(__func__);
+}
+
+void GetInfo(SCR_INFO *info)
+{
+puts(__func__);
+}
+
+void Remove()
+{
+puts(__func__);
+}
+
+}
+
diff --git a/xbmc/screensavers/gles/stellar/Makefile.in b/xbmc/screensavers/gles/stellar/Makefile.in
new file mode 100644
index 0000000..ef8f5b1
--- /dev/null
+++ b/xbmc/screensavers/gles/stellar/Makefile.in
@@ -0,0 +1,36 @@
+ARCH=@ARCH@
+CXXFLAGS=-fPIC
+ifeq (@USE_ANDROID@,1)
+SLIB = @abs_top_srcdir@/system/libstellar.so
+else
+SLIB = @abs_top_srcdir@/addons/screensaver.gles.stellar/Stellar.xbs
+endif
+OBJS = wrapper.o 
+DEFINES += -DSCREENSAVER=stellar
+
+ifeq (@USE_OPENGLES@,1)
+  DEFINES += -DHAS_GLES=2
+  INCLUDES+= -I@abs_top_srcdir@/xbmc/screensavers/gles
+  OBJS += @abs_top_srcdir@/xbmc/screensavers/gles/gleshelpers.a
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGLES
+  else
+    LDFLAGS += -lGLESv2
+  endif
+else
+  DEFINES += -DHAS_GL
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGL
+  else
+    LDFLAGS += -lGL
+  endif
+endif
+
+$(SLIB): $(OBJS)
+ifeq ($(findstring osx,$(ARCH)), osx)
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -bundle -o $(SLIB) $(OBJS)
+else
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -shared -o $(SLIB) $(OBJS)
+endif
+
+include @abs_top_srcdir@/Makefile.include
diff --git a/xbmc/screensavers/gles/stellar/wrapper.cc b/xbmc/screensavers/gles/stellar/wrapper.cc
new file mode 100644
index 0000000..fd58b73
--- /dev/null
+++ b/xbmc/screensavers/gles/stellar/wrapper.cc
@@ -0,0 +1,102 @@
+#include <stdio.h>
+#include <assert.h>
+#include "Application.h"
+#include "../../addons/include/xbmc_scr_dll.h"
+
+extern "C" {
+
+#include "triangle2.h"
+
+#define PASTER(x,y) x ## _ ## y
+#define EVALUATOR(x,y) PASTER(x,y)
+#define NAME(fun) EVALUATOR(fun, SCREENSAVER)
+
+static CUBE_STATE_T _state, *state=&_state;
+
+ADDON_STATUS ADDON_Create(void* hdl, void* props)
+{
+  if (!props)
+    return ADDON_STATUS_UNKNOWN;
+
+  // Clear application state
+  memset( state, 0, sizeof( *state ) );
+  // Start OGLES
+  assert( g_application.IsCurrentThread() );
+  glGetError();
+
+  SCR_PROPS* scrprops = (SCR_PROPS*)props;
+  state->width = scrprops->width;
+  state->height = scrprops->height;
+  setup_screensaver_default(state);
+  NAME(setup_screensaver)(state);
+  screensaver_init(state);
+  screensaver_init_shaders(state);
+
+  return ADDON_STATUS_OK;
+}
+
+void Start()
+{
+}
+
+void Render()
+{
+  screensaver_update(state);
+  screensaver_render(state);
+}
+
+void ADDON_Stop()
+{
+   screensaver_deinit_shaders(state);
+}
+
+void ADDON_Destroy()
+{
+}
+
+ADDON_STATUS ADDON_GetStatus()
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+bool ADDON_HasSettings()
+{
+puts(__func__);
+  return false;
+}
+
+unsigned int ADDON_GetSettings(ADDON_StructSetting ***sSet)
+{
+puts(__func__);
+  return 0;
+}
+
+ADDON_STATUS ADDON_SetSetting(const char *settingName, const void *settingValue)
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+void ADDON_FreeSettings()
+{
+puts(__func__);
+}
+
+void ADDON_Announce(const char *flag, const char *sender, const char *message, const void *data)
+{
+puts(__func__);
+}
+
+void GetInfo(SCR_INFO *info)
+{
+puts(__func__);
+}
+
+void Remove()
+{
+puts(__func__);
+}
+
+}
+
diff --git a/xbmc/screensavers/gles/triangle2.c b/xbmc/screensavers/gles/triangle2.c
new file mode 100644
index 0000000..16c918f
--- /dev/null
+++ b/xbmc/screensavers/gles/triangle2.c
@@ -0,0 +1,990 @@
+/*
+Copyright (c) 2012, Broadcom Europe Ltd
+All rights reserved.
+
+Redistribution and use in source and binary forms, with or without
+modification, are permitted provided that the following conditions are met:
+    * Redistributions of source code must retain the above copyright
+      notice, this list of conditions and the following disclaimer.
+    * Redistributions in binary form must reproduce the above copyright
+      notice, this list of conditions and the following disclaimer in the
+      documentation and/or other materials provided with the distribution.
+    * Neither the name of the copyright holder nor the
+      names of its contributors may be used to endorse or promote products
+      derived from this software without specific prior written permission.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY
+DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+*/
+
+// OpenGL|ES 2 demo using shader to compute plasma/render sets
+// Thanks to Peter de Rivas for original Python code
+
+#include <stdio.h>
+#include <fcntl.h>
+#include <stdlib.h>
+#include <string.h>
+#include <math.h>
+#include <assert.h>
+#include <unistd.h>
+#include <sys/time.h>
+
+#include "bcm_host.h"
+
+#include "triangle2.h"
+
+#define min(a,b) ((a)<(b)?(a):(b)) 
+#define max(a,b) ((a)<(b)?(b):(a)) 
+#define TO_STRING(...) #__VA_ARGS__
+
+#define check() assert(glGetError() == 0)
+
+static void showlog(GLint shader)
+{
+   // Prints the compile log for a shader
+   char log[1024];
+   glGetShaderInfoLog(shader, sizeof log, NULL, log);
+   printf("%d:shader:\n%s\n", shader, log);
+}
+
+static void showprogramlog(GLint shader)
+{
+   // Prints the information log for a program object
+   char log[1024];
+   glGetProgramInfoLog(shader, sizeof log, NULL, log);
+   printf("%d:program:\n%s\n", shader, log);
+}
+
+static void *create_particle_tex(int width, int height)
+{
+  int i, j;
+  unsigned char *q = malloc(width * height * 4);
+  if (!q)
+    return NULL;
+  unsigned char *p = q;
+  for (j=0; j<height; j++) {
+    for (i=0; i<width; i++) {
+      float x = ((float)i + 0.5f) / (float)width  - 0.5f;
+      float y = ((float)j + 0.5f) / (float)height - 0.5f;
+      float d = 1.0f-2.0f*sqrtf(x*x + y*y);
+      unsigned v = 255.0f * max(min(d, 1.0f), 0.0f);
+      *p++ = 255;
+      *p++ = 255;
+      *p++ = 255;
+      *p++ = v;
+    }
+  }
+  return q;
+}
+
+static void *create_checkerboard_tex(int width, int height)
+{
+  int i, j;
+  unsigned char *q = malloc(width * height * 4);
+  if (!q)
+    return NULL;
+  unsigned char *p = q;
+  for (j=0; j<height; j++) {
+    for (i=0; i<width; i++) {
+      int b = (i+j) & 1;
+      *p++ = b ? 255:0;
+      *p++ = b ? 255:0;
+      *p++ = b ? 255:0;
+      *p++ = b ? 255:0;
+    }
+  }
+  return q;
+}
+
+static void *create_border_tex(int width, int height)
+{
+  int i, j;
+  unsigned char *q = malloc(width * height * 4);
+  if (!q)
+    return NULL;
+  unsigned char *p = q;
+  for (j=0; j<height; j++) {
+    for (i=0; i<width; i++) {
+      int b = i == 16 || i == 20 || i == width-1-16 || j == 16 || j == height-1-16;
+      *p++ = b ? 255:0;
+      *p++ = b ? 255:0;
+      *p++ = b ? 255:0;
+      *p++ = b ? 255:0;
+    }
+  }
+  return q;
+}
+
+static void *create_noise_tex(int width, int height)
+{
+  int i, j;
+  unsigned char *q = malloc(width * height * 4);
+  if (!q)
+    return NULL;
+  unsigned char *p = q;
+  for (j=0; j<height; j++) {
+    for (i=0; i<width; i++) {
+      *p++ = (rand() >> 16) & 0xff;
+      *p++ = (rand() >> 16) & 0xff;
+      *p++ = (rand() >> 16) & 0xff;
+      *p++ = 255;
+    }
+  }
+  return q;
+}
+
+static void *create_framebuffer_tex(int width, int height)
+{
+#ifdef STANDALONE
+  return create_border_tex(width, height);
+#else
+  unsigned char *q = malloc(width * height * 4);
+  if (!q)
+    return NULL;
+
+  glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, q);
+  check();
+  return q;
+#endif
+}
+
+void screensaver_init_shaders(CUBE_STATE_T *state)
+{
+   static const GLfloat vertex_data[] = {
+        -1.0,1.0,1.0,1.0,
+        1.0,1.0,1.0,1.0,
+        1.0,-1.0,1.0,1.0,
+        -1.0,-1.0,1.0,1.0,
+   };
+        // effect
+        state->effect_vshader = glCreateShader(GL_VERTEX_SHADER);
+        glShaderSource(state->effect_vshader, 1, &state->effect_vshader_source, 0);
+        glCompileShader(state->effect_vshader);
+        check();
+
+        if (state->verbose)
+            showlog(state->effect_vshader);
+            
+        state->effect_fshader = glCreateShader(GL_FRAGMENT_SHADER);
+        glShaderSource(state->effect_fshader, 1, &state->effect_fshader_source, 0);
+        glCompileShader(state->effect_fshader);
+        check();
+
+        if (state->verbose)
+            showlog(state->effect_fshader);
+
+        state->effect_program = glCreateProgram();
+        glAttachShader(state->effect_program, state->effect_vshader);
+        glAttachShader(state->effect_program, state->effect_fshader);
+        glLinkProgram(state->effect_program);
+        glDetachShader(state->effect_program, state->effect_vshader);
+        glDetachShader(state->effect_program, state->effect_fshader);
+        glDeleteShader(state->effect_vshader);
+        glDeleteShader(state->effect_fshader);
+        check();
+
+        if (state->verbose)
+            showprogramlog(state->effect_program);
+
+        state->attr_vertex   = glGetAttribLocation(state->effect_program,  "vertex");
+        state->uResolution   = glGetUniformLocation(state->effect_program, "iResolution");
+        state->uMouse        = glGetUniformLocation(state->effect_program, "iMouse");
+        state->uTime         = glGetUniformLocation(state->effect_program, "iGlobalTime");
+        state->uChannel0     = glGetUniformLocation(state->effect_program, "iChannel0");
+        state->uScale        = glGetUniformLocation(state->effect_program, "uScale");
+        check();
+
+        // render
+        state->render_vshader = glCreateShader(GL_VERTEX_SHADER);
+        check();
+        glShaderSource(state->render_vshader, 1, &state->render_vshader_source, 0);
+        check();
+        glCompileShader(state->render_vshader);
+        check();
+
+        if (state->verbose)
+            showlog(state->render_vshader);
+            
+        state->render_fshader = glCreateShader(GL_FRAGMENT_SHADER);
+        glShaderSource(state->render_fshader, 1, &state->render_fshader_source, 0);
+        glCompileShader(state->render_fshader);
+        check();
+
+        if (state->verbose)
+            showlog(state->render_fshader);
+
+        state->render_program = glCreateProgram();
+        glAttachShader(state->render_program, state->render_vshader);
+        glAttachShader(state->render_program, state->render_fshader);
+        glLinkProgram(state->render_program);
+        glDetachShader(state->render_program, state->render_vshader);
+        glDetachShader(state->render_program, state->render_fshader);
+        glDeleteShader(state->render_vshader);
+        glDeleteShader(state->render_fshader);
+        check();
+
+        if (state->verbose)
+            showprogramlog(state->render_program);
+
+	state->uTexture      = glGetUniformLocation(state->render_program, "uTexture");
+        check();
+           
+        if (state->fbwidth && state->fbheight)
+        {
+          // Prepare a texture to render to
+          glGenTextures(1, &state->framebuffer_texture);
+          check();
+          glActiveTexture(GL_TEXTURE0);
+          glBindTexture(GL_TEXTURE_2D, state->framebuffer_texture);
+          check();
+          glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, state->fbwidth, state->fbheight, 0, GL_RGB, GL_UNSIGNED_BYTE, 0);
+          check();
+          glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
+          glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
+          check();
+          // Prepare a framebuffer for rendering
+          glGenFramebuffers(1, &state->effect_fb);
+          check();
+          glBindFramebuffer(GL_FRAMEBUFFER, state->effect_fb);
+          check();
+          glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, state->framebuffer_texture, 0);
+          check();
+          glBindFramebuffer(GL_FRAMEBUFFER, 0);
+          check();
+        }
+        // Prepare a texture image
+        if (state->effect_texture_data)
+        {
+          glGenTextures(1, &state->effect_texture);
+          check();
+          glActiveTexture(GL_TEXTURE0);
+          glBindTexture(GL_TEXTURE_2D, state->effect_texture);
+          check();
+          glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
+          glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
+          glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, state->texwidth, state->texheight, 0, GL_RGBA, GL_UNSIGNED_BYTE, state->effect_texture_data);
+          check();
+        }
+        // Upload vertex data to a buffer
+        glGenBuffers(1, &state->vertex_buffer);
+        glBindBuffer(GL_ARRAY_BUFFER, state->vertex_buffer);
+        glBufferData(GL_ARRAY_BUFFER, sizeof(vertex_data), vertex_data, GL_STATIC_DRAW);
+        check();
+}
+
+void screensaver_deinit_shaders(CUBE_STATE_T *state)
+{
+  glDeleteProgram(state->render_program);
+  glDeleteProgram(state->effect_program);
+  check();
+
+  glDeleteBuffers(1, &state->vertex_buffer);
+  if (state->framebuffer_texture)
+  {
+    glDeleteTextures(1, &state->framebuffer_texture);
+    check();
+  }
+  if (state->effect_fb)
+  {
+    glDeleteFramebuffers(1, &state->effect_fb);
+    check();
+  }
+  if (state->effect_texture)
+  {
+    glDeleteTextures(1, &state->effect_texture);
+    check();
+  }
+  if (state->effect_texture_data)
+    free(state->effect_texture_data);
+}
+
+static void draw_effect_to_texture(CUBE_STATE_T *state)
+{
+        // Draw the effect to a texture
+        if (state->effect_fb)
+          glBindFramebuffer(GL_FRAMEBUFFER, state->effect_fb);
+        else
+          glBindFramebuffer(GL_FRAMEBUFFER, 0);
+        check();
+
+	glBindBuffer(GL_ARRAY_BUFFER, state->vertex_buffer);
+        check();
+        glUseProgram( state->effect_program );
+        check();
+        if (state->effect_texture)
+        {
+          glActiveTexture(GL_TEXTURE0);
+          glBindTexture(GL_TEXTURE_2D, state->effect_texture);
+          check();
+          //glEnable(GL_BLEND);
+          //glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
+        }
+        glUniform3f(state->uResolution, state->width, state->height, 1.0f);
+        glUniform2f(state->uMouse, state->mousex, state->mousey);
+        glUniform1f(state->uTime, state->time);
+        glUniform1i(state->uChannel0, 0); // first currently bound texture "GL_TEXTURE0"
+        if (state->effect_fb)
+          glUniform2f(state->uScale, (GLfloat)state->width/state->fbwidth, (GLfloat)state->height/state->fbheight);
+        else
+          glUniform2f(state->uScale, 1.0, 1.0);
+        check();
+
+        glVertexAttribPointer(state->attr_vertex, 4, GL_FLOAT, 0, 16, 0);
+        glEnableVertexAttribArray(state->attr_vertex);
+
+        glDrawArrays( GL_TRIANGLE_FAN, 0, 4 );
+        check();
+
+	glDisableVertexAttribArray(state->attr_vertex);
+        glBindTexture(GL_TEXTURE_2D, 0);
+        glBindBuffer(GL_ARRAY_BUFFER, 0);
+        check();
+}
+
+static void draw_triangles(CUBE_STATE_T *state)
+{
+        // already on framebuffer
+        if (!state->framebuffer_texture)
+          return;
+        // Now render to the main frame buffer
+        glBindFramebuffer(GL_FRAMEBUFFER, 0);
+        check();
+
+        glBindBuffer(GL_ARRAY_BUFFER, state->vertex_buffer);
+        check();
+        glUseProgram ( state->render_program );
+        check();
+        glActiveTexture(GL_TEXTURE0);
+        glBindTexture(GL_TEXTURE_2D, state->framebuffer_texture);
+        check();
+        glUniform1i(state->uTexture, 0); // first currently bound texture "GL_TEXTURE0"
+        check();
+
+        glVertexAttribPointer(state->attr_vertex, 4, GL_FLOAT, 0, 16, 0);
+        glEnableVertexAttribArray(state->attr_vertex);
+        check();
+
+        glDrawArrays( GL_TRIANGLE_FAN, 0, 4 );
+        check();
+
+	glDisableVertexAttribArray(state->attr_vertex);
+        glBindTexture(GL_TEXTURE_2D, 0);
+        glBindBuffer(GL_ARRAY_BUFFER, 0);
+        check();
+}
+
+//==============================================================================
+
+static float randrange(float min, float max)
+{
+   return min + rand() * ((max-min) / RAND_MAX);
+}
+
+void screensaver_init(CUBE_STATE_T *state)
+{
+  int i;
+  for (i = 0; i < NUMCONSTS; ++i) {
+    state->_ct[i] = randrange(0.0f, M_PI * 2.0f);
+    state->_cv[i] = randrange(0.0f, 0.00005f) + 
+                    0.00001f;
+  }
+}
+
+uint64_t GetTimeStamp() {
+    struct timeval tv;
+    gettimeofday(&tv,NULL);
+    return tv.tv_sec*(uint64_t)1000000+tv.tv_usec;
+}
+
+void screensaver_update(CUBE_STATE_T *state)
+{
+  int i;
+	// update constants
+	for (i = 0; i < NUMCONSTS; ++i) {
+		state->_ct[i] += state->_cv[i];
+		if (state->_ct[i] > M_PI * 2.0f)
+		  state->_ct[i] -= M_PI * 2.0f;
+		state->_c[i] = cosf(state->_ct[i]);
+	}
+  uint64_t t = GetTimeStamp();
+  if (state->last_time)
+     state->time += (t-state->last_time) * 1e-6;
+  state->last_time = t;
+  //if (state->time > 12.0f + M_PI)
+  //  state->time -= 12.0f * M_PI;
+}
+
+void screensaver_render(CUBE_STATE_T *state)
+{ 
+  draw_effect_to_texture(state);
+  draw_triangles(state);
+}
+
+void setup_screensaver_default(CUBE_STATE_T *state)
+{
+  state->effect_vshader_source = TO_STRING(
+         attribute vec4 vertex;
+         varying vec2 vTextureCoord;
+         uniform vec2 uScale;
+         void main(void)
+         {
+            gl_Position = vertex;
+            vTextureCoord = vertex.xy*0.5+0.5;
+            vTextureCoord.x = vTextureCoord.x * uScale.x;
+            vTextureCoord.y = vTextureCoord.y * uScale.y;
+         }
+  );
+  state->effect_fshader_source = TO_STRING(
+	varying vec2 vTextureCoord;
+	uniform float iGlobalTime;
+	uniform vec3 iResolution;
+	uniform vec2 iMouse;
+	uniform sampler2D iChannel0;
+  );
+  state->render_vshader_source = TO_STRING(
+         attribute vec4 vertex;
+         varying vec2 vTextureCoord;
+         void main(void)
+         {
+            gl_Position = vertex;
+            vTextureCoord = vertex.xy*0.5+0.5;
+         }
+  );
+  state->render_fshader_source = TO_STRING(
+         varying vec2 vTextureCoord;
+         uniform sampler2D uTexture;
+         void main(void)
+         {
+            gl_FragColor = texture2D(uTexture, vTextureCoord);
+            //gl_FragColor = vec4(vTextureCoord.x, vTextureCoord.y, 0.0, 1.0);
+         }
+  );
+}
+
+void setup_screensaver_plasma(CUBE_STATE_T *state)
+{
+  state->fbwidth = 960; state->fbheight = 540;
+  state->effect_fshader_source = TO_STRING(
+	precision lowp float;
+	varying vec2 vTextureCoord;
+	uniform highp float iGlobalTime;
+	uniform vec3 iResolution;
+	uniform vec2 iMouse;
+	uniform sampler2D iChannel0;
+
+	float     u_time=iGlobalTime*0.2;
+        vec2      u_k = vec2(32.0, 32.0);
+        precision mediump float;
+        const float PI=3.1415926535897932384626433832795;
+        void main()
+        {
+           float v = 0.0;
+           vec2 c = vTextureCoord * u_k - u_k/2.0;
+           v += sin((c.x+u_time));
+           v += sin((c.y+u_time)/2.0);
+           v += sin((c.x+c.y+u_time)/2.0);
+           c += u_k/2.0 * vec2(sin(u_time/3.0), cos(u_time/2.0));
+           v += sin(sqrt(c.x*c.x+c.y*c.y+1.0)+u_time);
+           v = v/2.0;
+           vec3 col = vec3(1.0, sin(PI*v), cos(PI*v));
+           gl_FragColor = vec4(col*0.5 + 0.5, 1.0);
+       }
+  );
+}
+
+
+void setup_screensaver_plasma2(CUBE_STATE_T *state)
+{
+  state->fbwidth = 640; state->fbheight = 360;
+  state->effect_fshader_source = TO_STRING(
+	precision lowp float;
+	varying vec2 vTextureCoord;
+	uniform highp float iGlobalTime;
+	uniform vec3 iResolution;
+	uniform vec2 iMouse;
+	uniform sampler2D iChannel0;
+
+	float     u_time=iGlobalTime*0.2;
+        vec2      u_k = vec2(32.0, 32.0);
+        precision mediump float;
+        const float PI=3.1415926535897932384626433832795;
+
+		void mainImage( out vec4 fragColor, in vec2 fragCoord )
+		{
+			vec2 p = -1.0 + 2.0 * fragCoord.xy / iResolution.xy;
+	
+		// main code, *original shader by: 'Plasma' by Viktor Korsun (2011)
+		float x = p.x;
+		float y = p.y;
+		float mov0 = x+y+cos(sin(iGlobalTime)*2.0)*100.+sin(x/100.)*1000.;
+		float mov1 = y / 0.9 +  iGlobalTime;
+		float mov2 = x / 0.2;
+		float c1 = abs(sin(mov1+iGlobalTime)/2.+mov2/2.-mov1-mov2+iGlobalTime);
+		float c2 = abs(sin(c1+sin(mov0/1000.+iGlobalTime)+sin(y/40.+iGlobalTime)+sin((x+y)/100.)*3.));
+		float c3 = abs(sin(c2+cos(mov1+mov2+c2)+cos(mov2)+sin(x/1000.)));
+		fragColor = vec4(c1,c2,c3,1.0);
+	
+		}
+
+	void main () {
+	    vec4 fragColor;
+	    vec2 fragCoord = vTextureCoord * vec2(iResolution.x, iResolution.y);
+	    mainImage(fragColor, fragCoord);
+	    gl_FragColor = fragColor;
+	    gl_FragColor.a = 1.0;
+	}
+  );
+}
+
+
+void setup_screensaver_border(CUBE_STATE_T *state)
+{
+  state->texwidth = state->texheight = 256;
+  state->fbwidth = state->fbheight = 256;
+  state->effect_texture_data = create_border_tex(state->texwidth, state->texheight);
+  state->effect_fshader_source = TO_STRING(
+	varying vec2 vTextureCoord;
+	uniform float iGlobalTime;
+	uniform vec3 iResolution;
+	uniform vec2 iMouse;
+	uniform sampler2D iChannel0;
+
+         void main(void)
+         {
+            vec2 v = vTextureCoord;
+            vec4 texture = texture2D(iChannel0, v);
+            gl_FragColor = texture;
+         }
+  );
+}
+
+
+void setup_screensaver_spiral(CUBE_STATE_T *state)
+{
+  state->fbwidth = 800; state->fbheight = 450;
+  state->effect_fshader_source = TO_STRING(
+	precision lowp float;
+	varying vec2 vTextureCoord;
+	uniform highp float iGlobalTime;
+	uniform vec3 iResolution;
+	uniform vec2 iMouse;
+	uniform sampler2D iChannel0;
+
+	float     u_time=iGlobalTime*0.2;
+        vec2      u_k = vec2(32.0, 32.0);
+        precision mediump float;
+        const float PI=3.1415926535897932384626433832795;
+	const float TAU=6.283185307179586;
+
+	void mainImage( out vec4 fragColor, in vec2 fragCoord )
+	{
+		vec2 p = 2.0*(0.5 * iResolution.xy - fragCoord.xy) / iResolution.xx;
+		float angle = atan(p.y, p.x);
+		float turn = (angle + PI) / TAU;
+		float radius = sqrt(p.x*p.x + p.y*p.y);
+	
+		float rotation = 0.04 * TAU * iGlobalTime;
+		float turn_1 = turn + rotation;
+	
+		float n_sub = 2.0;
+	
+		float turn_sub = mod(float(n_sub) * turn_1, float(n_sub));
+	
+		float k_sine = 0.1 * sin(3.0 * iGlobalTime);
+		float sine = k_sine * sin(50.0 * (pow(radius, 0.1) - 0.4 * iGlobalTime));
+		float turn_sine = turn_sub + sine;
+
+		int n_colors = 5;
+		int i_turn = int(mod(float(n_colors) * turn_sine, float(n_colors)));
+	
+		int i_radius = int(1.5/pow(radius*0.5, 0.6) + 5.0 * iGlobalTime);
+		
+		int i_color = int(mod(float(i_turn + i_radius), float(n_colors)));
+	
+		vec3 color;
+		if(i_color == 0) { 
+			color = vec3(1.0, 1.0, 1.0);		  
+		} else if(i_color == 1) {
+			color = vec3(0.0, 0.0, 0.0);	
+		} else if(i_color == 2) {
+			color = vec3(1.0, 0.0, 0.0);	
+		} else if(i_color == 3) {
+			color = vec3(1.0, 0.5, 0.0);	
+		} else if(i_color == 4) {
+			color = vec3(1.0, 1.0, 0.0);	
+		}
+	
+		color *= pow(radius, 0.5)*1.0;
+	
+		fragColor = vec4(color, 1.0);
+	}
+
+	void main () {
+	    vec4 fragColor;
+	    vec2 fragCoord = vTextureCoord * vec2(iResolution.x, iResolution.y);
+	    mainImage(fragColor, fragCoord);
+	    gl_FragColor = fragColor;
+	    gl_FragColor.a = 1.0;
+	}
+  );
+}
+
+void setup_screensaver_ball(CUBE_STATE_T *state)
+{
+  state->texwidth = state->width;
+  state->texheight = state->height;
+  state->fbwidth = 960;
+  state->fbheight = 540;
+  state->effect_texture_data = create_framebuffer_tex(state->texwidth, state->texheight);
+
+  state->effect_fshader_source = TO_STRING(
+	precision lowp float;
+	varying vec2 vTextureCoord;
+	uniform highp float iGlobalTime;
+	uniform vec3 iResolution;
+	uniform vec2 iMouse;
+	uniform sampler2D iChannel0;
+
+	float     u_time=iGlobalTime*0.2;
+        vec2      u_k = vec2(32.0, 32.0);
+        precision mediump float;
+        const float PI=3.1415926535897932384626433832795;
+
+	// by maq/floppy
+	const float R=0.2;      // to play
+	void mainImage( out vec4 fragColor, in vec2 fragCoord )
+	{
+		vec3 col;
+		vec2 uv = -0.5+fragCoord.xy / iResolution.xy;
+		uv.y*=0.66; // hack to get ar nice on 16:10
+		vec2 p = uv;
+		float d=sqrt(dot(p,p));
+		float fac,fac2;
+		if(d<R)
+		{
+			uv.x=p.x/(R+sqrt(R-d));
+			uv.y=p.y/(R+sqrt(R-d));
+			fac = 0.005;
+			fac2 = 5.0;
+		}
+		else
+		{
+			uv.x=p.x/(d*d);
+			uv.y=p.y/(d*d);
+			fac = 0.02;
+			fac2 = 25.0;
+		}
+	
+		uv.x=uv.x-iMouse.x*fac+fac*500.0*sin(0.2*iGlobalTime);
+		uv.y=uv.y-iMouse.y*fac+fac*500.0*sin(0.4*iGlobalTime);
+		col = texture2D(iChannel0, uv/fac2).xyz;
+		col = col*exp(-3.0*(d-R)); // some lighting
+		col = col*(1.1-exp(-8.0*(abs(d-R)))); // and shading
+	
+	
+		fragColor = vec4(col,1.0);
+	}
+	void main () {
+	    vec4 fragColor;
+	    vec2 fragCoord = vTextureCoord * vec2(iResolution.x, iResolution.y);
+	    mainImage(fragColor, fragCoord);
+	    gl_FragColor = fragColor;
+	    gl_FragColor.a = 1.0;
+	}
+  );
+}
+
+
+void setup_screensaver_stellar(CUBE_STATE_T *state)
+{
+  state->texwidth = 256; state->texheight = 256;
+  state->effect_texture_data = create_noise_tex(state->texwidth, state->texheight);
+  state->fbwidth = 640; state->fbheight = 360;
+
+  state->effect_fshader_source = TO_STRING(
+	precision lowp float;
+	varying vec2 vTextureCoord;
+	uniform highp float iGlobalTime;
+	uniform vec3 iResolution;
+	uniform vec2 iMouse;
+	uniform sampler2D iChannel0;
+
+	const float tau = 6.28318530717958647692;
+	vec4 Noise( in ivec2 x )
+	{
+		return texture2D( iChannel0, (vec2(x)+0.5)/256.0, -100.0 );
+	}
+	void main()
+	{
+		vec3 ray = vec3(vTextureCoord - vec2(0.5), 1.0);
+		float offset = iGlobalTime*.5;	
+		float speed2 = (cos(offset)+1.0)*2.0;
+		float speed = speed2+.1;
+		float ispeed = 1.0/speed;
+		offset += sin(offset)*.96;
+		offset *= 2.0;	
+		vec3 col = vec3(0);
+		vec3 stp = ray/max(abs(ray.x),abs(ray.y));
+		vec3 pos = 2.0*stp+.5;
+		for ( int i=0; i < 10; i++ )
+		{
+			float z = Noise(ivec2(pos.xy)).x;
+			z = fract(z-offset);
+			float d = 50.0*z-pos.z;
+			float w = max(0.0, 1.0-8.0*length(fract(pos.xy)-.5));
+			vec3 c = max(vec3(0), vec3(1.0-abs(d+speed2*.5)*ispeed,1.0-abs(d)*ispeed,1.0-abs(d-speed2*.5)*ispeed));
+			col += 1.5*(1.0-z)*c*w*w;
+			pos += stp;
+		}
+		gl_FragColor = vec4(col,1.0);
+	}
+  );
+}
+
+void setup_screensaver_noise(CUBE_STATE_T *state)
+{
+  state->fbwidth = 960; state->fbheight = 540;
+  state->effect_fshader_source = TO_STRING(
+	precision lowp float;
+	varying vec2 vTextureCoord;
+	uniform highp float iGlobalTime;
+	uniform vec3 iResolution;
+	uniform vec2 iMouse;
+	uniform sampler2D iChannel0;
+
+	float     time=iGlobalTime*0.1;
+	float pi = 3.14159265;
+
+	float rand(vec2 co)
+	{
+	  return fract(sin(dot(co.xy, vec2(12.9898,78.233))) * 43758.5453);
+	}
+
+	void main()
+	{
+	  float r = rand(vec2(1.0*iGlobalTime+vTextureCoord.x, 3.0*iGlobalTime+vTextureCoord.y));
+	  float g = rand(vec2(2.0*iGlobalTime+vTextureCoord.x, 2.0*iGlobalTime+vTextureCoord.y));
+	  float b = rand(vec2(3.0*iGlobalTime+vTextureCoord.x, 1.0*iGlobalTime+vTextureCoord.y));
+	  gl_FragColor = vec4(r, g, b, 1.0);
+	}
+  );
+}
+
+void setup_screensaver_warp(CUBE_STATE_T *state)
+{
+  state->texwidth = state->width;
+  state->texheight = state->height;
+  state->fbwidth = 800;
+  state->fbheight = 450;
+  state->effect_texture_data = create_framebuffer_tex(state->texwidth, state->texheight);
+
+  state->effect_fshader_source = TO_STRING(
+	precision lowp float;
+	varying vec2 vTextureCoord;
+	uniform highp float iGlobalTime;
+	uniform vec3 iResolution;
+	uniform vec2 iMouse;
+	uniform sampler2D iChannel0;
+
+	float     time=iGlobalTime*0.1;
+	const float pi = 3.14159265;
+	const float sin_4000 = 0.6427876097;
+	const float cos_4000 = 0.7660444431;
+	const float sin_6000 = -0.8660254038;
+	const float cos_6000 = -0.5;
+
+	void main()
+	{
+	  float s = sin(time);
+	  float c = cos(time);
+	  float s2 = 2.0*s*c;
+	  float c2 = 1.0-2.0*s*s;
+	  float s3 = s2*c + c2*s;
+	  float c3 = c2*c - s2*s;
+	  float ss = s2*cos_4000 + c2*sin_4000;
+	  float cc = c3*cos_6000 - s3*sin_6000;
+	  vec2 offset2   = vec2(6.0*sin(time*1.1),              3.0*cos(time*1.1));
+	  vec2 oldPos = vTextureCoord.xy - vec2(0.5, 0.5);
+	  vec2 newPos = vec2(oldPos.x * c2 - oldPos.y * s2,
+		             oldPos.y * c2 + oldPos.x * s2);
+	  newPos = newPos*(1.0+0.2*s3) - offset2;
+	  vec2 temp = newPos;
+	  float beta = sin(temp.y*2.0 + time*8.0);
+	  newPos.x = temp.x + 0.4*beta;
+	  newPos.y = temp.y - 0.4*beta;
+	  gl_FragColor = texture2D(iChannel0, newPos);
+	}
+  );
+}
+
+#ifdef STANDALONE
+
+typedef struct
+{
+   uint32_t screen_width;
+   uint32_t screen_height;
+// OpenGL|ES objects
+   EGLDisplay display;
+   EGLSurface surface;
+   EGLContext context;
+} EGL_STATE_T;
+
+/***********************************************************
+ * Name: init_ogl
+ *
+ * Arguments:
+ *       CUBE_STATE_T *state - holds OGLES model info
+ *
+ * Description: Sets the display, OpenGL|ES context and screen stuff
+ *
+ * Returns: void
+ *
+ ***********************************************************/
+static void init_ogl(EGL_STATE_T *state)
+{
+   int32_t success = 0;
+   EGLBoolean result;
+   EGLint num_config;
+
+   static EGL_DISPMANX_WINDOW_T nativewindow;
+
+   DISPMANX_ELEMENT_HANDLE_T dispman_element;
+   DISPMANX_DISPLAY_HANDLE_T dispman_display;
+   DISPMANX_UPDATE_HANDLE_T dispman_update;
+   VC_RECT_T dst_rect;
+   VC_RECT_T src_rect;
+
+   static const EGLint attribute_list[] =
+   {
+      EGL_RED_SIZE, 8,
+      EGL_GREEN_SIZE, 8,
+      EGL_BLUE_SIZE, 8,
+      EGL_ALPHA_SIZE, 8,
+      EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
+      EGL_NONE
+   };
+   
+   static const EGLint context_attributes[] = 
+   {
+      EGL_CONTEXT_CLIENT_VERSION, 2,
+      EGL_NONE
+   };
+   EGLConfig config;
+
+   // get an EGL display connection
+   state->display = eglGetDisplay(EGL_DEFAULT_DISPLAY);
+   assert(state->display!=EGL_NO_DISPLAY);
+   check();
+
+   // initialize the EGL display connection
+   result = eglInitialize(state->display, NULL, NULL);
+   assert(EGL_FALSE != result);
+   check();
+
+   // get an appropriate EGL frame buffer configuration
+   result = eglChooseConfig(state->display, attribute_list, &config, 1, &num_config);
+   assert(EGL_FALSE != result);
+   check();
+
+   // get an appropriate EGL frame buffer configuration
+   result = eglBindAPI(EGL_OPENGL_ES_API);
+   assert(EGL_FALSE != result);
+   check();
+
+   // create an EGL rendering context
+   state->context = eglCreateContext(state->display, config, EGL_NO_CONTEXT, context_attributes);
+   assert(state->context!=EGL_NO_CONTEXT);
+   check();
+
+   // create an EGL window surface
+   success = graphics_get_display_size(0 /* LCD */, &state->screen_width, &state->screen_height);
+   assert( success >= 0 );
+
+   dst_rect.x = 0;
+   dst_rect.y = 0;
+   dst_rect.width = state->screen_width;
+   dst_rect.height = state->screen_height;
+      
+   src_rect.x = 0;
+   src_rect.y = 0;
+   src_rect.width = state->screen_width << 16;
+   src_rect.height = state->screen_height << 16;        
+
+   dispman_display = vc_dispmanx_display_open( 0 /* LCD */);
+   dispman_update = vc_dispmanx_update_start( 0 );
+         
+   dispman_element = vc_dispmanx_element_add ( dispman_update, dispman_display,
+      0/*layer*/, &dst_rect, 0/*src*/,
+      &src_rect, DISPMANX_PROTECTION_NONE, 0 /*alpha*/, 0/*clamp*/, 0/*transform*/);
+      
+   nativewindow.element = dispman_element;
+   nativewindow.width = state->screen_width;
+   nativewindow.height = state->screen_height;
+   vc_dispmanx_update_submit_sync( dispman_update );
+      
+   check();
+
+   state->surface = eglCreateWindowSurface( state->display, config, &nativewindow, NULL );
+   assert(state->surface != EGL_NO_SURFACE);
+   check();
+
+   // connect the context to the surface
+   result = eglMakeCurrent(state->display, state->surface, state->surface, state->context);
+   assert(EGL_FALSE != result);
+   check();
+}
+
+int main ()
+{
+   int terminate = 0;
+   CUBE_STATE_T _state, *state=&_state;
+   EGL_STATE_T _eglstate, *eglstate=&_eglstate;
+
+   // Clear application state
+   memset( eglstate, 0, sizeof( *eglstate ) );
+   bcm_host_init();
+   // Start OGLES
+   init_ogl(eglstate);
+again:
+   memset( state, 0, sizeof( *state ) );
+   state->verbose = 1;
+   state->width = eglstate->screen_width;
+   state->height = eglstate->screen_height;
+   setup_screensaver_default(state);
+   setup_screensaver_warp(state);
+   screensaver_init(state);
+   screensaver_init_shaders(state);
+
+   int frames = 0;
+   uint64_t ts = GetTimeStamp();
+   while (!terminate)
+   {
+      screensaver_update(state);
+      screensaver_render(state);
+      eglSwapBuffers(eglstate->display, eglstate->surface);
+      check();
+
+      frames++;
+      uint64_t ts2 = GetTimeStamp();
+      if (ts2 - ts > 1e6)
+      {
+         printf("%d fps (%.3f)\n", frames, state->time);
+         ts += 1e6;
+         frames = 0;
+         //break;
+      }
+   }
+   screensaver_deinit_shaders(state);
+   goto again;
+   return 0;
+}
+#endif
+
diff --git a/xbmc/screensavers/gles/triangle2.h b/xbmc/screensavers/gles/triangle2.h
new file mode 100644
index 0000000..6088203
--- /dev/null
+++ b/xbmc/screensavers/gles/triangle2.h
@@ -0,0 +1,64 @@
+#pragma once
+
+#include "GLES2/gl2.h"
+#include "EGL/egl.h"
+#include "EGL/eglext.h"
+
+#define NUMCONSTS 9
+
+typedef struct
+{
+   GLuint verbose;
+   GLuint effect_vshader;
+   GLuint effect_fshader;
+   GLuint render_vshader;
+   GLuint render_fshader;
+   GLuint effect_program;
+   GLuint render_program;
+   GLuint effect_fb;
+   GLuint framebuffer_texture;
+   GLuint vertex_buffer;
+   GLuint effect_texture;
+   void *effect_texture_data;
+// effect attribs
+   GLuint uTime, uScale, uResolution, uMouse;
+   GLuint uChannel0;
+// render attribs
+   GLuint attr_vertex, uTexture;
+   uint64_t last_time;
+   float _c[NUMCONSTS];
+   float _ct[NUMCONSTS];
+   float _cv[NUMCONSTS];
+
+// config settings
+   int width, height;
+   int texwidth, texheight;
+   int fbwidth, fbheight;
+   int mousex, mousey;
+   float time;
+   const GLchar *effect_vshader_source;
+   const GLchar *effect_fshader_source;
+   const GLchar *render_vshader_source;
+   const GLchar *render_fshader_source;
+
+} CUBE_STATE_T;
+
+
+void screensaver_init_shaders(CUBE_STATE_T *state);
+void screensaver_init(CUBE_STATE_T *state);
+void screensaver_update(CUBE_STATE_T *state);
+void screensaver_render(CUBE_STATE_T *state);
+void screensaver_deinit_shaders(CUBE_STATE_T *state);
+
+void setup_screensaver_default(CUBE_STATE_T *state);
+void setup_screensaver_warp(CUBE_STATE_T *state);
+void setup_screensaver_plasma(CUBE_STATE_T *state);
+void setup_screensaver_plasma2(CUBE_STATE_T *state);
+void setup_screensaver_noise(CUBE_STATE_T *state);
+void setup_screensaver_border(CUBE_STATE_T *state);
+void setup_screensaver_stellar(CUBE_STATE_T *state);
+void setup_screensaver_spiral(CUBE_STATE_T *state);
+void setup_screensaver_ball(CUBE_STATE_T *state);
+
+
+
diff --git a/xbmc/screensavers/gles/warp/Makefile.in b/xbmc/screensavers/gles/warp/Makefile.in
new file mode 100644
index 0000000..4406b4a
--- /dev/null
+++ b/xbmc/screensavers/gles/warp/Makefile.in
@@ -0,0 +1,36 @@
+ARCH=@ARCH@
+CXXFLAGS=-fPIC
+ifeq (@USE_ANDROID@,1)
+SLIB = @abs_top_srcdir@/system/libwarp.so
+else
+SLIB = @abs_top_srcdir@/addons/screensaver.gles.warp/Warp.xbs
+endif
+OBJS = wrapper.o 
+DEFINES += -DSCREENSAVER=warp
+
+ifeq (@USE_OPENGLES@,1)
+  DEFINES += -DHAS_GLES=2
+  INCLUDES+= -I@abs_top_srcdir@/xbmc/screensavers/gles
+  OBJS += @abs_top_srcdir@/xbmc/screensavers/gles/gleshelpers.a
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGLES
+  else
+    LDFLAGS += -lGLESv2
+  endif
+else
+  DEFINES += -DHAS_GL
+  ifeq ($(findstring osx,$(ARCH)), osx)
+    LDFLAGS += -framework OpenGL
+  else
+    LDFLAGS += -lGL
+  endif
+endif
+
+$(SLIB): $(OBJS)
+ifeq ($(findstring osx,$(ARCH)), osx)
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -bundle -o $(SLIB) $(OBJS)
+else
+	$(CXX) $(CXXFLAGS) $(LDFLAGS) -shared -o $(SLIB) $(OBJS)
+endif
+
+include @abs_top_srcdir@/Makefile.include
diff --git a/xbmc/screensavers/gles/warp/wrapper.cc b/xbmc/screensavers/gles/warp/wrapper.cc
new file mode 100644
index 0000000..fd58b73
--- /dev/null
+++ b/xbmc/screensavers/gles/warp/wrapper.cc
@@ -0,0 +1,102 @@
+#include <stdio.h>
+#include <assert.h>
+#include "Application.h"
+#include "../../addons/include/xbmc_scr_dll.h"
+
+extern "C" {
+
+#include "triangle2.h"
+
+#define PASTER(x,y) x ## _ ## y
+#define EVALUATOR(x,y) PASTER(x,y)
+#define NAME(fun) EVALUATOR(fun, SCREENSAVER)
+
+static CUBE_STATE_T _state, *state=&_state;
+
+ADDON_STATUS ADDON_Create(void* hdl, void* props)
+{
+  if (!props)
+    return ADDON_STATUS_UNKNOWN;
+
+  // Clear application state
+  memset( state, 0, sizeof( *state ) );
+  // Start OGLES
+  assert( g_application.IsCurrentThread() );
+  glGetError();
+
+  SCR_PROPS* scrprops = (SCR_PROPS*)props;
+  state->width = scrprops->width;
+  state->height = scrprops->height;
+  setup_screensaver_default(state);
+  NAME(setup_screensaver)(state);
+  screensaver_init(state);
+  screensaver_init_shaders(state);
+
+  return ADDON_STATUS_OK;
+}
+
+void Start()
+{
+}
+
+void Render()
+{
+  screensaver_update(state);
+  screensaver_render(state);
+}
+
+void ADDON_Stop()
+{
+   screensaver_deinit_shaders(state);
+}
+
+void ADDON_Destroy()
+{
+}
+
+ADDON_STATUS ADDON_GetStatus()
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+bool ADDON_HasSettings()
+{
+puts(__func__);
+  return false;
+}
+
+unsigned int ADDON_GetSettings(ADDON_StructSetting ***sSet)
+{
+puts(__func__);
+  return 0;
+}
+
+ADDON_STATUS ADDON_SetSetting(const char *settingName, const void *settingValue)
+{
+puts(__func__);
+  return ADDON_STATUS_OK;
+}
+
+void ADDON_FreeSettings()
+{
+puts(__func__);
+}
+
+void ADDON_Announce(const char *flag, const char *sender, const char *message, const void *data)
+{
+puts(__func__);
+}
+
+void GetInfo(SCR_INFO *info)
+{
+puts(__func__);
+}
+
+void Remove()
+{
+puts(__func__);
+}
+
+}
+

From 5438dcd789fc909766fd091d84c82021ff4f4d36 Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Tue, 5 May 2015 23:58:06 +0100
Subject: [PATCH 44/46] [screensaver] Leave GUI contents available for
 screensaver

---
 xbmc/guilib/GUIWindowManager.cpp | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/xbmc/guilib/GUIWindowManager.cpp b/xbmc/guilib/GUIWindowManager.cpp
index ba33908..17ea269 100644
--- a/xbmc/guilib/GUIWindowManager.cpp
+++ b/xbmc/guilib/GUIWindowManager.cpp
@@ -796,7 +796,16 @@ void CGUIWindowManager::ActivateWindow_Internal(int iWindowID, const vector<stri
   int currentWindow = GetActiveWindow();
   CGUIWindow *pWindow = GetWindow(currentWindow);
   if (pWindow)
-    CloseWindowSync(pWindow, iWindowID);
+  {
+    if (iWindowID == WINDOW_SCREENSAVER)
+    {
+      pWindow->Close(true, iWindowID);
+    }
+    else
+    {
+      CloseWindowSync(pWindow, iWindowID);
+    }
+  }
   g_infoManager.SetNextWindow(WINDOW_INVALID);
 
   // Add window to the history list (we must do this before we activate it,

From 4274a9d0fbb2a56b4693278b4e45e31f6ca5f17c Mon Sep 17 00:00:00 2001
From: fritsch <peter.fruehberger@gmail.com>
Date: Fri, 8 May 2015 12:24:15 +0200
Subject: [PATCH 45/46] Use dcadec on IMX and RPI - move setting to audio
 output

---
 addons/resource.language.en_gb/resources/strings.po  |  8 ++++----
 system/settings/imx6.xml                             | 20 ++++++++++++++++++++
 system/settings/rbp.xml                              | 10 +++++-----
 system/settings/rbp2.xml                             |  8 +++++---
 .../DVDCodecs/Audio/DVDAudioCodecFFmpeg.cpp          | 10 +++++++---
 xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp  |  5 +++--
 xbmc/cores/omxplayer/OMXAudioCodecOMX.cpp            |  2 +-
 7 files changed, 45 insertions(+), 18 deletions(-)

diff --git a/addons/resource.language.en_gb/resources/strings.po b/addons/resource.language.en_gb/resources/strings.po
index d56cbd0..e43bcd8 100644
--- a/addons/resource.language.en_gb/resources/strings.po
+++ b/addons/resource.language.en_gb/resources/strings.po
@@ -16718,12 +16718,12 @@ msgctxt "#38103"
 msgid "Extract thumbnails from video files"
 msgstr ""
 
-#: system/settings/rbp.xml
+#: system/settings/rbp.xml system/settings/imx6.xml
 msgctxt "#38120"
-msgid "Support 8 channel DTS HD audio"
+msgid "Support 8 channel DTS HD audio decoding"
 msgstr ""
 
-#: system/settings/rbp.xml
+#: system/settings/rbp.xml system/settings/imx6.xml
 msgctxt "#38121"
-msgid "This option supports 8 channel DTS HD but may use more CPU "
+msgid "This option supports 8 channel DTS HD decoding, but may use more CPU. It is only available when DTS and DTS-HD audio passthrough is disabled"
 msgstr ""
diff --git a/system/settings/imx6.xml b/system/settings/imx6.xml
index d8b17c3..bdb5eb8 100644
--- a/system/settings/imx6.xml
+++ b/system/settings/imx6.xml
@@ -13,6 +13,26 @@
         </setting>
       </group>
     </category>
+    <category id="audiooutput">
+      <group id="1">
+        <setting id="audiooutput.supportdtshdcpudecoding" type="boolean" label="38120" help="38121">
+          <level>2</level>
+          <default>false</default>
+          <control type="toggle" />
+          <dependencies>
+            <dependency type="enable">
+            <or>
+              <condition setting="audiooutput.passthrough" operator="is">false</condition>
+              <and>
+                <condition setting="audiooutput.dtshdpassthrough" operator="is">false</condition>
+                <condition setting="audiooutput.dtspassthrough" operator="is">false</condition>
+              </and>
+            </or>
+            </dependency>
+          </dependencies>
+        </setting>
+      </group>
+    </category>
   </section>
   <section id="videos">
     <category id="videoacceleration">
diff --git a/system/settings/rbp.xml b/system/settings/rbp.xml
index aa57438..b27d23f 100644
--- a/system/settings/rbp.xml
+++ b/system/settings/rbp.xml
@@ -41,11 +41,6 @@
           <default>true</default>
           <control type="toggle" />
         </setting>
-        <setting id="videoplayer.supportdtshd" type="boolean" label="38120" help="38121">
-          <level>2</level>
-          <default>false</default>
-          <control type="toggle" />
-        </setting>
       </group>
     </category>
     <category id="myvideos">
@@ -106,6 +101,11 @@
         <setting id="audiooutput.processquality">
           <default>101</default> <!-- AE_QUALITY_GPU -->
         </setting>
+        <setting id="audiooutput.supportdtshdcpudecoding" type="boolean" label="38120" help="38121">
+          <level>2</level>
+          <default>false</default>
+          <control type="toggle" />
+        </setting>
       </group>
       <group id="3">
         <setting id="audiooutput.ac3transcode" help="37024">
diff --git a/system/settings/rbp2.xml b/system/settings/rbp2.xml
index 197e255..b29a428 100644
--- a/system/settings/rbp2.xml
+++ b/system/settings/rbp2.xml
@@ -6,9 +6,6 @@
         <setting id="videoplayer.useomxplayer">
           <default>false</default>
         </setting>
-        <setting id="videoplayer.supportdtshd">
-          <default>true</default>
-        </setting>
       </group>
     </category>
   </section>
@@ -22,6 +19,11 @@
       </group>
     </category>
     <category id="audiooutput">
+      <group id="1">
+        <setting id="audiooutput.supportdtshdcpudecoding">
+          <default>true</default>
+        </setting>
+      </group>
       <group id="3">
         <setting id="audiooutput.ac3transcode" help="36429">
         </setting>
diff --git a/xbmc/cores/dvdplayer/DVDCodecs/Audio/DVDAudioCodecFFmpeg.cpp b/xbmc/cores/dvdplayer/DVDCodecs/Audio/DVDAudioCodecFFmpeg.cpp
index 135bb43..4653f4d 100644
--- a/xbmc/cores/dvdplayer/DVDCodecs/Audio/DVDAudioCodecFFmpeg.cpp
+++ b/xbmc/cores/dvdplayer/DVDCodecs/Audio/DVDAudioCodecFFmpeg.cpp
@@ -55,13 +55,17 @@ CDVDAudioCodecFFmpeg::~CDVDAudioCodecFFmpeg()
 
 bool CDVDAudioCodecFFmpeg::Open(CDVDStreamInfo &hints, CDVDCodecOptions &options)
 {
-  AVCodec* pCodec;
+  AVCodec* pCodec = NULL;
   m_bOpenedCodec = false;
 
-  if (hints.codec == AV_CODEC_ID_DTS && CSettings::Get().GetBool("videoplayer.supportdtshd"))
+#if defined(TARGET_RASPBERRY_PI) || defined(HAS_IMXVPU)
+  if (hints.codec == AV_CODEC_ID_DTS && CSettings::Get().GetBool("audiooutput.supportdtshdcpudecoding"))
     pCodec = avcodec_find_decoder_by_name("libdcadec");
-  else
+#endif
+
+  if (!pCodec)
     pCodec = avcodec_find_decoder(hints.codec);
+
   if (!pCodec)
   {
     CLog::Log(LOGDEBUG,"CDVDAudioCodecFFmpeg::Open() Unable to find codec %d", hints.codec);
diff --git a/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp b/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp
index 1f8e15e..5feac29 100644
--- a/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp
+++ b/xbmc/cores/dvdplayer/DVDDemuxers/DVDDemuxFFmpeg.cpp
@@ -439,7 +439,8 @@ bool CDVDDemuxFFmpeg::Open(CDVDInputStream* pInput, bool streaminfo, bool filein
 
   if (m_streaminfo)
   {
-    if (CSettings::Get().GetBool("videoplayer.supportdtshd"))
+#if defined(TARGET_RASPBERRY_PI) || defined(HAS_IMXVPU)
+    if (CSettings::Get().GetBool("audiooutput.supportdtshdcpudecoding"))
     {
       for (unsigned int i = 0; i < m_pFormatContext->nb_streams; i++)
       {
@@ -448,7 +449,7 @@ bool CDVDDemuxFFmpeg::Open(CDVDInputStream* pInput, bool streaminfo, bool filein
           st->codec->codec = avcodec_find_decoder_by_name("libdcadec");
       }
     }
-
+#endif
     /* to speed up dvd switches, only analyse very short */
     if(m_pInput->IsStreamType(DVDSTREAM_TYPE_DVD))
       av_opt_set_int(m_pFormatContext, "analyzeduration", 500000, 0);
diff --git a/xbmc/cores/omxplayer/OMXAudioCodecOMX.cpp b/xbmc/cores/omxplayer/OMXAudioCodecOMX.cpp
index 093864d..4bd81f0 100644
--- a/xbmc/cores/omxplayer/OMXAudioCodecOMX.cpp
+++ b/xbmc/cores/omxplayer/OMXAudioCodecOMX.cpp
@@ -66,7 +66,7 @@ bool COMXAudioCodecOMX::Open(CDVDStreamInfo &hints)
   AVCodec* pCodec;
   m_bOpenedCodec = false;
 
-  if (hints.codec == AV_CODEC_ID_DTS && CSettings::Get().GetBool("videoplayer.supportdtshd"))
+  if (hints.codec == AV_CODEC_ID_DTS && CSettings::Get().GetBool("audiooutput.supportdtshdcpudecoding"))
     pCodec = avcodec_find_decoder_by_name("libdcadec");
   else
     pCodec = avcodec_find_decoder(hints.codec);

From 7b321699fa3e12dc943e7de94568b47c92b4056b Mon Sep 17 00:00:00 2001
From: popcornmix <popcornmix@gmail.com>
Date: Fri, 15 May 2015 14:04:11 +0100
Subject: [PATCH 46/46] [omxplayer] Make unsupported when ac3transcode is
 enabled

---
 xbmc/cores/omxplayer/OMXHelper.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/xbmc/cores/omxplayer/OMXHelper.cpp b/xbmc/cores/omxplayer/OMXHelper.cpp
index be54f31..373e3f2 100644
--- a/xbmc/cores/omxplayer/OMXHelper.cpp
+++ b/xbmc/cores/omxplayer/OMXHelper.cpp
@@ -56,6 +56,12 @@ bool OMXPlayerUnsuitable(bool m_HasVideo, bool m_HasAudio, CDVDDemux* m_pDemuxer
     CLog::Log(LOGNOTICE, "%s OMXPlayer unsuitable due to audio sink", __func__);
     return true;
   }
+  // omxplayer doesn't handle ac3 transcode
+  if (CSettings::Get().GetBool("audiooutput.ac3transcode"))
+  {
+    CLog::Log(LOGNOTICE, "%s OMXPlayer unsuitable due to ac3transcode", __func__);
+    return true;
+  }
   if (m_pDemuxer)
   {
     // find video stream
